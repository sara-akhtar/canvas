{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Elyra Canvas","text":"<p>Elyra Canvas is an open source library providing React objects to enable applications to quickly create a fully functional flow editor allowing the user to easily create and edit flows of linked nodes.</p> <p> Elyra Canvas in action in the SPSS Modeler UI, the flagship component of IBM Watsonx </p>"},{"location":"#elyra-canvas-features","title":"Elyra Canvas Features","text":"<p>Elyra Canvas:</p> <ul> <li>Provides a comprehensive set of out-of-the-box UI components needed to build an application such as: flow editor, palette, toolbar, context menu, tooltips, command stack, clipboard support, notifications area, side panels and more!</li> <li>Is a UI-centric library and is therefore back-end and run-time agnositc, meaning the flow can display connected nodes representing any kind of operations.</li> <li>Is fast to get running - and easy to customize  - with extensive customization capability.</li> <li>Is delivered as a package from the NPM registry</li> <li>Delivers a JSON powered properties management component to allow easy, no-code handling of mulltiple properties windows - for when you have a multitude of node types each with their own range of properties.</li> <li>Conforms to the IBM Carbon visual design language - and therefore plugs in easily to any application wishing to follow the Carbon standards including dark mode and light mode themes.</li> <li>Delivers built-in accessibility so there\u2019s no need to worry about keyboard navigation, accessible color themes, screen reader integration, etc.</li> <li>Is translated into 12 languages.</li> <li>Is the mainstay of several IBM products/applications across multiple divisions.</li> </ul>"},{"location":"#elyra-canvas-components","title":"Elyra Canvas Components","text":"<p>The elyra-ai/canvas repo contains three main components:</p> <ul> <li> <p>Common Canvas - This contains canvas functionality which is packaged into the elyra/canvas NPM module and deployed to the NPM registry. It provides a way for an application to display a flow of data operations (shown as a set of nodes connected with links) to the user and to allows the user to interact with the display to modify the flow. Common canvas is a react component which can be imported, and is assisted by a regular JavaScript class called <code>CanvasController</code> which provides an API and handles the internal data model of the flow. Common canvas is highly customizable where node shape and appearance, colors, styles layout etc can all be customized by your application code. Common canvas handles flows parsed from, and serialized into, a pipeline flow JSON document. It\u2019s palette of available nodes is also customized usging a JSON document</p> </li> <li> <p>Common Properties - This contains properties functionality which is packaged into the elyra/canvas NPM module and deployed to the NPM registry. It provides a way to translate a JSON document, which describes a set of properties with UI hints, into a working properties dialog panel. Common properties is a React component and has an associated properties controller object.</p> </li> <li> <p>Test Harness - This provides a node.js app which displays a UI which allows you to try out some sample applications and various features of the common canvas and common properties components. Bear in mind this is not supposed to be a fully functional app but is, as the name suggests, a framework for testing. In the test harness, you can select one of the sample applications or select <code>None</code> as the sample app and then select a test canvas file from the <code>Canvas Diagram</code> drop down list and a test palette from the <code>Canvas palette</code> drop down list.</p> </li> </ul>"},{"location":"01-install/","title":"Installation","text":"<p>You\u2019ll need to build your application with Elyra Canvas.</p> <ul> <li>Elyra Canvas requires react, react-dom, react-intl, and react-redux libraries to be installed. See peerDependencies in package.json for versions requirements.</li> </ul> <p>Use the command: <pre><code>npm install @elyra/canvas --save-dev\n</code></pre> or add this to your package.json file:</p> <p><pre><code>  \"@elyra/canvas\": \"x.x.x\"\n</code></pre> where x.x.x is the latest build and then run: <pre><code>npm install\n</code></pre></p>"},{"location":"01-install/#localization","title":"Localization","text":"<p>You must wrapper <code>&lt;CommonCanvas&gt;</code> and <code>&lt;CommonProperties&gt;</code> in an <code>&lt;IntlProvider&gt;</code> object.</p> <p>If you want to display translated text, the sample code below shows how <code>&lt;IntlProvider&gt;</code> should be initialized. Your code can set <code>this.locale</code> to indicate which language should override the default which, in this sample code, is set to English <code>en</code>. The default locale will be used if <code>this.locale</code> is set to a language which is not currently supported.</p> <p>If you want to provide translations for your own application\u2019s text you can import your own bundles and load them into the <code>this.messages</code> object along with the common canvas and common properties text. If you do this you will have to move <code>&lt;IntlProvider/&gt;</code> so that it wrappers your React objects as well as <code>&lt;CommonCanvas/&gt;</code> and/or <code>&lt;CommonProperties&gt;</code>.</p> <pre><code>import { IntlProvider } from \"react-intl\";\nimport CommandActionsBundles from \"@elyra/canvas/locales/command-actions/locales\";\nimport CommonCanvasBundles from \"@elyra/canvas/locales/common-canvas/locales\";\nimport CommonPropsBundles from \"@elyra/canvas/locales/common-properties/locales\";\nimport PaletteBundles from \"@elyra/canvas/locales/palette/locales\";\nimport ToolbarBundles from \"@elyra/canvas/locales/toolbar/locales\";\n\nclass App extends React.Component {\n\nconstructor() {\n    this.locale = \"en\";\n    // Create messages object once (here in constructor) - do not create messages\n    // in the render method, otherwise unnecessary renders inside\n    // common-canvas/common-properties will be performed.\n    this.messages = this._getMessages(\n        this.locale,\n        [CommandActionsBundles, CommonCanvasBundles, CommonPropsBundles,\n         PaletteBundles, ToolbarBundles]\n    );\n}\n\n_getMessages(locale, bundles) {\n  const messages = {};\n  for (const bundle of bundles) {\n    Object.assign(messages, bundle[locale]);\n  }\n  return messages;\n}\n\nrender() {\n  &lt;IntlProvider locale={this.locale} defaultLocale=\"en\" messages={this.messages}&gt;\n    {Add your &lt;CommonCanvas/&gt; or &lt;CommonProperties/&gt; element here.}\n  &lt;/IntlProvider&gt;\n}\n</code></pre>"},{"location":"01-install/#overriding-styles-and-color-themes","title":"Overriding Styles and Color Themes","text":"<p>When building your application you will need to load fonts and override styles:</p>"},{"location":"01-install/#css-styling-for-quick-start","title":"CSS styling for quick start","text":"<p>If you just want to get up and running and don\u2019t care about scss then import these regular css files:</p> <ul> <li>carbon-components/css/carbon-components.min.css</li> <li>@elyra/canvas/dist/styles/common-canvas.min.css<ul> <li>version 8.x and older @elyra/canvas/dist/common-canvas.min.css</li> </ul> </li> </ul> <p>More information about carbon components can be found here http://www.carbondesignsystem.com/getting-started/developers</p>"},{"location":"01-install/#scss-styling-recommended","title":"SCSS styling (recommended)","text":"<p>If you want to use the full power of scss styling with variable overrides etc then include these imports in your main scss file: <pre><code>@import \"carbon-components/scss/globals/scss/styles\";\n@import \"@elyra/canvas/src/index.scss\";\n</code></pre></p> <ul> <li>use <code>autoprefixer</code> when building</li> <li>if using webpack under the <code>sass-loader</code> and make sure to include</li> </ul> <pre><code>options: { includePaths: [\"node_modules\"] }\n</code></pre> <p>Again, you can refer to the test harness index.scss file for sample code.</p>"},{"location":"01-install/#loading-fonts","title":"Loading Fonts","text":"<p>You may find that there is a pause in common canvas behavior, such as when the context menu is first displayed, which is caused by fonts being loaded. This can be fixed by adding the following to the <code>.scss</code> file for your application: <pre><code>$font-path: \"/fonts\";\n@import \"carbon-components/scss/globals/scss/styles\";\n</code></pre> The fonts will need to be imported from carbon before carbon styles and placed in a public <code>/fonts</code> directory. You can see an example of this in the common-canvas test harness (which is the equivalent of a host application) in this repo. That is, the index.scss file contains the lines above and the grunt build files ensures the fonts are copied from<code>node_modules/carbon-components/src/globals/</code> to the <code>&lt;carbon fonts folder&gt;</code> directory.</p>"},{"location":"01-install/#3rd-party-styling","title":"3rd party styling","text":"<p>If you are using common-properties then also include the react-virtualized styles:   - react-virtualized/styles.css</p>"},{"location":"02-canvas/","title":"Common Canvas","text":""},{"location":"02-canvas/#introduction","title":"Introduction","text":"<p>Common canvas displays a flow of data operations as nodes and links which the user can create and edit to get the flow they want. These visual flows of data operations are translated into data processing steps performed by a back-end server. Common canvas provides functionality for the visual display of flows in the browser and leaves persistence and execution of data flows to the application. Within common canvas the user can perform operations such as:</p> <ul> <li>Create a new node by dragging a node definition from a palette onto the canvas.</li> <li>Create a new node by dragging a node from outside the canvas onto the canvas (you\u2019ll have to do some programming to get this to work).</li> <li>Delete a node by clicking a context menu option.</li> <li>Create a link by dragging a line from one node to another.</li> <li>Delete a link by clicking a context menu option.</li> <li>Add a comment to the canvas and draw a link from it to one or more nodes.</li> <li>Edit a comment.</li> <li>Move nodes and comments around in the canvas to get the desired arrangement.</li> <li>And more! \u2026</li> </ul>"},{"location":"02-canvas/#common-canvas-react-object","title":"Common Canvas react object","text":"<p>Common-canvas is a react component that can be used in your react application to display a fully-functional canvas user interface including the function mentioned above. The <code>&lt;CommonCanvas&gt;</code> component is displayed in a <code>&lt;div&gt;</code> provided by your application. Here\u2019s some sample code to show the mnimum needed to get a working canvas.</p> <pre><code>import React from \"react\";\nimport AllTypesCanvas from \"../../test_resources/diagrams/allTypesCanvas.json\";\nimport ModelerPalette from \"../../test_resources/palettes/modelerPalette.json\";\nimport { CommonCanvas, CanvasController } from \"@elyra/canvas\";\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.canvasController = new CanvasController();\n        this.canvasController.setPipelineFlow(AllTypesCanvas);\n        this.canvasController.setPipelineFlowPalette(ModelerPalette);\n    }\n\n    render() {\n        return (\n            &lt;div id=\"harness-app-container\"&gt;\n                &lt;CommonCanvas\n                    canvasController={this.canvasController}\n                /&gt;\n            &lt;/div&gt;\n        );\n    }\n}\n</code></pre>"},{"location":"02-canvas/#canvas-controller","title":"Canvas Controller","text":"<p>The only mandatory parameter for the <code>&lt;CommonCanvas&gt;</code> component is a regular JavaScript object called the CanvasController.</p> <p>The CanvasController routes handles calls from the host application and actions performed by the user. It then updates the internal object model which stores:</p> <ol> <li>the data that describes the flow of nodes, links and comments (called a pipelineFlow);</li> <li>the data that describes the definition of the palette which contains node templates that can dragged to add nodes to the canvas;</li> <li>the set of currently selected objects.</li> <li>notification messages</li> <li>breadcrumbs that indicate which sub-flow is being viewed</li> <li>layout information</li> </ol> <p>The CanvasController provides an API which allows your code to:</p> <ol> <li>set a new pipelineFlow;</li> <li>get the current pipelineFlow (after the user has edited it);</li> <li>update and edit objects in the canvas (for example, add node, delete link etc.);</li> <li>set the node definition data (for display of nodes in the palette)</li> </ol>"},{"location":"02-canvas/#getting-started-with-common-canvas-programming","title":"Getting started with common canvas programming","text":""},{"location":"02-canvas/#hello-canvas","title":"Hello Canvas!","text":"<p>You can start by looking at these two \u2018hello  world\u2019 examples for using common canvas:</p> <ul> <li>This first one called app-tiny.js has the bare minimum necessary to get a fully functioning common-canvas to appear including all the basic functionality, a palette and a flow of nodes and links.</li> <li>The second, called app-small.js, shows many of the options available to a common-canvas developer such as configurations and callback handlers.</li> </ul> <p>You can also look at the App.js file in the test harness section of this repo to see examples of code that uses the common canvas component.</p> <p>Now let\u2019s walk through the different steps to get common-canvas working:</p>"},{"location":"02-canvas/#step-1-install-elyra-canvas-npm-module","title":"Step 1 : Install Elyra Canvas NPM module","text":"<p>Enter: <pre><code>     npm install @elyra/canvas\n</code></pre></p>"},{"location":"02-canvas/#step-2-import-common-canvas","title":"Step 2 : Import Common-canvas","text":"<p>To use common canvas in your react application you need to do the following. First import the CommonCanvas react component and CanvasController class from the Elyra Canvas library.  Elyra Canvas produces both <code>esm</code> and <code>cjs</code> outputs.  By default <code>esm</code> will be used when webpack is used to build the consuming application.</p> <p>All Components <pre><code>    import { CommonCanvas, CanvasController } from \"@elyra/canvas\";\n</code></pre> Canvas only</p> <p>To import only canvas functionality in <code>cjs</code> format use: <pre><code>    import { CommonCanvas, CanvasController } from \"@elyra/canvas/dist/lib/canvas\";\n</code></pre></p> <p>In addition you\u2019ll need to import <code>&lt;IntlProvider&gt;</code> from the <code>react-intl</code> library. <pre><code>    import { IntlProvider } from \"react-intl\";\n</code></pre></p>"},{"location":"02-canvas/#step-3-create-an-instance-of-the-canvas-controller","title":"Step 3 : Create an instance of the canvas controller","text":"<p>To control the canvas you\u2019ll need an instance of the canvas controller so create an instance of it like this (probably in the constructor of your object). <pre><code>    this.canvasController = new CanvasController();\n</code></pre></p>"},{"location":"02-canvas/#step-4-set-the-palette-data","title":"Step 4 : Set the palette data","text":"<p>Next you\u2019ll need to populate the palette data. This will specify the nodes (split into categories) that will appear in the palette. The user can drag them from the palette to build their flow. This is done by calling CanvasController with: <pre><code>    this.canvasController.setPipelineFlowPalette(pipelineFlowPalette);\n</code></pre> The pipelineFlowPalette object should conform to the JSON schema found here: https://github.com/elyra-ai/pipeline-schemas/tree/master/common-canvas/palette</p> <p>Some examples of palette JSON files can be found here: https://github.com/elyra-ai/canvas/tree/master/canvas_modules/harness/test_resources/palettes</p>"},{"location":"02-canvas/#step-5-optional-set-the-flow-data","title":"Step 5 : (Optional) Set the flow data","text":"<p>This is an optional step. If you want a previously saved flow to be shown in the canvas editor so the user can start to edit it, you will need to call the CanvasController with: <pre><code>    this.canvasController.setPipelineFlow(pipelineFlow);\n</code></pre></p> <p>The pipelineFlow object should conform to the JSON schema found here: https://github.com/elyra-ai/pipeline-schemas/tree/master/common-pipeline/pipeline-flow</p> <p>Some examples of pipeline flow JSON files can be found here: https://github.com/elyra-ai/canvas/tree/master/canvas_modules/harness/test_resources/diagrams</p>"},{"location":"02-canvas/#step-6-pull-in-the-css","title":"Step 6 : Pull in the CSS","text":"<p>Check this section to find info on what CSS to include in your application\u2019s CSS. Styling.</p>"},{"location":"02-canvas/#step-7-display-the-canvas","title":"Step 7 : Display the canvas","text":"<p>Finally you\u2019ll need to display the canvas object inside an <code>&lt;IntlProvider&gt;</code> object. Inside your render code, add the following: <pre><code>    &lt;div&gt;\n        &lt;IntlProvider&gt;\n            &lt;CommonCanvas canvasController={this.canvasController} /&gt;\n        &lt;/IntlProvider&gt;\n    &lt;/div&gt;\n</code></pre> The div should have the dimensions you want for your canvas to display in your page. For the canvasController property, pass the instance of canvas controller you created earlier. This is the only mandatory property. After providing this and running your code you will have a fully functioning canvas including: a palette; default toolbar; context menus; direct manipulation (move and resize) etc. To customize these behaviors and presentation continue with the sections below.</p>"},{"location":"02-canvas/#common-canvas-customization","title":"Common Canvas customization","text":"<p>If you want to customize the behavior of common canvas you can specify any combination of the following optional settings: <pre><code>    &lt;div&gt;\n        &lt;CommonCanvas\n            canvasController={this.canvasController}\n\n            config={this.commonCanvasConfig}\n            toolbarConfig={this.toolbarConfig}\n            notificationConfig={this.notificationConfig}\n            contextMenuConfig={this.contextMenuConfig}\n            keyboardConfig={this.keyboardConfig}\n\n            contextMenuHandler={this.contextMenuHandler}\n            beforeEditActionHandler={this.beforeEditActionHandler}\n            editActionHandler={this.editActionHandler}\n            clickActionHandler={this.clickActionHandler}\n            decorationActionHandler={this.decorationActionHandler}\n            layoutHandler={this.layoutHandler}\n            tipHandler={this.tipHandler}\n            idGeneratorHandler={this.idGeneratorHandler}\n            selectionChangeHandler={this.selectionChangeHandler}\n            actionLabelHandler={this.actionLabelHandler}\n\n            showRightFlyout={showRightFlyout}\n            rightFlyoutContent={rightFlyoutContent}\n\n            showBottomPanel={showBottomPanel}\n            bottomPanelContent={bottomPanelContent}\n\n            showTopPanel={showTopPanel}\n            topPanelContent={topPanelContent}\n        &gt;\n        &lt;/CommonCanvas&gt;\n    &lt;/div&gt;\n</code></pre></p>"},{"location":"02-canvas/#config-objects","title":"Config objects","text":"<p>Common canvas has five optional configuration objects: config, toolbarConfig, notificationConfig, contextMenuConfig and keyboardConfig. They are documented here: Config Objects</p>"},{"location":"02-canvas/#handlers","title":"Handlers","text":"<p>There are several optional handlers implemented as callback functions. They are contextMenuHandler, editActionHandler, beforeEditActionHandler, clickActionHandler, decorationActionHandler, layoutHandler, tipHandler, idGeneratorHandler, selectionChangeHandler and actionLabelHandler. They are documented here: Common Canvas Callback</p>"},{"location":"02-canvas/#right-flyout-panel-parameters","title":"Right-flyout panel parameters","text":"<p>The right flyout panel appears on the right of the canvas area. You can add whatever content you like to this panel. Typically, it is used to display properties of nodes on the canvas. There are two optional parameters to let you manage the right flyout panel These are:</p> <ul> <li>showRightFlyout: This can be true or false to indicate whether the flyout panel is shown or not. The default is false.</li> <li>rightFlyoutContent: content to display in the right flyout which is a JSX object. Nothing is displayed by default.</li> </ul>"},{"location":"02-canvas/#bottom-panel-parameters","title":"Bottom panel parameters","text":"<p>The bottom panel appears below the canvas area and between the palette and the right flyout panel. You can add whatever content you like to this panel. There are two optional parameters to let you manage the bottom panel. These are:</p> <ul> <li>showBottomPanel: This can be true or false to indicate whether the bottom panel is shown or not. The default is false.</li> <li>bottomPanelContent: content to display in the bottom panel which is a JSX object. Nothing is displayed by default.</li> </ul>"},{"location":"02-canvas/#top-panel-parameters","title":"Top panel parameters","text":"<p>The top panel appears below the toolbar and between the palette and the right flyout panel. You can add whatever content you like to this panel. There are two optional parameters to let you manage the top panel. These are:</p> <ul> <li>showTopPanel: This can be true or false to indicate whether the top panel is shown or not. The default is false.</li> <li>topPanelContent: content to display in the top panel which is a JSX object. Nothing is displayed by default.</li> </ul>"},{"location":"02-canvas/#localization","title":"Localization","text":"<p>You can customize <code>&lt;CommonCanvas&gt;</code> using the <code>&lt;IntlProvider&gt;</code> object to display translated test</p>"},{"location":"02-canvas/#creating-nodes-on-the-canvas","title":"Creating nodes on the canvas","text":"<p>Nodes can be created on the canvas by the user in two ways:</p> <ul> <li>By dragging a node from the palette onto the canvas background</li> <li>By dragging a node from outside the canvas</li> </ul> <p>The first technique is provided by Common canvas. The second requires some development work which is documented here: Enabling node creation from external object</p>"},{"location":"02-canvas/#keyboard-support","title":"Keyboard support","text":"<p>Common canvas supports a number of keyboard interactions as follows:</p> Keyboard Shortcut Action Description Ctrl/Cmnd + a selectAll Select All objects delete deleteSelectedObjects Delete currently selected objects Ctrl/Cmnd + x cut Cut selected objects to the clipboard Ctrl/Cmnd + c copy Copy selected objects to the clipboard Ctrl/Cmnd + v paste Paste objects from the clipboard. If the mouse cursor is over the canvas, objects will be pasted at the cursor position or, if not, at a default position Ctrl/Cmnd + z undo Undo last command Ctrl/Cmnd + Shift + z redo Redo last undone command Ctrl/Cmnd + y redo Redo last undone command <p>Your application can disable any or all of these actions by providing the keyboard config object to the CommonCanvas react component.</p> <p>When any of the shortcut keys are pressed the common-canvas object model will be updated and then the editActionHandler callback will be called with the <code>data.editType</code> parameter set to the action above and the <code>data.editSource</code> parameter set to \u201ckeyboard\u201d.</p>"},{"location":"02-canvas/01-components/","title":"Common Canvas Components","text":"<p>Common canvas has several constituent parts that are visible to the user:</p> <ul> <li>Canvas editor - the main area of the UI where the flow is displayed and edited</li> <li>Palette - a set of node templates that can be dragged to the canvas to create new nodes</li> <li>Context menu - a menu of options for nodes, comments, etc</li> <li>Context toolbar - a menu of options for nodes, comments, etc presented as a small toolbar</li> <li>Toolbar - a set of tools across the top of the UI</li> <li>Notification panel - a panel for displaying runtime and other messages to your user</li> <li>Right side flyout - a panel, often used to display node properties</li> <li>Top panel - a panel which can be used to display other app related information</li> <li>Bottom panel - a panel which can be used to display other app related information</li> </ul> <p>and it handles:</p> <ol> <li>the visual display of the flow of operations;</li> <li>any user gestures on the canvas;</li> <li>display of context menus;</li> <li>display and handling of the palette.</li> <li>provision of callbacks to tell your code what operations the user is performing on the canvas</li> <li>and much much more.</li> </ol>"},{"location":"02-canvas/01-components/02-Palette/","title":"Palette","text":""},{"location":"02-canvas/01-components/02-Palette/#introduction","title":"Introduction","text":"<p>By default, common-canvas includes a palette which appears in the left flyout panel. The palette displays a set of node templates split into different categories. The user can drag any of the node templates from the palette onto the canvas to create a new instance of a node on the canvas. The user can then join nodes together by creating link lines.</p>"},{"location":"02-canvas/01-components/02-Palette/#populating-the-palette","title":"Populating the palette","text":"<p>The host application must tell common-canvas what node templates and categories it wants the user to see in the palette. This is done by providing common-canvas with a palette (JavaScript) object by calling the canvas-controller <code>setPipelineFlowPalette(palette)</code> method. The palette object is often read from a JSON document stored in the host application\u2019s repository or it can be automatically generated. </p> <p>The palette object should conform to the palette schema. The host application can ensure that palette conforms to the schema by switching on schema validation in the canvas configuration.</p>"},{"location":"02-canvas/01-components/02-Palette/#auto-join","title":"Auto-join","text":"<p>Instead of dragging node templates from the palette, the user can double click node templates to add, and automatically join, them to the current flow. When a node template is double clicked, common-canvas will look for the node at the end of the current flow of nodes and will add the node to the canvas to the right of the end node in the flow. Common-canvas will also automatically join the nodes together by creating a new link line.</p>"},{"location":"02-canvas/01-components/02-Palette/#palette-configuration","title":"Palette configuration","text":"<p>There are a number of configuration options that control the palette that are specified in the canvas config object:</p> <ul> <li>enablePaletteLayout</li> <li>enableNarrowPalette</li> <li>enableAutoLinkOnlyFromSelNodes</li> <li>Deprecated - paletteInitialState</li> </ul>"},{"location":"02-canvas/01-components/02-Palette/#palette-operation","title":"Palette operation","text":"<p>The palette contents can be manipulated calling these canvas-controller palette methods</p> <p>The palette can be opened and closed using these canvas-controller operational methods</p>"},{"location":"02-canvas/01-components/02-Palette/#search","title":"Search","text":"<p>The user can enter a search string into the Search field at the top of the palette. The behavior is as follows:</p> <ol> <li>When the search field is empty, the palette shows categories which can be expanded to show the node templates within the expanded category.</li> <li>As the user enters characters into the search field, common-canvas immediately searches through the node template labels, node template descriptions and category labels for the characters entered and finds a subset of the node templates that match the search string. Common-canvas then replaces the category-based view of the palette with a list of node templates that match the search criteria. In this view the node templates also include the node description under the node label.</li> <li>The search is case insensitive.</li> <li>The search text is highlighted wherever it appears in the labels, descriptions or category labels. </li> <li>Common-canvas uses a ranking algorithm to order the display of node templates so those most relevant to the search text are positioned at the top of the list. The ranking algorithm puts more weight on those node templates where the search text appears in the label than if the text appears in the description or the category label.</li> <li>If the user enters words into the search field (separated by spaces), common-canvas searches for each word separately. Therefore, if say the user entered \u201cdata import\u201d into the search field, common-canvas would find a node with \u201c<code>Import</code> <code>Data</code>\u201d as the label or even a node with a description that said \u201cThis node does lots of things and also <code>data</code> can be <code>import</code>ed.\u201d  </li> <li>Nodes that have text which have hits on multiple words are ranked more highly than node templates whose text only contains one search word.  </li> <li>Common-canvas uses a debounce function so that, if the user types the search string very quickly, common-canvas does not perform multiple searches for each key press but only runs a full search when rapid typing has ended. </li> </ol>"},{"location":"02-canvas/01-components/02-Palette/#recommendation","title":"Recommendation","text":"<p>According to the schema, node template descriptions are not mandatory in the palette object. However, it is recommended you provide descriptions for each of your node templates. The reason for this is that, the search function searches through node template descriptions, as well as node template labels and category labels. This means you can write your node template descriptions to contain appropriate keywords that a user might search for when looking for a node. </p> <p>For example, if there is a node template called \u2018Import Data\u2019 and that node could import comma-separated files you could add \u2018comma-separated\u2019 and \u2018csv\u2019 into your description for that node template. If the user entered <code>comma</code> in the search field the \u2018Import Data\u2019 node template would be shown in the search results even though <code>comma</code> does not appear in the node template label.</p>"},{"location":"02-canvas/01-components/03-Context-Menu/","title":"Context Menu","text":"<p>A context menu is a small window containing a list of options applicable to an object or set of selected objects.</p> <p>When <code>enableContextToolbar</code> is set to <code>false</code> (or omitted) from the canvas config, and a right-click is performed on a node, link, comment or the canvas background, a traditional context menu is displayed like this:</p> <p></p>"},{"location":"02-canvas/01-components/04-Context-Toolbar/","title":"Context Toolbar","text":"<p>Context toolbars can be enabled in common-canvas as an alternative to traditional context menus.</p> <p>A context toolbar is a small toolbar that appears above nodes, links and comments as the mouse cursor is hovered over them. A context toolbar for the canvas background can also be displayed by right-clicking on the canvas background. </p> <p>The context toolbar displays a set of icons that represent the most likely actions the user would want to perform on the object under the mouse cursor. If necessary, the toolbar can also show an overflow (vertical ellipsis) icon that, when clicked, reveals additional actions that can be performed on the object.</p> <p>For a \u201cvertical\u201d style node the context toolbar looks like this:</p> <p></p> <p>For a \u201chorizontal\u201d style node it looks like this:</p> <p></p> <p>when the user clicks the overflow icon it looks like this:</p> <p></p> <p>Note: Since the mouse cursor can be hovered over a node, comment or link that is NOT currently selected, the actions shown in the context toolbar will apply to just that object, even if there is one or more currently selected objects.  </p> <p>If the mouse cursor is hovered over a selected object when there are other selected objects, the actions in the context toolbar will be applicable to all the selected objects. This is the same as how a traditional content menu shows actions that are applicable to the set of selected objects. </p> <p>The context toolbar behavior can be switched on by setting the <code>enableContextToolbar</code> canvas configuration field to true.</p> <pre><code>    const config = {\n        enableContextToolbar: true\n    };\n\n    ...\n    ...\n    &lt;CommonCanvas config={config} ..... /&gt;\n</code></pre>"},{"location":"02-canvas/01-components/01-editor/","title":"Flow Editor","text":"<p>The Flow Editor displays the flow to the user and allows the user to interact with the flow using the mouse/trackpad and the keyboard and other input devices.</p> <p>The editor displays the following object types which the user can interact with:</p> <ul> <li>Nodes</li> <li>Links</li> <li>Comments</li> <li>The Canvas background</li> </ul> <p>[Still under construction]</p>"},{"location":"02-canvas/01-components/01-editor/01-Nodes/","title":"Nodes","text":""},{"location":"02-canvas/01-components/01-editor/01-Nodes/#introduction","title":"Introduction","text":"<p>Nodes displayed in the flow editor can represent data operations or other types of operations for the type of flow the application displays.</p> <p>Nodes are made up of a number of display elements such as an image, label background shape etc.</p> <p>[Under construction]</p>"},{"location":"02-canvas/01-components/01-editor/02-Links/","title":"Links","text":""},{"location":"02-canvas/01-components/01-editor/02-Links/#introduction","title":"Introduction","text":"<p>Common-canvas is designed to display one link line on the canvas for each link defined in the pipeline flow. There are three types of link supported by common canvas: data links; association links; and comment links. Links can be enhanced by:</p> <ul> <li>Overriding the CSS styles applied to the elements of the link line</li> <li>By specifying decorations for the link</li> </ul>"},{"location":"02-canvas/01-components/01-editor/02-Links/#data-links","title":"Data Links","text":"<p>Data links are designed to model a flow from a source node to a target node. Data links are defined in the pipeline flow to connect a port on the source node to a port on the target node. The host application can choose whether or not to display ports on the nodes. Data links are typically displayed with an arrow head to display the flow along the link from source to target.</p> <p>If a data link is retrieved from the canvas controller API it will have the following important fields:</p> <ul> <li>id - the unique identifier for the link.</li> <li>type - set to \u201cnodeLink\u201d.</li> <li>srcNodeId - the ID of the node the link is connected from.</li> <li>srcNodePortId - the ID of the output port on the source node the link is connected from. Note: If this is undefined it indicates the node is connected to the first output port of the source node.</li> <li>trgNodeId - the ID of the node the link is connected to.</li> <li>trgNodePortId - the ID of the input port on the target node the link is connected to. Note: If this is undefined it indicates the node is connected to the first input port of the target node.</li> <li>decorations - an array of decorations specified for the link.</li> <li>app_data - any application specific data that was previously specified for the link in the pipeline flow or through the canvas controller API.</li> </ul> <p>Note: Typically data links must be drawn between nodes however, if the config field <code>enableLinkSelectionType</code> is set to <code>Detachable</code>, the links are allowed to be drawn to and/or from arbitrary points on the canvas. If a link is drawn either semi-detached (from one node) or fully-detached (from both nodes) the following fields will be in the link object:</p> <ul> <li>srcPos - this is an object with two fields x_pos and y_pos. These provide the coordinates of the point on the canvas that the link is drawn from. If this exist then srcNodeId and srnNodePortId are not specified in the link object.</li> <li>trgPos - this is an object with two fields x_pos and y_pos. These provide the coordinates of the point on the canvas that the link is drawn to. If this exist then srcNodeId and srnNodePortId are not specified in the link object.</li> </ul>"},{"location":"02-canvas/01-components/01-editor/02-Links/#association-links","title":"Association Links","text":"<p>Association links are designed to capture a relationship between two nodes where there is no implied direction. By default these are displayed as a single straight link line in a dashed style. There are no arrow heads by default for that type of link. (Note : internally, association links do have a <code>srcNodeId</code> and <code>trgNodeId</code> but that is just to keep the field names consistent with the data links.) Association links do not reference ports.</p> <p>If an association link is retrieved from the canvas controller API it will have the following important fields:</p> <ul> <li>id - the unique identifier for the link.</li> <li>type - set to \u201cassociationLink\u201d.</li> <li>srcNodeId - the ID of one of the nodes in the association.</li> <li>trgNodeId - the ID of the other node in the association.</li> <li>decorations - an array of decorations specified for the link.</li> <li>app_data - any application specific data that was previously specified for the link in the pipeline flow or through the canvas controller API.</li> </ul>"},{"location":"02-canvas/01-components/01-editor/02-Links/#comment-links","title":"Comment Links","text":"<p>Comment links connect a comment to one or more nodes. They can be created by the user by: (a) pulling out the small handle/circle that appears below a comment and dropping it on a node. (2) by selecting nodes before the comment is selected and then creating the comment. This will automatically create a comment link from the selected nodes to the newly created comment.</p> <p>If a comment link is retrieved from the canvas controller API it will have the following important fields:</p> <ul> <li>id - the unique identifier for the link</li> <li>type - set to \u201ccommentLink\u201d</li> <li>srcNodeId - the ID of comment.</li> <li>trgNodeId - the ID of the node the comment is connected to.</li> <li>app_data - any application specific data that was previously specified for the link in the pipeline flow or through the canvas controller API.</li> </ul>"},{"location":"02-canvas/01-components/01-editor/02-Links/#display-of-links","title":"Display of links","text":"<p>Links are drawn on the canvas using SVG elements in the DOM. Each link has a top level group <code>&lt;g&gt;</code> element and inside it some SVG paths. The first displayed path is the selection area. This is invisible but provides a selection/hover area for mouse interactions on the link. The second is a path to represent the link itself which is drawn over the top of the selection area path:</p> Purpose DOM tag Classes Notes Group g d3-link group Classes specified for the link in the class_name field of the link object will be added here. \u2b95 Selection area path d3-link-selection-area \u2b95 Link line path d3-link-line \u2b95 Arrow head path d3-link-line-arrow-head Only when enableLinkType is set to \u201cStraight\u201d \u2b95 Decorations g d3-link-decorations-group Will contain decoration elements, for example, image, path etc <p>Note: The main link group will also have one of these classes: d3-node-link (for data links), d3-object-link (for association links) or d3-comment-link (for comment links).</p>"},{"location":"02-canvas/01-components/01-editor/03-Comments/","title":"Comments","text":""},{"location":"02-canvas/01-components/01-editor/03-Comments/#introduction","title":"Introduction","text":"<p>[Under construction]</p>"},{"location":"02-canvas/02-configs/","title":"Configuraiton","text":"<p>There are 5 configuraiton objects that can be passed as props to the <code>&lt;CommonCanvas&gt;</code> react obect:</p> <ul> <li> <p>Canvas Config</p> <ul> <li>This is the main canvas configutation an allow customization of many aspects of the flow editor, visual layout, palette and tooltips</li> </ul> </li> <li> <p>Toolbar Config</p> <ul> <li>Allows customizaiton of the toolbar including the addition of application specific \u2018tools\u2019.</li> </ul> </li> <li> <p>Notification Config</p> <ul> <li>Allows customization of the notificaiton panel displayed by clicing the notification icon on the toolbar</li> </ul> </li> <li> <p>Context Menu Config</p> <ul> <li>Allows some minor customization of the what options the context menus/toolbars display.</li> </ul> </li> <li> <p>Keyboard Config</p> <ul> <li>Allows customizaiton of the shortcut keys supported by the flow editor</li> </ul> </li> </ul>"},{"location":"02-canvas/02-configs/01-canvas-config/","title":"Canvas Config object","text":"<p>The canvas config object is optional. If it is not provided, or any of the properties within it are not provided, common-canvas will use reasonable defaults. Here\u2019s an example of a canvas config object: <pre><code>    const commonCanvasConfig = {\n       \"enableNodeFormatType\": \"Vertical\",\n       \"enableLinkType\": \"Straight\"\n       }\n    };\n</code></pre> and this is how it is specified to common-canvas: <pre><code>    render() {\n        return (\n            &lt;CommonCanvas\n                canvasController={this.canvasController}\n                config={commonCanvasConfig}\n            /&gt;\n        );\n    }\n</code></pre></p>"},{"location":"02-canvas/02-configs/01-canvas-config/#canvas-config-fields","title":"Canvas Config fields","text":""},{"location":"02-canvas/02-configs/01-canvas-config/#enableinteractiontype","title":"enableInteractionType","text":"<p>This can be \u201cMouse\u201d, \u201cCarbon\u201d or \u201cTrackpad\u201d. The default is \u201cMouse\u201d. \u201cTrackpad\u201d has been deprecated and will be removed in the future.</p> <ul> <li> <p>With this set to \u201cMouse\u201d the following interaction is enabled:</p> <ul> <li>Zoom canvas = Rotate mouse wheel. (Can be simulated with a trackpad with two finger up and down scroll)</li> <li>Pan canvas = Left mouse key down on canvas background + drag. (Can be simulated with a trackpad with press down on trackpad and drag.)</li> <li>Region select on canvas = Shift key + left mouse key down on canvas background + drag. (Can be simulated with a trackpad with Shift + finger down on trackpad + drag across canvas background)</li> </ul> </li> <li> <p>With this set to \u201cCarbon\u201d the following interaction is enabled:</p> <ul> <li>Zoom canvas = Rotate mouse wheel. (Can be simulated with a trackpad with two finger up and down scroll)</li> <li>Pan canvas = Press and hold space bar then left mouse key down on canvas background + drag. (Can be simulated with a trackpad by press and hold space bar then press down on trackpad and drag.)</li> <li>Region select on canvas = Left mouse key down on canvas background + drag. (Can be simulated with a trackpad with press down on trackpad and drag.)</li> </ul> </li> <li> <p>This setting is now deprecated With this set to \u201cTrackpad\u201d the following interactions are enabled:</p> <ul> <li>Zoom canvas = Two finger pinch or two finger spread gesture. (Can be simulated with a mouse as follows: Ctrl + rotate mouse wheel.)</li> <li>Pan canvas = Two finger horizontal or vertical scroll gesture. (Can be simulated with a mouse as follows: Vertical pan is rotate mouse wheel; Horizontal pan is Shift + rotate mouse wheel)</li> <li>Region select on canvas = Finger down + drag. (Can be simulated with a mouse as follows: Left button down + drag on canvas background)</li> </ul> </li> </ul>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablenodeformattype","title":"enableNodeFormatType","text":"<p>This can be \u201cHorizontal\u201d or \u201cVertical\u201d. \u201cHorizontal\u201d is the default. \u201cHorizontal\u201d will display a node with an image and the label to the right of the image. \u201cVertical\u201d will display the node with the label underneath the image.See the section called Customizing Node Layout Properties for details on what this will do.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablelinktype","title":"enableLinkType","text":"<p>This can be \u201cCurve\u201d, \u201cElbow\u201d, or \u201cStraight\u201d. \u201cCurve\u201d is the default. This will set the link style used to connect nodes.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablelinkdirection","title":"enableLinkDirection","text":"<p>This can be \u201cLeftRight\u201d, \u201cTopBottom\u201d, or \u201cBottomTop\u201d. \u201cLeftRight\u201d is the default. This will set the input and output port positions on nodes to facilitate links being drawn in the direction specified.</p> <ul> <li>For \u201cLeftRight\u201d output ports will be on the right and input ports will be on the left of the nodes</li> <li>For \u201cTopBottom\u201d output ports will be on the bottom and input ports will be on the top of the nodes</li> <li>For \u201cBottomTop\u201d output ports will be on the top and input ports will be on the bottom of the nodes</li> </ul>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablelinkselection","title":"enableLinkSelection","text":"<p>This can be: \u201cNone\u201d, \u201cLinkOnly\u201d, \u201cHandles\u201d or \u201cDetachable\u201d. The default is \u201cNone\u201d. These have the following affect on the canvas:</p> <ul> <li>\u201cNone\u201d - no selection of links is possible however user can right click on a link to get a context menu.</li> <li>\u201cLinkOnly\u201d - a link may be selected and added to the set of currently selected objects (nodes and/or comments).</li> <li>\u201cHandles\u201d - This includes the \u201cLinkOnly\u201d function. In addition, when a link is selected a handle (either a circle or an image) is displayed at the start and end of the link. The link handle can be dragged to a new node/port position to rewire the flow.</li> <li> <p>\u201cDetachable\u201d - This includes the \u201cLinkOnly\u201d and \u201cHandles\u201d function. In addition, this option enables detachable links for the canvas. This means a link can exist either:</p> <ul> <li>between a source node and an arbitrary point on the canvas (semi-detached) OR</li> <li>between an arbitrary point on the canvas and a target node (semi-detached) OR</li> <li>between two arbitrary points on the canvas (detached)</li> </ul> <p>Additionally, \u201cDetachable\u201d mode, allows:</p> <ul> <li>semi-detached or fully-detached links to be stored in and retrieved from the pipeline flow document.</li> <li>semi-detached or fully-detached links to be manipulated with link handles. The link handles can be used to drag the end of the link away from its connecting source or target nodes and onto the canvas. Or semi-detached or fully detached links can be reattached to nodes/ports.</li> <li>a new detached link to be created by drawing out a new link from a node and dropping it onto the canvas.</li> <li>palette and canvas nodes, when they are dragged, to be dropped onto the ends of detached links to automatically attach them to the node being dragged.</li> </ul> </li> </ul>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablelinkreplaceonnewconnection","title":"enableLinkReplaceOnNewConnection","text":"<p>This can be true or false. The default is false. If set to true, the user can drag a new connection to a target node, and if the input port on the target node has a maximum cardinality of one AND there is currently a connection to that port, the existing connection will be removed and the new connection is created; essentially this gesture replaces the existing link with the new one. If set to false the new connection will not be completed and the existing link will remain in place.</p> <p>When set to true and a link is replaced, common-canvas will call the <code>beforeEditActionHandler</code> the <code>editActionHandler</code> callback functions, if either are provided by the host application, with a <code>data</code> object parameter with the <code>editType</code> field set to <code>\"linkNodesAndReplace\"</code>.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableparentclass","title":"enableParentClass","text":"<p>This is a string which is a class name. The default is empty string. If a class name is provided it is applied to the top-most DOM element for common-canvas. This can be used to make you CSS override rules more specific which means they will be used in preference to any default styles. For example, if you specify \u201cmy-app-styles\u201d for this field then CSS like this: <pre><code>    .my-app-styles .d3-node-body-outline {\n        fill: orange;\n    }\n</code></pre> will override the style from the common-canvas CSS <pre><code>    .d3-node-body-outline {\n        fill: white;\n    }\n</code></pre></p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableimagedisplay","title":"enableImageDisplay","text":"<p>This can be set to: \u201cSVGInline\u201d, \u201cLoadSVGToDefs\u201d or \u201cSVGAsImage\u201d. The default is \u201cSVGInline\u201d. This field controls the display of SVG image files (that is, files with a <code>.svg</code> extension) on the canvas, such as those displayed for node icons or decoration images. This option can be useful to improve performance when images are repeated a large number of times on the canvas and particularly when the browser cache is disabled. Note: this does not affect the display behavior of non-SVG files which are always displayed inside an <code>&lt;image&gt;</code> tag. The behavior for SVG image files is as follows:</p> <ul> <li>\u201cSVGInline\u201d - This is the default. With this setting, the image file is read in \u2013 from the server or cache (if available) \u2013 and the SVG tags within the file displayed in-line in the DOM. This means elements within the SVG can be customized using CSS on a node-by-node basis.</li> <li>\u201cLoadSVGToDefs\u201d - With this option, each unique SVG file is read from the server (or cache) and written into a <code>&lt;symbol&gt;</code> element within the <code>&lt;defs&gt;</code> element of the canvas SVG area. A <code>&lt;use&gt;</code> element is then written to the place in the DOM for each place where the image should be displayed. Using this option means the SVG file for each image is only read once which should improve performance if images are repeated a lot on the canvas. However, it does limit the customization possibilities for the images on a node-by-node basis. Customization colors can be passed into the images using CSS inheritance, or the <code>currentColor</code> keyword, provided there are no internal classes applied to the elements in the SVG.</li> <li>\u201cSVGAsImage\u201d - This option causes the SVG file to be displayed within an <code>&lt;image&gt;</code> element in the DOM. The file loading is handled internally by the browser. Again, with this option customization capabilities on a node-by-node basis are limited. Customization colors can be passed into the images using CSS inheritance, or the <code>currentColor</code> keyword, provided there are no internal classes applied to the elements in the SVG.</li> </ul>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableinternalobjectmodel","title":"enableInternalObjectModel","text":"<p>This is a boolean. The default is <code>true</code>. You should use <code>true</code> for this all the time. If you set this to <code>false</code> your code will be responsible for handling the object model, which is NOT recommended. When <code>false</code>, changes are not set into the object model, and consumers are expected to listen to events and update the internal object model themselves (again, not recommended).</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablepalettelayout","title":"enablePaletteLayout","text":"<p>This can be: \u201cModal\u201d or \u201cFlyout\u201d or \u201cNone\u201d. The default is \u201cFlyout\u201d. \u201cFlyout\u201d displays a panel on the left side of the canvas containing the palette icons and \u201cModal\u201d shows the palette icons in a dialog window. \u201cNone\u201d stops the palette from appearing.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enabletoolbarlayout","title":"enableToolbarLayout","text":"<p>This can be: \u201cTop\u201d or \u201cNone\u201d. The default is \u201cTop\u201d. \u201cTop\u201d displays a toolbar at the top of the canvas area. See the toolbar configuration object docs for details on how to customize the toolbar. \u201cNone\u201d stops the toolbar from appearing.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableresizablenodes","title":"enableResizableNodes","text":"<p>This can be true or false. The default is false. If set to true, the user can resize nodes by dragging the edges of the node to increase or decrease the width and/or height of the node. When hovering the mouse cursor over the edge of the node the user will see a sizing cursor to indicate the resize function is available. This option works best when the node has a background rectangle that shows the extent of the sizing area.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableinsertnodedroppedonlink","title":"enableInsertNodeDroppedOnLink","text":"<p>This can be true or false. The default is false. If set to true, the user can drag nodes from the palette or from the canvas and drop them onto existing links in the flow. This causes the dropped node to be inserted between the two nodes joined by the link, meaning new links are created that join the new node to the previously joined nodes and the old link is removed. When the user performs the drop common-canvas will call the editActionHandler with one of two possible commands:</p> <ul> <li>\u201ccreateNodeOnLink\u201d - when a node is being dragged from the palette leading to node creation &amp; insertion</li> <li>\u201cinsertNodeIntoLink\u201d - when an existing node is dragged from the canvas leading to insertion of the existing node into the link</li> </ul>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablerightflyoutundertoolbar","title":"enableRightFlyoutUnderToolbar","text":"<p>This can be true or false. The default is false. If set to true the right flyout panel, when opened, will appear below the toolbar and will not cause the toolbar to compress. The default behavior is that the right flyout panel, when opened, will appear at the side of the toolbar and will compress the space available for the toolbar to be displayed. Warning: the notifications panel which is tied to the notifications icon in the toolbar will appear over the top of the right-side flyout with this option set to true.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablepositionnodeonrightflyoutopen","title":"enablePositionNodeOnRightFlyoutOpen","text":"<p>This can be a boolean or an object. The default is false. If set to true, when the right-side flyout is open the currently selected node (assuming there is one) will be automatically positioned in the center of the viewport (canvas area). Instead of true this field can also be set to a simple JavaScript object like this <code>{ x: 30, y: 40 }</code> where x and y indicate the position where the node will be positioned as a percentage of the width and height of the viewport respectively.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablehighlightnodeonnewlinkdrag","title":"enableHighlightNodeOnNewLinkDrag","text":"<p>This can be true or false. The default is false. If set to true common-canvas will add the \u201cdata-new-link-over\u201d attribute to the node\u2019s group <code>&lt;g&gt;</code> element, when the end of a new link is dragged to be close to and over a target node. This allows applications to alter the appearance of the target node as a new link is dragged towards it.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablehighlightunavailablenodes","title":"enableHighlightUnavailableNodes","text":"<p>This can be true or false. The default is false. If set to true, when the user begins to drag a new link line, common-canvas will add a new class called <code>d3-node-unavailable</code> to all nodes which cannot accept the link as input. The class will be applied to each node\u2019s group <code>&lt;g&gt;</code> element in the DOM. This class can be used for styling the unavailable nodes as desired using CSS. The default styling will \u2018gray out\u2019 the node label, node outline rectangle (if there is one) and the node icon (provided it is an SVG image). These styles can be overridden in the applications CSS if different styling is needed. This behavior also applies if the end of a partially or fully detached link is dragged.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableraisenodestotoponhover","title":"enableRaiseNodesToTopOnHover","text":"<p>This can be true or false. The default is true. If set to false the nodes will be left in their original place in the DOM. If set to true, when the user moves the mouse cursor over a node, that node will be moved in the DOM so that the node appears on top of all other nodes. This is only really noticeable if nodes, or parts of nodes, overlap other nodes. It can be useful if your nodes have protruding ports or decorations and your users sometimes position nodes very close to one another. Note: the \u2018true\u2019 setting can adversely affect the behavior of scroll areas in a node that are displayed using a React object (using the <code>nodeExternalObject</code> node layout option) because when the node is moved in the DOM the scroll area gets reset to its initial position. Set this to false if you are displaying nodes using React objects.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableautolinkonlyfromselnodes","title":"enableAutoLinkOnlyFromSelNodes","text":"<p>This can be true or false. The default is false. When set to true the auto-add function (where double clicking a node in the palette automatically adds it to the canvas) will only link up nodes when a node is already selected on the canvas and then, only if the selected node can be linked to the node that was double clicked. If false, the auto-add function will make a best guess at which node the double-clicked node should be added to.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablemovenodesonsupernoderesize","title":"enableMoveNodesOnSupernodeResize","text":"<p>This can be true or false. The default is true. If true, nodes surrounding a supernode will be moved when the supernode is expanded or manually resized so that the supernode does not overlay them. When set to false, the nodes surrounding a supernode will stay in their current positions when the supernode is expanded or manually resized. This may result in the nodes being overlaid by the supernode.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableexternalpipelineflows","title":"enableExternalPipelineFlows","text":"<p>This can be true or false. The default is false. If true, the context menu will include a <code>Create External Supernode</code> option when a set of objects are selected from which a supernode can be created.</p> <p>Waring: The host application must implement some of the common-canvas callbacks for external pipeline flow support to work correctly. See the Wiki section on external pipeline flow support for more details.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enabledisplayfulllabelonhover","title":"enableDisplayFullLabelOnHover","text":"<p>This can be true or false. The default is false. If set to true, any abbreviated node label will be displayed in full when the pointer hovers over the label. If set to false, abbreviated node labels will remain the same when the pointer hovers over them.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablesingleoutputportdisplay","title":"enableSingleOutputPortDisplay","text":"<p>This can be true or false. The default is false. If set to true, only the last of the ports from the array of output ports will be displayed for each node. This config property is only applicable to applications with very specialized styling and handling of ports. If set to true with regular applications, it may result in a confusing display to the user. The single port is displayed at a position specified by outputPortRightPosX and outputPortRightPosY layout properties. For exmaple: <pre><code>config = {\n    enableSingleOutputPortDisplay: true,\n    enableNodeLayout: {\n      outputPortRightPosX: 0,\n      outputPortRightPosY: 20\n};\n</code></pre></p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enabledragwithoutselect","title":"enableDragWithoutSelect","text":"<p>This can be either true or false. The default is false. If set to true, the user can drag and drop a single node or a single comment without that gesture removing selection on any other nodes or comments. If the node being dragged was selected prior to the drag gesture then it and any other objects that are currently selected will be moved. With this parameter set to false (or missing) a drag and drop gesture will select the node or comment being dragged and will deselect any currently selected objects.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablemarkdownincomments","title":"enableMarkdownInComments","text":"<p>This can be true or false. The default is false. When set to true the user may enter markdown syntax into comments on the canvas when in edit mode for the comment. When the editing ends, the comment is shown in presentation mode and the markdown syntax is converted to HTML which is displayed in the comment and is styled by CSS.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablestatetag","title":"enableStateTag","text":"<p>This can be either \u201cNone\u201d, \u201cLocked\u201d or \u201cReadOnly\u201d. The default is \u201cNone\u201d. When set to either \u201cLocked\u201d or \u201cReadOnly\u201d, a \u2018state tag\u2019 object will be shown permanently over the top of the canvas. The state tag will be positioned in the center and towards the top of the canvas. The state tag consists of a black background rectangle with rounded corners overlaid with an icon and a text label. A tooltip is displayed when the mouse pointer is hovered over the state tag. The icon, label and default tooltip will be set appropriately based on the value (\u201cLocked\u201d or \u201cReadOnly\u201d) for this setting. The host application can override the tooltip by implementing the tipHandler callback.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableeditingactions","title":"enableEditingActions","text":"<p>This can be true or false. The default is true. If set to false, various editing actions on the canvas will be prevented, as follows:</p> <ol> <li> <p>Nodes cannot be created on the canvas using any of the following:</p> <p>(a) dragging and dropping a node template from the palette onto the canvas or</p> <p>(b) dragging and dropping an object onto the canvas from outside the canvas area, such as a file being dragged from the computer desktop onto the canvas (see note below), or</p> <p>(c) double clicking a node in the palette to create a node</p> <p>Note: It is not possible for common-canvas to prevent an object being dragged from the computer desktop to the canvas so it is recommended the drop zone (which provides visual feedback about the drop) should be switched off by setting the enableDropZoneOnExternalDrag config field to <code>false</code>.</p> </li> <li> <p>Nodes and comments cannot be dragged and moved.</p> </li> <li>The end points of Links, when enableLinkSelection is set to <code>\"Detachable\"</code> or <code>\"Handles\"</code>, cannot be dragged and moved.</li> <li>Links from nodes and comments cannot be created by dragging from the port object on the source node or comment to the target node.</li> <li>Comments, node labels and text decorations cannot be edited, neither by clicking the edit icon (which does not appear) nor by double clicking the text.</li> <li> <p>Context menu options that alter the canvas objects will be removed from the context menu before it is displayed by common-canvas. The options that will be removed are:</p> Option Text Action Identifier New Comment createComment Disconnect disconnectNode Edit-&gt;Cut cut Edit-&gt;Copy copy Edit-Paste paste Undo undo Redo redo Delete deleteSelectedObjects Create supernode createSuperNode Create external supernode createSuperNodeExternal Deconstruct supernode deconstructSuperNode Collapse supernode collapseSuperNodeInPlace Expand supernode expandSuperNodeInPlace Convert external to local convertSuperNodeExternalToLocal Convert local to external convertSupernodeLocalToExternal Delete deleteLink Save to palette saveToPalette <p>If your application adds its own editing actions to the context menu your code must remove them if they are not needed in some situations (e.g. you are displaying a read-only canvas).</p> </li> <li> <p>Any default toolbar actions (tools) that alter the canvas objects will be disabled regardless of their specified enablement status. These actions are:</p> Default Tooltip Action Undo undo Redo redo Cut cut Copy copy Paste paste Delete deleteSelectedObjects New comment createAutoComment Arrange Horizontally arrangeHorizontally Arrange Vertically arrangeVertically </li> <li> <p>Keyboard shortcuts that alter the canvas will not work. These are:</p> Shortcut Action delete delete Ctrl/Cmd + x cut Ctrl/Cmd + c copy Ctrl/Cmd + v paste Ctrl/Cmd + z undo Ctrl/Cmd + Shift + z redo Ctrl/Cmd + y redo </li> <li> <p>The browser\u2019s Edit menu options (cut, copy, paste) will not work with the canvas objects regardless of the setting for enableBrowserEditMenu.</p> </li> </ol>"},{"location":"02-canvas/02-configs/01-canvas-config/#enabledropzoneonexternaldrag","title":"enableDropZoneOnExternalDrag","text":"<p>This can be true or false. The default is false. If set to true a graphic overlay will be displayed over the canvas when a data object icon is dragged from the desktop over the canvas. The default graphic overlay will be an image and a  message saying: \u201cDrop to add to canvas and project\u201d unless the <code>dropZoneCanvasContent</code> configuration parameter is provided.</p> <p>See the Dragging an object from the desktop section of the Wiki for details on how to handle the drop of an external object onto the canvas.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablenodelayout","title":"enableNodeLayout","text":"<p>This is a simple Javascript object, the properties of which override the default node layout properties. For more details see: Customizing Node Layout Properties</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablesavezoom","title":"enableSaveZoom","text":"<p>This can be: \u201cNone\u201d, \u201cLocalStorage\u201d or \u201cPipelineflow\u201d. The default is \u201cNone\u201d.</p> <ul> <li>\u201cNone\u201d - When the canvas is zoomed, the zoom (scale and x/y pan) are not saved anywhere so if the canvas is closed and reopened it reopens with the default zoom which is a scale of 1 and x/y pan values of 0.</li> <li>\u201cLocalStorage\u201d - The zoom for the canvas is stored in the browser\u2019s local storage and will be reapplied to the canvas each time that canvas is shown in that browser. This applies to sub-flows, when the user displays them full-screen, as well as the primary flow. Sub-flows and the primary flow each have their own zoom amounts stored in local storage. Note: Zoom amounts stored in local storage can be cleared from storage by calling the <code>canvasController.clearSavedZoomValues()</code> API method.</li> <li>\u201cPipelineflow\u201d - The zoom is serialized into the pipeline flow document and when a pipeline flow document is provided to common canvas through the API the zoom will be applied to the canvas display. Zoom amounts can be stored for both primary and sub pipelines. (See the pipelineFlow schema specification).</li> </ul>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablepanintoviewonopen","title":"enablePanIntoViewOnOpen","text":"<p>This can be either true or false. The default is false. If set to true, the canvas will be panned so as much of the canvas area (the area containing the nodes and comments) is visible in the viewport as possible. This will only happen when enableSaveZoom === \u201cNone\u201d or if there is no saved zoom available either in local storage (when enableSaveZoom === \u201cLocalStorage\u201d) or in the pipelineFlow (when enableSaveZoom === \u201cPipelineflow\u201d).</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablezoomintosubflows","title":"enableZoomIntoSubFlows","text":"<p>This is a boolean. The default is false. When set to true, common-canvas will override the maximum zoom extent value which, by default is used for the entire canvas, to allow the user to zoom in on in-place sub-flows further than they can do on containing flows. This means the user can zoom in on multi-nested sub-flows so they are easier to view. To see this effect, the user must position the mouse pointer over the sub-flow before performing the zoom gesture.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablecontexttoolbar","title":"enableContextToolbar","text":"<p>This is a boolean. The default is false. When set to true, common-canvas will display a context toolbar instead of a context menu for performing actions on canvas objects. A context toolbar is a small toolbar that appears above nodes, links and comments as the mouse cursor is hovered over them. The toolbar shows icons for actions the user is most likely to want to perform on the object. An overflow icon is displayed which, when clicked, shows a menu of additional actions. A context toolbar for the canvas background can also be displayed by right-clicking on the background. Common-canvas will display default context toolbars for nodes, links comments and the canvas background however the default actions can be customized by implementing the <code>contextMenuHanlder</code> callback.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablesnaptogridtype","title":"enableSnapToGridType","text":"<p>This can be: \u201cNone\u201d, \u201cDuring\u201d or \u201cAfter\u201d. The default is \u201cNone\u201d.</p> <ul> <li>\u201cNone\u201d - there is no snap to grid and objects can be moved to any position on the canvas.</li> <li>\u201cDuring\u201d - when nodes or comments are moved or sized, the objects snap to an imaginary grid while the objects are being dragged or sized. This gives a somewhat jerky effect as the move or size is happening but has the advantage of telling the user exactly where the object will be when they release the mouse button to end the action.</li> <li>\u201cAfter\u201d - nodes or comments snap to a grid when the drag or size event ends. This gives a smooth dragging and sizing effect but the user does not see the final position until they release the mouse button at the end of the action. By default the canvas uses reasonable values for the grid increments.</li> </ul>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablesnaptogridx","title":"enableSnapToGridX","text":"<p>This optional value overrides the default horizontal increment of the snap-to-grid grid. It can be either a numeric value which is a number of pixels or it can be a numeric value followed by a % sign (e.g. \u201c25%\u201d) which indicates the grid will be a percentage of the default node width. Its default is dependent on whatever is set for enableNodeFormatType. That is for \u201cHorizontal\u201d it will be \u201c20%\u201d and for \u201cVertical\u201d it will be \u201c25%\u201d.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablesnaptogridy","title":"enableSnapToGridY","text":"<p>This optional value overrides the default vertical increment of the snap-to-grid grid. It can be either a numeric value which is a number of pixels or it can be a numeric value followed by a % sign (e.g. \u201c25%\u201d) which indicates the grid will be a percentage of the default node height. Its default is dependent on whatever is set for enableNodeFormatType. That is for \u201cHorizontal\u201d it will be \u201c33.33%\u201d and for \u201cVertical\u201d it will be \u201c20%\u201d.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableautolayoutverticalspacing","title":"enableAutoLayoutVerticalSpacing","text":"<p>This is the spacing in pixels which is used to separate nodes vertically when either the vertical or horizontal auto layout action is used.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableautolayouthorizontalspacing","title":"enableAutoLayoutHorizontalSpacing","text":"<p>This is the spacing in pixels which is used to separate nodes horizontally when either the vertical or horizontal auto layout action is used. For horizontal auto layout, common-canvas may override this value if it decides that more space is needed to prevent connecting lines from doubling back on themselves.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableassoclinkcreation","title":"enableAssocLinkCreation","text":"<p>This is a Boolean. The default is <code>false</code>. If set to <code>true</code> it changes the nature of links that are created between nodes as follows:</p> <ul> <li>The user is able to pull out a link from either port on the node and drag it to another node</li> <li>When a link is completed an <code>association</code> link is created rather than the regular data flow link that is created when this field is set to <code>true</code>. Association links describe an association between pairs of nodes and do not indicate any kind of data flow between those nodes.</li> </ul>"},{"location":"02-canvas/02-configs/01-canvas-config/#enableassoclinktype","title":"enableAssocLinkType","text":"<p>This can be \u201cStraight\u201d or \u201cRightSideCurve\u201d. The default it \u201cStraight\u201d. This field changes the way association links are drawn on the canvas.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablebrowsereditmenu","title":"enableBrowserEditMenu","text":"<p>This can be true or false.  true is the default.  If true, the Cut/Copy/Paste items in the Browser\u2019s <code>Edit</code> menu, including keyboard input for those actions, can be used for performing those actions on objects (e.g. Nodes) in the canvas. When false, those items in the Browser\u2019s edit menu, including keyboard input for those actions, will not work for objects in the canvas. This will not prevent those actions working in the canvas when, say, invoked with the toolbar or canvas context menus, but this property can be used if the keyboard input for those actions into the canvas is disabled for common-canvas using the keyboard config object.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#enablenarrowpalette","title":"enableNarrowPalette","text":"<p>This can be true or false.  true is the default.  If true when the palette is closed the narrow palette will be shown.  When false the palette completely closes.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#paletteinitialstate","title":"paletteInitialState","text":"<p>Deprecated \u2013 This option is deprecated and will be removed soon.  Use <code>CanvasController.openPalette()</code> to display an opened palette at start-up. This <code>openPalette()</code> can be called immediately after creating the canvas controller.</p> <p>paletteInitialState can be true or false. false is the default. If set to true the palette will be opened when common canvas first appears to its full (non-narrow) state.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#emptycanvascontent","title":"emptyCanvasContent","text":"<p>This is a JSX or HTML snippet that contains some text or any elements (such as an image) that you want to display when the canvas is empty, that is, when it doesn\u2019t have any nodes or comments. The default behavior if this config parameter is not provided is that common canvas will display an image and message saying: \u201cYour flow is empty!\u201d.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#dropzonecanvascontent","title":"dropZoneCanvasContent","text":"<p>This is a JSX or HTML snippet that contains some text or any elements (such as an image) that you want to display when a data object is dragged from the desktop over the canvas. The default behavior if this config parameter is not provided is that common canvas will display an image and a  message saying: \u201cDrop to add to canvas and project\u201d. The content will not be displayed unless the <code>enableDropZoneOnExternalDrag</code> configuration parameter (see above) is set to true.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#schemavalidation","title":"schemaValidation","text":"<p>This can be true or false. false is the default. It tells common canvas whether you want pipleineFlow and palette objects to be validated against the schema files when they are submitted to the canvas controller, using the <code>setPipelineFlow(pFlow)</code> or <code>setPipelineFlowPalette(palette)</code> methods. If any validation errors are found messages are displayed in the browser console. It is recommended this option be set to true during development and testing but switched off in production since schema validation can be somewhat slow for large objects.</p>"},{"location":"02-canvas/02-configs/01-canvas-config/#tipconfig","title":"tipConfig","text":"<p>This is a simple JavaScript object that configures whether tips for palette items, nodes, ports, links, decorations or the state tag are enabled (value set to true) or disabled (value set to false). By default, all tips are enabled. The following would switch off tips for ports and links. <pre><code>       \"tipConfig\": {\n           \"palette\": true,\n           \"nodes\": true,\n           \"ports\": false,\n           \"links\": false,\n           \"decorations\": true,\n           \"stateTag\": true\n       }\n</code></pre> The tips displayed by the palette can be further refined. For example, this would prevent tips for palette categories from being displayed, but would still display tips for node templates in the categories: <pre><code>       \"tipConfig\": {\n           \"palette\": {\n              \"categories\": false,\n              \"nodeTemplates\": true\n           },\n           \"nodes\": true,\n           \"ports\": false,\n           \"links\": false,\n           \"decorations\": true,\n           \"stateTag\": true\n       }\n</code></pre></p> <p>Note: The default content of tips can be overwritten by implementing the tipHandler callback.</p>"},{"location":"02-canvas/02-configs/02-toolbar-config/","title":"Toolbar Config object","text":"<p>The toolbar config object is optional. If it is not provided common-canvas will display a reasonable default toolbar. If provided, it configures which action items (tools) and dividers are shown in the canvas toolbar. A toolbar will only be displayed for common-canvas if the canvas configuration field <code>enableToolbarLayout</code> is set to \u201cTop\u201d (which is the default).</p> <p>If you do specify a toolbar config object, you can specify actions for the left and right side of the toolbar to override the default toolbar. You can also optionally tell the toolbar not to handle the enable/disable state for the standard toolbar buttons using <code>overrideAutoEnableDisable</code>. The <code>leftBar</code> and <code>rightBar</code> fields contain an array of objects: one element for each toolbar item. Here is an example, toolbar configuration object:</p> <p><pre><code>    const toolbarConfig = {\n        leftBar: [\n            { action: \"undo\", label: \"Undo\", enable: true },\n            { action: \"redo\", label: \"Redo\", enable: true },\n            { divider: true },\n            { action: \"cut\", label: \"Cut\", enable: false },\n            { action: \"copy\", label: \"Copy\", enable: false },\n            { action: \"paste\", label: \"Paste\", enable: false },\n            { divider: true },\n            { action: \"createAutoComment\", label: \"Add Comment\", enable: true },\n            { action: \"deleteSelectedObjects\", label: \"Delete\", enable: true },\n            { action: \"arrangeHorizontally\", label: \"Arrange Horizontally\", enable: true }\n            { divider: true },\n            { action: \"insaneMode\", label: \"Switch on insane mode\", enable: true, isSelected: true }\n        ],\n        rightBar: [\n            { action: \"stop\", label: \"Stop Execution\", enable: false },\n            { divider: true },\n            { action: \"run\", label: \"Run Pipeline\", enable: false }\n        ],\n        overrideAutoEnableDisable: false\n    };\n</code></pre> Where:</p> <ul> <li> <p>leftBar - an array of action items to specify what is displayed on the left side of the toolbar.</p> </li> <li> <p>rightBar - an array of action items to specify what is displayed on the right side of the toolbar. If this is omitted, common-canvas will automatically populate the right side of the toolbar with zoom-in, zoom-out, and zoom-to-fit actions. To suppress these right side actions, specify the <code>rightBar</code> field as an empty array or an array containing the actions you want on the right.</p> </li> <li> <p>overrideAutoEnableDisable - a boolean. The default is false. By default common-canvas has an auto-enablement feature that controls the enablement of common tools in the toolbar based on user actions (e.g enable the <code>Delete</code> icon when items are selected). If <code>overrideAutoEnableDisable</code> set to true it will switch off the auto-enablement feature. This is useful if the host application wants to disable all the nodes under certain circumstances. If set to true, the <code>enable</code> property in the action items for each tool is used to decide whether to display the icon as enabled or disabled. If set to false or omitted, common-canvas will handle the auto-enablement of common actions. (See the <code>action</code>section below for more details.)</p> </li> </ul> <p>Two toolbar items are automatically added to the toolbar:</p> <ul> <li>A palette action which is used for opening and closing the node palette. This is added to the left side of the left side of the toolbar if the <code>enablePaletteLayout</code> field is set to either \u201cFlyout\u201d (the default) or \u201cModal\u201d in the canvas configuration.</li> <li>A notification panel action which is used to open and close the notifications panel. This will be added to the right side of the toolbar if a notification configuration object is specified to the <code>&lt;CommonCanvas&gt;</code> react object.</li> </ul> <p>The toolbar will display the objects in the same order they are defined in the arrays.</p> <p>Here is an example of an action object which must contain a unique <code>action</code> field as a minimum. <pre><code>    {\n        action: \"run\",\n        label: \"Run\",\n        enable: true,\n        iconEnabled: \"/image/myOwnEnabledIcon.svg\",\n        iconDisabled: \"/image/myOwnDisabledIcon.svg\",\n        incLabelWithIcon: \"before\",\n        kind: \"primary\",\n        tooltip: \"Run the flow\",\n        isSelected: false\n    }\n</code></pre></p> <ul> <li> <p>action - a unique identifier and the name of the action to be performed. This action name will be passed in the <code>data</code> parameter of the editActionHandler callback method so you can detect when the user clicks an action in the toolbar.</p> <p>If you are using the recommended (and default) internal object model, the following built in actions will be automatically handled by common-canvas: <code>undo</code>, <code>redo</code>, <code>cut</code>, <code>copy</code>, <code>paste</code>, <code>createAutoComment</code>, <code>deleteSelectedObjects</code>, <code>arrangeHorizontally</code>, <code>arrangeVertically</code>, <code>zoomIn</code>, <code>zoomOut</code>, and <code>zoomToFit</code>. So for example, if the <code>deleteSelectedObjects</code> action (shown as a trash can) is clicked, any selected objects will be deleted from the internal object model.</p> <p>Disablement of some of these built in actions is also handled by common-canvas so, for example, when no canvas objects are selected the <code>deleteSelectedObjects</code> action (trash can icon) will be automatically disabled. You can switch off this automatic enable/disable function by setting <code>overrideAutoEnableDisable</code> field in the toolbar config to <code>true</code>. When set to true, the <code>enable</code> field in the action objects will be used to set the enablement appearance of the toolbar item.</p> </li> <li> <p>label - the Tooltip label to display (and optionally the text to display next to the icon if <code>incLabelWithIcon</code> is specified).</p> </li> <li> <p>enable - Icon will have hover effect and is clickable when set to true. If false, icon will be disabled and unclickable. If not set, it will default to disabled (false). If <code>overrideAutoEnableDisable</code> is set to false, or omitted, this field is ignored for the standard action items (like cut, copy, paste) because common canvas handles their enable/disable appearance. If <code>overrideAutoEnableDisable</code> is set to true, this field will be used for standard action items.</p> </li> <li> <p>iconEnabled - specifies the icon to display when <code>enable</code> is true. Common-canvas will provide icons for the following actions so you don\u2019t need to specify <code>iconEnabled</code> or <code>iconDisabled</code> for them: <code>stop</code>, <code>run</code>, <code>undo</code>, <code>redo</code>, <code>cut</code>, <code>copy</code>, <code>paste</code>, <code>createAutoComment</code>, <code>deleteSelectedObjects</code>, <code>arrangeHorizontally</code>, <code>arrangeVertically</code>, <code>commentsShow</code>, <code>commentsHide</code>, <code>zoomIn</code>, <code>zoomOut</code>, and <code>zoomToFit</code>.</p> <p>It can be either:</p> <ul> <li>a string containing the path to a custom SVG file to display or</li> <li>a JSX expression, for example <code>(&lt;Edit32 /&gt;)</code> where Edit32 is an icon imported from carbon icons. It is recommended to only pass very simple JSX expressions.</li> </ul> </li> <li> <p>iconDisabled - specifies the icon to display when <code>enable</code> is false. If <code>iconDisabled</code> is not specified <code>iconEnabled</code> will be used instead. It can be omitted for any of the standard actions (see <code>iconEnabled</code> above).</p> <p>It can be either:</p> <ul> <li>a string containing the path to a custom SVG file to display or</li> <li>a JSX expression, for example <code>(&lt;Edit32 /&gt;)</code> where Edit32 is an icon imported from carbon icons. It is recommended to only pass very simple JSX expressions.</li> </ul> </li> <li> <p>incLabelWithIcon - can be set to \u201cno\u201d, \u201cbefore\u201d or \u201cafter\u201d. The default is \u201cno\u201d. This field specifies whether the label should be displayed in the toolbar with the icon and if so, where it is displayed with respect to the icon.</p> </li> <li> <p>kind - can be set to \u201cdefault\u201d, \u201cprimary\u201d, \u201cdanger\u201d, \u201csecondary\u201d, \u201ctertiary\u201d or \u201cghost\u201d. The default it \u201cdefault\u201d. These give the action the same styling as the equivalent kind\u2019s of buttons in the carbon library.</p> </li> <li> <p>tooltip - A string or JSX object. The tooltip that will be displayed for the action. If this is not provided the label will be displayed as the tooltip instead.</p> </li> <li> <p>isSelected - A boolean. When set to true the toolbar button displays a selection highlight (which is a blue bar along the bottom border of the toolbar item). This is useful if you have a button that switches on and off a mode in your interface, as opposed to a regular button, which does not have any state, that would typically execute a command of some sort. For example, if your product has a \u2018Turbo boost\u2019 setting, which can be on or off, you could add a \u2018Turbo Boost\u2019 button to the toolbar and use <code>isSelected</code> to indicate when the option is active. When the user clicks the button it would switch <code>isSelected</code> for the \u2018Turbo Boost\u2019 button to true or false as appropriate. (This would give behavior like a checkbox.)</p> <p>You can also use this property to indicate a current state between a number of mutually exclusive settings. In this case, you would add one button to the toolbar for each setting and then set the <code>isSelected</code> property to true for the setting that is currently active. Then, when the user clicks a different option in the set, your code would set <code>isSelected</code> to true for that button and set it to false for the previously selected button. (This would give behavior like a radio button set.)</p> </li> </ul> <p>You can add dividers to separate groups of actions from other actions. This is displayed as a thin gray line. The divider object has one attribute: <pre><code>    {\n       divider: true\n    }\n</code></pre></p> <ul> <li>divider - To show a divider in the toolbar, add an object with <code>divider</code> attribute set to true.</li> </ul>"},{"location":"02-canvas/02-configs/02-toolbar-config/#deprecated-toolbar-config","title":"Deprecated toolbar config","text":"<p>The old toolbar configuration is still supported for now (but is deprecated). This allows the config to be provided as an array that defines just the left side of the toolbar. The right side will always show the zoom actions (zoomIn, zoomOut, zoomToFit) and a notifications panel icon (if a notification configuration object is provided in the CommonCanvas react object). These right side actions will always show on the right-hand side of the toolbar and are handled internally by the canvas. The entries in the array follow the same definition as described above. Note: there is no need to provide a <code>palette</code> action in the array because a palette icon and following divider will automatically be added to the toolbar when a palette is specified for the canvas.</p> <p>An example of the toolbar config array should look like this: <pre><code>    const toolbarConfig = [\n       { action: \"stop\", label: \"Stop Execution\", enable: false },\n       { action: \"run\", label: \"Run Pipeline\", enable: false },\n       { action: \"undo\", label: \"Undo\", enable: true },\n       { action: \"redo\", label: \"Redo\", enable: true },\n       { action: \"cut\", label: \"Cut\", enable: false },\n       { action: \"copy\", label: \"Copy\", enable: false },\n       { action: \"paste\", label: \"Paste\", enable: false },\n       { action: \"createAutoComment\", label: \"Add Comment\", enable: true },\n       { action: \"deleteSelectedObjects\", label: \"Delete\", enable: true },\n       { action: \"arrangeHorizontally\", label: \"Arrange Horizontally\", enable: true }\n    ];\n</code></pre></p>"},{"location":"02-canvas/02-configs/02-toolbar-config/#advanced-jsx-actions","title":"Advanced: JSX actions","text":"<p>Regular toolbar buttons, explained above, are displayed as set of Carbon <code>Button</code>s. If you don\u2019t want your content wrappered in a button, you can provide your own JSX to display as an action in the toolbar. Be aware however that, because of the way the toolbar is designed, there are restrictions on what the toolbar can do to display your JSX. For example, it cannot display anything with a height greater than the toolbar height.</p> <p>If you provide your own JSX object it is displayed in a simple <code>div</code> in the toolbar. Some attributes are applied to the <code>div</code> to allow the action to work correctly within the toolbar - these cannot be changed.  You are responsible for styling your JSX object to get it to appear the way you want.</p> <p>Also be aware that, if the width of the toolbar reduces (maybe by the user sizing the page) your action may get moved into the overflow menu. It is also your responsibility to style the button so it appears as you want in the overflow menu as well as the toolbar.</p> <p>The JSX can be provided in the <code>jsx</code> field. Here is an example. The only other fields that are recognized with the <code>jsx</code> field are <code>action</code> and <code>tooltip</code>, all other fields will be ignored.</p> <pre><code>    {\n       action: \"custom-loading\",\n       jsx: (&lt;div style={{ padding: \"0 11px\" }}&gt;&lt;InlineLoading status=\"active\" description=\"Loading...\" /&gt;&lt;/div&gt;),\n       tooltip: \"Loading the thing you wanted.\"\n    }\n</code></pre> <ul> <li> <p>action - a unique identifier and the name of the action to be performed.</p> </li> <li> <p>jsx - A JSX object. This will be displayed as the action in the toolbar.</p> </li> <li> <p>tooltip - A string or JSX object. This will be displayed as the tooltip for the action in the toolbar. If <code>tooltip</code> is omitted no tooltip will be added to your action. If <code>tooltip</code> is specified the <code>jsx</code> will be inside a tooltip <code>div</code> which is in the toolbar <code>div</code> mentioned above.</p> </li> </ul> <p>Here\u2019s an example toolbar that includes some Carbon React components <pre><code>    toolbarConfig = {\n        leftBar: [\n            { action: \"custom-loading\",\n              jsx: (\n                &lt;div style={{ padding: \"0 11px\" }}&gt;\n                  &lt;InlineLoading status=\"active\" description=\"Loading...\" /&gt;\n                 &lt;/div&gt;\n               )\n             },\n            { divider: true },\n            { action: \"custom-checkbox\",\n              jsx: (\n                &lt;div style={{ padding: \"0 11px\" }}&gt;\n                  &lt;Checkbox id={\"chk1\"} defaultChecked labelText={\"Check it out\"} /&gt;\n                &lt;/div&gt;\n              )\n            },\n            { divider: true },\n            { action: \"custom-button\",\n              tooltip: \"A custom button of type primary!\",\n              jsx: (\n                &lt;div className=\"toolbar-custom-button\"&gt;\n                  &lt;Button id={\"btn1\"} size=\"field\" kind=\"primary\"&gt;Custom button &lt;/Button&gt;\n                &lt;/div&gt;\n              )\n            },\n            { divider: true },\n            { action: \"custom-dropdown\",\n              tooltip: \"A drop down using the overflow menu!\",\n              jsx: (\n                &lt;div className=\"toolbar-custom-button\"&gt;\n                  &lt;OverflowMenu id={\"ovf1\"} renderIcon={TextScale32}&gt;\n                    &lt;OverflowMenuItem itemText=\"Big\" /&gt;\n                    &lt;OverflowMenuItem itemText=\"Medium\" /&gt;\n                    &lt;OverflowMenuItem itemText=\"Little\" /&gt;\n                  &lt;/OverflowMenu&gt;\n                &lt;/div&gt;) },\n            { divider: true }\n        ]\n    };\n</code></pre></p>"},{"location":"02-canvas/02-configs/03-notification-config/","title":"Notification Config object","text":"<p>The notification config object configures whether or not the notification icon will be shown in the canvas toolbar. It will appear to the far right of the zoom actions in the toolbar. Similar to a toolbar action object, the notificationConfig object looks like this: <pre><code>    const notificationConfig = {\n       action: \"notification\",\n       label: \"Notifications\",\n       enable: true,\n       notificationHeader: \"Notification Messages\",\n       notificationSubtitle: \"subtitle\",\n       emptyMessage: \"You don't have any notifications right now.\",\n       clearAllMessage: \"Clear all\",\n       keepOpen: true,\n       clearAllCallback: () =&gt; { console.log(\"Clear All clicked\"); }\n    };\n</code></pre></p> <ul> <li> <p>action - \u201cnotification\u201d enables the notifications icon to appear in the far right of the toolbar.</p> </li> <li> <p>label - the Tooltip label to display for the notifications icon in the toolbar.</p> </li> <li> <p>enable - Icon will have hover effect and is clickable when set to true. If false, icon will be disabled and unclickable. If not set, it will default to disabled (enable: false)</p> </li> <li> <p>notificationHeader - String to display in the notification panel header. If not set, it will default to \u201cNotifications\u201d.</p> </li> <li> <p>notificationSubtitle - String to be displayed as a sub-title in the panel header. If not set panel header will be sized to only contain the <code>notificationHeader</code> string.</p> </li> <li> <p>emptyMessage - String to be displayed when there are no notification messages to display.</p> </li> <li> <p>clearAllMessage - String to be displayed on a button displayed at the bottom of the panel. The button can be clicked to clear all the messages from the panel. If omitted the button, and the footer area of the panel it appears in, will not be displayed.</p> </li> <li> <p>keepOpen - A boolean which indicates when the panel will close. The default is false. If set to false, the panel will close when the user clicks on the page somewhere outside the panel. If set to true the panel will remain open when the user clicks somewhere on the page outside of the panel. With the option the user must click the <code>x</code> icon in the top right of the panel, or click the notification toolbar icon, to close the panel.</p> </li> <li> <p>clearAllCallback - An optional callback function that will be called every time the \u201cclear all\u201d button is clicked.</p> </li> <li> <p>secondaryButtonLabel - Label for the optional secondary button to be displayed in the notification panel. Both <code>secondaryButtonLabel</code> and <code>secondaryButtonCallback</code> must be specified for the button to appear.</p> </li> <li>secondaryButtonCallback - A callback function that will be called when the secondary button is clicked.</li> <li>secondaryButtonDisabled - Specify whether the secondary button is disabled or not.</li> </ul> <p>The notification icon state is determined by the type of messages in the notification message array. By default, a notifications icon in ready state will be shown if there are messages in the notification message array. If any message in the array is of type \u2018warning\u2019, a notifications icon in warning state will be shown. If any message in the array is of type \u2018error\u2019, a notifications icon in error state will be shown. A number will be shown within the notifications icon to indicate the number of messages.</p> <p>For information about the structure of notification messages, refer to the message specification documentation. Notification messages can be added and removed from the notification panel by calling the canvas controller API. Refer to the canvas controller API documentation for information on how to add/set messages in the notification message array.</p>"},{"location":"02-canvas/02-configs/04-context-menu-config/","title":"Context Menu Config object","text":"<p>The context menu config object configures whether certain actions are available in the default context menu.</p> <pre><code>    const contextMenuConfig = {\n       enableCreateSupernodeNonContiguous: false,\n       defaultMenuEntries: {\n          saveToPalette: true,\n          createSupernode: false,\n          displaySupernodeFullPage: true,\n          colorBackground: false\n       }\n    };\n</code></pre> <ul> <li> <p>enableCreateSupernodeNonContiguous - Allows the creation of supernodes from non-contiguous nodes. When set to <code>true</code>, the \u201cCreate supernode\u201d menu item will be added to the default context menu when the currently selected nodes are contiguous or non-contiguous. When set to <code>false</code>, the \u201cCreate supernode\u201d menu item is only added to the default context menu when the selected nodes are contiguous. The default value is <code>false</code>.</p> </li> <li> <p>defaultMenuEntries - Controls what entries are generated in the default context menu generated by common canvas. This has the following properties:</p> <ul> <li>\u2018saveToPalette\u2019 - This is a boolean. The default is false. If set to true, common canvas will add a \u2018Save to palette\u2019 option to the default node context menu.</li> <li>\u2018createSupernode\u2019 - This is a boolean. The default is true. If set to false, common canvas will not show the \u2018Create Supernode\u2019 option in the default context menu for nodes.</li> <li>\u2018displaySupernodeFullPage\u2019 - This is a boolean. The default is true. If set to false, common canvas will not show the \u2018Display full page\u2019 option in the default context menu for supernodes. When true, the option will be displayed. Clicking that option navigates the user to the full page view of the supernode\u2019s pipeline as if the user had clicked the expansion icon of the expanded in-place supernode view.</li> <li>\u2018colorBackground\u2019 - This is a boolean. The default is true. If set to false, common canvas will not show the \u2018Color background\u2019 option in the default context menu for comments. When true, the option will be displayed.</li> </ul> </li> </ul> <p>[Note: If any host app wants more control over the default context menu here, please open an issue.]</p>"},{"location":"02-canvas/02-configs/05-keyboard-config/","title":"Keyboard Config object","text":"<p>The keyboard config object configures whether certain actions are available from the keyboard. See this section for what key combinations are supported <pre><code>    const keyboardConfig = {\n       actions: {\n          delete: false,\n          undo: false,\n          redo: false,\n          selectAll: false,\n          cutToClipboard: false,\n          copyToClipboard: false,\n          pasteFromClipboard: false\n    };\n</code></pre> All actions are <code>true</code> by default so it is only necessary to specify those actions you don\u2019t want as <code>false</code>.</p>"},{"location":"02-canvas/03-callbacks/","title":"Common Canvas callbacks","text":"<p>You can optionally provide callback listeners.  These will be called when the user interacts with the canvas.</p> <p>These listeners are as follows:</p> <ul> <li> <p>Context Menu Handler</p> </li> <li> <p>Edit Action Handler</p> </li> <li> <p>Before Edit Action Handler</p> </li> <li> <p>Layout Handler</p> </li> <li> <p>Decoration Action Handler</p> </li> <li> <p>Tip Handler</p> </li> <li> <p>ID Generator Handler</p> </li> <li> <p>Selection Change Handler</p> </li> <li> <p>Click Action Handler</p> </li> <li> <p>Action Label Handler</p> </li> </ul>"},{"location":"02-canvas/03-callbacks/01-context-menu-handler/","title":"Context Menu Handler","text":""},{"location":"02-canvas/03-callbacks/01-context-menu-handler/#contextmenuhandler","title":"contextMenuHandler","text":"<p><pre><code>    contextMenuHandler(source, defaultMenu)\n</code></pre> This callback is used for both \u2018context menus\u2019 and, if the <code>enableContextToolbar</code> canvas config option is set to <code>true</code>, for \u2018context toolbars\u2019.</p> <p>If this callback is not provided common canvas will handle context menu/toolbars, and their actions, internally. You only need to implement this callback if you want to add or remove options to/from the context menu/toolbar.</p> <p>The job of this callback is to tell common canvas what items to display in the context menu/toolbar.</p>"},{"location":"02-canvas/03-callbacks/01-context-menu-handler/#for-context-menu","title":"For Context Menu","text":"<p>For context menus this will be dependent on what object or set of objects the context menu was requested for by the user.</p> <p>This callback will be called if the user performs a context menu gesture (such as mouse \u2018right click\u2019) on a:</p> <ul> <li>node</li> <li>link</li> <li>comment</li> <li>port</li> <li>on the canvas background or</li> <li>if a number of objects are selected, the combination of objects.</li> </ul> <p>This callback must return an array that defines the menu to be displayed. If the callback is not provided, a default context menu (the defaultMenu passed into the handler) will be displayed by the common canvas.</p> <p>The source object passed in looks like this: <pre><code>    {\n      type: \"node\",\n      targetObject: {&lt;object_info&gt;},\n      selectedObjectIds: [\"node_1\", \"node_2\"],\n      mousePos: {x: \"10\", y:\"20\"}\n    }\n</code></pre> type - Indicates type of object for which the context menu was selected. Can be \u201cnode\u201d, \u201cport\u201d, \u201clink\u201d, \u201ccanvas\u201d or \u201ccomment\u201d</p> <p>targetObject - The object for which the context menu was requested. Only provided when type is \u201cnode\u201d or \u201ccomment\u201d</p> <p>selectedObjectIds -  An array containing the IDs of all currently selected nodes and/or comments</p> <p>mousePos - An object containing the coords of the mouse when the context menu was requested</p> <p>The callback would need to return an array, that describes the context menu to be displayed, that looks something like this: <pre><code>    [\n     {action: \"deleteSelectedObjects\", label: \"Delete\"},\n     {divider: true},\n     {action: \"myAction\", label: \"My Action\"}\n     {action: \"myUnavailableAction\", label: \"A test disabled item\", enable: false}\n    ]\n</code></pre> There is one element in the array for each entry in the context menu. An entry can be either a context menu item, which consists of a label and an action, or a divider, whose field would need to be set to true.</p> <p>Actions can be either internal (implemented inside the common canvas, like \u201cdeleteSelectedObjects\u201d above) or external (like \u201cmyAction\u201d).</p> <p>Existing internal actions are:</p> <ul> <li>selectAll</li> <li>cut</li> <li>copy</li> <li>paste</li> <li>undo</li> <li>redo</li> <li>createSupernode</li> <li>expandSupernode</li> <li>collapseSupernode</li> <li>deleteSelectedObjects</li> <li>createComment</li> <li>deleteLink</li> <li>disconnectNode</li> <li>highlightBranch</li> <li>highlightDownstream</li> <li>highlightUpstream</li> <li>unhighlight</li> </ul> <p>External actions are custom actions you want common canvas to display for your application. To get common canvas to display your action you would need to return an array from the callback that includes a menu item for the action.</p> <p>When the user clicks the option in the context menu matching your action common canvas will call the editActionHandler callback so you\u2019ll need to implement some code in that callback to execute the intended action. If you want to simply add your action to the default context menu provided by common canvas you can take the defaultMenu parameter provided to the callback and add your menu item to it. Alternatively, you can provide a complete new context menu of your own.</p> <p>Here is a sample implementation of contextMenuHandler, which takes a source object (described above) and the defaultMenu as parameters, and adds a custom action to the default menu when the user \u2018right clicks\u2019 the canvas background.</p> <p><pre><code>    contextMenuHandler(source, defaultMenu) {\n      let customMenu = defaultMenu;\n      if (source.type === \"canvas\") {\n    customMenu = customMenu.concat({ action: \"myAction\", label: \"My Action\" });\n      }\n      return customMenu;\n    }\n</code></pre> In addition to adding the context menu item, you would also need to implement the editActionHandler callback to execute the action, like this: <pre><code>    editActionHandler(data) {\n      if (data.editType === \"myAction\") {\n        // Execute my action code here.\n      }\n    }\n</code></pre> Tip: To avoid any future name clashes with internal actions you should make sure you action names are unique. For example, you could add a prefix to your action names eg. <code>$MyApp_action</code> where <code>$MayApp_</code> is the prefix for all your actions.</p>"},{"location":"02-canvas/03-callbacks/01-context-menu-handler/#for-context-toolbar","title":"For Context Toolbar","text":"<p>For context toolbars, this will be dependent on which object the mouse cursor is currently hovering over (which may be different to any of the currently selected objects).</p>"},{"location":"02-canvas/03-callbacks/02-edit-action-handler/","title":"Edit Action Handler","text":""},{"location":"02-canvas/03-callbacks/02-edit-action-handler/#editactionhandler","title":"editActionHandler","text":"<p><pre><code>    editActionHandler(data, command)\n</code></pre> This callback is optional. You don\u2019t need to implement anything for it and it doesn\u2019t return anything. It is called whenever the user does the following types of action on the canvas:</p> <ul> <li>Clicks a tool in the toolbar.</li> <li>Clicks an option in the context menu.</li> <li>Presses a key combination on the keyboard to cause the canvas to change.</li> <li>Performs some direct manipulation on the canvas such as:<ul> <li>Creates a node (createNode)</li> <li>Moves one or a set of nodes/comments (moveObjects)</li> <li>Edits a comment (editComment)</li> <li>Links two nodes together (linkNodes)</li> <li>Links a comment to a node (linkComment)</li> <li>Resizes a supernode (resizeObjects)</li> <li>Resizes a comment (editComment)</li> <li>Expands a supernode in place (expandSuperNodeInPlace)</li> <li>Navigates into a sub-flow in a supernode (displaySubPipeline)</li> <li>Navigates out of a sub-flow in a supernode (displayPreviousPipeline)</li> </ul> </li> </ul> <p>This callback is called after the common-canvas internal object model has been updated.  This callback is provided with two parameters: <code>data</code> and <code>command</code>.</p> <ol> <li>data parameter - that looks like this. The data provided can vary depending on the action the user performed. <pre><code>    {\n      editType: \"createComment\",\n      editSource: \"contextmenu\",\n      selectedObjects: [],\n      selectedObjectIds: [],\n      offsetX: 100,\n      offsetY: 42\n    }\n</code></pre></li> </ol> <ul> <li> <p>editType - This is the action that originates from either the toolbar, context menu, keyboard action or direct manipulation on the canvas. If you specified your own action in the context menu or in the toolbar this field will be your action\u2019s name.</p> </li> <li> <p>editSource - This is the source of the action. It can be set to \u201ctoolbar\u201d, \u201ccontextmenu\u201d, \u201ckeyboard\u201d or \u201ccanvas\u201d (for an action caused by direct manipulation on the canvas).</p> </li> <li> <p>selectedObjects - An array of the currently selected objects.</p> </li> <li> <p>selectedObjectIds - An array of the IDs of currently selected objects. Included for backward compatibility.</p> </li> <li> <p>Other fields - Numerous other fields which vary based on the action and the source of the action.</p> </li> </ul> <ol> <li>command parameter - This is a Javascript class which is the command object that was added to the command stack and executed to run the action \u2018requested\u2019 by the user. If the user performed an <code>undo</code> action this will be the command that has been undone. If the user performed a <code>redo</code> action this will be the command that was redone. The command object may contain fields which are connected with the execution of the command.</li> </ol>"},{"location":"02-canvas/03-callbacks/03-before-edit-action-handler/","title":"Before Edit Action Handler","text":""},{"location":"02-canvas/03-callbacks/03-before-edit-action-handler/#beforeeditactionhandler","title":"beforeEditActionHandler","text":"<p><pre><code>    beforeEditActionHandler(data, command)\n</code></pre> This callback is optional. You don\u2019t need to implement anything for it but if you do implement it you must return either a data object or null. This callback is called in all the same instances where <code>editActionHandler</code> is called. The difference is that this callback is called before the internal object model is updated. This gives your application the opportunity to examine the action that is about to be performed and either: let it continue; modify it and let it continue; or cancel it.</p> <p>This callback is provided with two parameters: <code>data</code> and <code>command</code>.</p> <ol> <li>data parameter - this is the same as the data object described for <code>editActionHandler</code> (see above)</li> <li>command parameter - typically this will be null but for <code>undo</code> operations (that is where data.editType === \u201cundo\u201d) this will be the command that is about to be undone. For <code>redo</code> operations (that is where data.editType === \u201credo\u201d) this will be the command that is about to be redone.</li> </ol> <p>This callback must return either the data object that was passed in or null. <code>beforeEditActionHandler</code> will behave as follows based on what is returned:</p> <ul> <li>If the data object is returned unmodified: the action will be performed as normal.</li> <li>If the data object is returned modified: the action will be performed based on the modified data object. This means your application can alter the behavior of the action that will be performed. For example, you could intercept a <code>createNode</code> command and change the label for the new node in the nodeTemplate to something different. Then when the node is created the new label will be used. It is recommended you be very very careful when updating this object since there is no error checking in common-canvas to ensure you modified the object correctly.</li> <li>If <code>null</code> is returned: the action will be cancelled and not performed on the internal object model nor will <code>editActionHandler</code> be called.</li> </ul> <p>If you need to do any asynchronous activity in the beforeEditActionHandler callback you can:</p> <ul> <li>Return null from the callback - which will cancel the current action</li> <li>Do your asynchronous activity. While this is happening, the user ought to be prevented from modifying the canvas so you should display some sort of progress indicator or modal dialog to inform the user that some activity is occurring.</li> <li>Then call <code>CanvasController.editActionHandler(data)</code> passing in the <code>data</code> object as a parameter with the modified properties. This will then execute the action as before. Note: This means the <code>beforeEditActionHandler</code> will be called a second time so be sure you put in a check to make sure you don\u2019t get into a loop.</li> </ul>"},{"location":"02-canvas/03-callbacks/04-layout-handler/","title":"Layout Handler","text":"<p>This is an optional handler you don\u2019t need to implement anything for it unless you want to. The layoutHandler callback, when provided, is called for each node on the canvas and allows the application to customize the node layout properties on a node-by-node basis.</p>"},{"location":"02-canvas/03-callbacks/04-layout-handler/#layouthandler","title":"layoutHandler","text":"<p><pre><code>    layoutHandler(data)\n</code></pre>  The callback should return a Javascript object whose properties will override the default properties for node layout. The callback is provided with a parameter <code>data</code> which is the node object. Your code can look at the node properties and decide which properties it needs to override. This can be used to change the node shape, styling and position and size of node elements like the image, main label etc.</p> <p>For more details see: Customizing Node Layout</p>"},{"location":"02-canvas/03-callbacks/05-decoration-action-handler/","title":"Decoration Action Handler","text":""},{"location":"02-canvas/03-callbacks/05-decoration-action-handler/#decorationactionhandler","title":"decorationActionHandler","text":"<p><pre><code>    decorationActionHandler(object, id, pipelineId)\n</code></pre> Decorations are small images that can be displayed on or near to your nodes and links. They can be for display only or actionable (so the user can click on them). See the canvas JSON schema for information on how to define decorations for your nodes.</p> <p>This callback is called when the user clicks on an actionable decoration. You don\u2019t need to implement anything for this callback unless you added actionable decorations to your nodes. It doesn\u2019t return anything. It is called whenever the user clicks on a decoration that you added to a node in the canvas JSON.</p> <p>It is provided with two parameters:</p> <ul> <li>object \u2013 the node or link with which the decoration is associated.</li> <li>id \u2013 the ID of the decoration that you provided in the canvas JSON</li> <li>pipelineId \u2013 the ID of the pipeline for the node.</li> </ul>"},{"location":"02-canvas/03-callbacks/06-tip-handler/","title":"Tip Handler","text":""},{"location":"02-canvas/03-callbacks/06-tip-handler/#tiphandler","title":"tipHandler","text":"<p><pre><code>    tipHandler(tipType, data)\n</code></pre> Note: The display of tooltips (or not) can be controlled using the <code>tipConfig</code> field of the canvas config object.</p> <p>This optional callback can be implemented to override the tooltip content that is displayed by default for each canvas object. It is called before tips are shown for: palette categories, palette node templates, node, ports, links, decorations and the state tag. Common-canvas provides default implementations for all of the tips except for links and decorations, as follows:</p> Object Default tip behavior Palette category Contains the category name and the category description. Palette node template Contains the category name, the node type and node description. Node Contains the name, description and status icon and optionally, if the name was modified from the original name, the original node type. Port The port label is shown Link No tip is shown by default Decoration No tip is shown by default State tag An appropriate explanation for the state displayed by the tag <p>To override the content, you can return either a string or JSX object. If your code returns <code>null</code> for a particular type of tip, common-canvas will display the default tip for that object. For an example of an implementation for a <code>tipHandler</code>, see App.js in the test harness code (https://github.com/elyra-ai/canvas/blob/master/canvas_modules/harness/src/client/App.js).</p> <p>Common-canvas calls the <code>tipHandler</code> callback with two parameters:</p> <ul> <li>tipType - the type of the tip</li> <li>data - an object that describes the canvas element for which the tip was requested</li> </ul> <p>Here are some specific examples:</p>"},{"location":"02-canvas/03-callbacks/06-tip-handler/#palette-categories","title":"Palette categories:","text":"<ul> <li>tipType: \u201ctipTypePaletteCategory\u201d</li> <li>data: An object with category information, like this:</li> </ul> <pre><code>{\n    category: {\n        id: \"1234\",\n        label: \"Import\",\n        description: \"Category for import nodes\",\n        image: \"/images/import.svg\"\n    }\n}\n</code></pre>"},{"location":"02-canvas/03-callbacks/06-tip-handler/#palette-nodes-templates","title":"Palette nodes templates:","text":"<ul> <li>tipType: \u201ctipTypePaletteItem\u201d</li> <li>data: An object with node template information: <pre><code>{\n    nodeTemplate: {\n        label: \"C50\",\n        description: \"C50 Model\",\n        operator_id_ref: \"com.ibm.commonicons.models.c50\",\n        type: \"model_node\",\n        image: \"/images/common_node_icons/models/model_c50.svg\",\n        input_ports: [{...}],\n        output_ports: []\n    }\n}\n</code></pre></li> </ul>"},{"location":"02-canvas/03-callbacks/06-tip-handler/#nodes","title":"Nodes:","text":"<ul> <li>tipType: \u201ctipTypeNode\u201d</li> <li>data: An object with pipelineId and node information: <pre><code>{\n    pipelineId: \"153651d6-9b88-423c-b01b-861f12d01489\",\n    node: {\n        id: \"idGWRVT47XDV\",\n        type: \"execution_node\",\n        operator_id_ref: \"type\",\n        output_ports: [...],\n        input_ports: [...],\n        label: \"Define Types\",\n        description: \"\",\n        image: \"\",\n        x_pos: 445,\n        y_pos: 219\n    }\n}\n</code></pre></li> </ul>"},{"location":"02-canvas/03-callbacks/06-tip-handler/#ports","title":"Ports:","text":"<ul> <li>tipType: \u201ctipTypePort\u201d</li> <li>data: An object with pipelineId, node and port information: <pre><code>{\n    pipelineId: \"153651d6-9b88-423c-b01b-861f12d01489\",\n    node: {\n        id: \"idGWRVT47XDV\",\n        type: \"execution_node\",\n        operator_id_ref: \"type\",\n        output_ports: [{...}],\n        input_ports: [{...}],\n        label: \"Define Types\",\n        description: \"\",\n        image: \"\",\n        x_pos: 445,\n        y_pos: 219\n    },\n    port: {\n        id: \"outPort\",\n        label: \"Output Port\"\n    }\n}\n</code></pre></li> </ul>"},{"location":"02-canvas/03-callbacks/06-tip-handler/#links","title":"Links","text":"<ul> <li>tipType: \u201ctipTypeLink\u201d</li> <li>data: An object with pipelineId and link information. <pre><code>{\n    pipelineId: \"153651d6-9b88-423c-b01b-861f12d01489\",\n    link: {\n        id: \"canvas_link_3\",\n        x1: 515,\n        y1: 248,\n        x2: 611,\n        y2: 180,\n        class_name: \"canvas-data-link\",\n        type: \"nodeLink\",\n        src: {\n            id: \"idGWRVT47XDV\",\n            type: \"execution_node\",\n            operator_id_ref: \"type\",\n            output_ports: [{...}],\n            input_ports: [{...}],\n            label: \"Define Types\",\n            description: \"\",\n            image: \"\",\n            x_pos: 445,\n            y_pos: 219\n        },\n        srcPortId: \"outPort\",\n        trg: {\n            id: \"id8I6RH2V91XW\",\n            type: \"binding\",\n            operator_id_ref: \"c50\",\n            output_ports: [],\n            input_ports: [{...}],\n            label: \"C5.0\",\n            description: \"\",\n            image: \"\",\n            x_pos: 611,\n            y_pos: 151\n        },\n        trgPortId: \"inPort\"\n    }\n}\n</code></pre></li> </ul>"},{"location":"02-canvas/03-callbacks/06-tip-handler/#decorations","title":"Decorations","text":"<ul> <li>tipType: \u201ctipTypeDec\u201d</li> <li>data: An object with pipelineId and decoration information. <pre><code>{\n    pipelineId: \"153651d6-9b88-423c-b01b-861f12d01489\",\n    decoration: {\n        \"id\": \"2016\",\n        \"position\": \"topRight\",\n        \"label\": \"LCFC\",\n        \"tooltip\": \"Foxes never quit\"\n    }\n}\n</code></pre></li> </ul>"},{"location":"02-canvas/03-callbacks/06-tip-handler/#state-tag","title":"State tag","text":"<ul> <li>tipType: \u201ctipTypeStateTag\u201d</li> <li>data: An object with pipelineId and decoration information. <pre><code>{\n    stateTagText: \"This flow is locked and cannot be edited.\",\n    stateTagType: \"Locked\"\n}\n</code></pre></li> </ul>"},{"location":"02-canvas/03-callbacks/07-id-generator-handler/","title":"ID Generator Handler","text":"<p>This is an optional callback. It is called when new objects are created in the canvas and allows the application to provide its own method to generate a unique id for the object.</p>"},{"location":"02-canvas/03-callbacks/07-id-generator-handler/#idgeneratorhandler","title":"idGeneratorHandler","text":"<p><pre><code>    idGeneratorHandler(action, data)\n</code></pre>  If no idGeneratorHandler is set or the method returns null, an appropriate UUID is generated by common-canvas for each object. The callback is called with a two parameters:  * An enumerated string to describe the action being performed (create_node, create_comment, create_node_link, create_comment_link, clone_node, clone_comment, clone_node_link or clone_comment_link) and  * A JavaScript object with additional data to describe the object</p> <p>The callback should return a string containing the application\u2019s unique ID for the object. Here are more details about the different action and their parameters.</p> <ul> <li>Create node:<ul> <li>action: create_node</li> <li>data:</li> </ul> </li> </ul> <pre><code>nodeType:\n{\n   \"label\":\"C50\",\n   \"description\":\"C50 Model\",\n   \"operator_id_ref\":\"com.ibm.commonicons.models.c50\",\n   \"type\":\"model_node\",\n   \"image\":\"/images/common_node_icons/models/model_c50.svg\",\n   \"input_ports\":[\n      {\n         \"id\":\"inPort\",\n         \"label\":\"Input Port\",\n         \"cardinality\":{\n            \"min\":0,\n            \"max\":1\n         }\n      }\n   ],\n   \"output_ports\":[\n\n   ]\n}\n</code></pre> <ul> <li> <p>Create comment:</p> <ul> <li>action: create_comment</li> <li>data: n/a</li> </ul> </li> <li> <p>Create node link:</p> <ul> <li>action: create_node_link</li> <li>data:</li> </ul> </li> </ul> <pre><code>sourceNode: {\n   \"id\":\"6a547456-f1ea-48a6-9721-45d6ae70dd6b\",\n   \"label\":\"Aggregate\",\n   \"type\":\"execution_node\",\n   \"operator_id_ref\":\"com.ibm.commonicons.operations.aggregate\",\n   \"image\":\"/images/common_node_icons/operations/operation_aggregate.svg\",\n   \"class_name\":\"d3-node-body\",\n   \"input_ports\":[...],\n   \"output_ports\":[...],\n   \"x_pos\":55,\n   \"y_pos\":97.5,\n   \"inputPortsHeight\":20,\n   \"outputPortsHeight\":20,\n   \"height\":75,\n   \"width\":70\n},\ntargetNode: {\n   \"id\":\"71c96629-be46-418b-be63-0a02ef2fe2e0\",\n   \"label\":\"Append\",\n   \"type\":\"execution_node\",\n   \"operator_id_ref\":\"com.ibm.commonicons.operations.append\",\n   \"image\":\"/images/common_node_icons/operations/operation_append.svg\",\n   \"class_name\":\"d3-node-body\",\n   \"input_ports\":[...],\n   \"output_ports\":[...],\n   \"x_pos\":264,\n   \"y_pos\":83.5,\n   \"inputPortsHeight\":20,\n   \"outputPortsHeight\":20,\n   \"height\":75,\n   \"width\":70\n}\n</code></pre> <ul> <li>Create comment link:<ul> <li>action: create_comment_link</li> <li>data:</li> </ul> </li> </ul> <pre><code>comment: {\n   \"id\":\"8c81aac7-ebe5-4f96-9d63-eabc22b09635\",\n   \"class_name\":\"d3-comment-rect\",\n   \"content\":\"\",\n   \"height\":42,\n   \"width\":175,\n   \"x_pos\":50,\n   \"y_pos\":50\n},\ntargetNode: {\n   \"id\":\"71c96629-be46-418b-be63-0a02ef2fe2e0\",\n   \"label\":\"Append\",\n   \"type\":\"execution_node\",\n   \"operator_id_ref\":\"com.ibm.commonicons.operations.append\",\n   \"image\":\"/images/common_node_icons/operations/operation_append.svg\",\n   \"class_name\":\"d3-node-body\",\n   \"input_ports\":[...],\n   \"output_ports\":[...],\n   \"x_pos\":264,\n   \"y_pos\":83.5,\n   \"inputPortsHeight\":20,\n   \"outputPortsHeight\":20,\n   \"height\":75,\n   \"width\":70\n}\n</code></pre> <ul> <li>Clone node: triggered when copying &amp; pasting a node<ul> <li>action: clone_node</li> <li>data:</li> </ul> </li> </ul> <pre><code>node: {\n   \"id\":\"56d30c83-3a08-4147-933e-b01d3c348ac1\",\n   \"label\":\"Append\",\n   \"type\":\"execution_node\",\n   \"operator_id_ref\":\"com.ibm.commonicons.operations.append\",\n   \"image\":\"/images/common_node_icons/operations/operation_append.svg\",\n   \"class_name\":\"d3-node-body\",\n   \"input_ports\":[...],\n   \"output_ports\":[...],\n   \"x_pos\":265,\n   \"y_pos\":177.5,\n   \"inputPortsHeight\":20,\n   \"outputPortsHeight\":20,\n   \"height\":75,\n   \"width\":70\n}\n</code></pre> <ul> <li>Clone comment: triggered when copying &amp; pasting a comment<ul> <li>action: clone_comment</li> <li>data:</li> </ul> </li> </ul> <pre><code>comment: {\n   \"id\":\"8c81aac7-ebe5-4f96-9d63-eabc22b09635\",\n   \"class_name\":\"d3-comment-rect\",\n   \"content\":\"\",\n   \"height\":42,\n   \"width\":175,\n   \"x_pos\":50,\n   \"y_pos\":50\n}\n</code></pre> <ul> <li>Clone node link: triggered when copying &amp; pasting two connected nodes<ul> <li>action: clone_node_link</li> <li>data:</li> </ul> </li> </ul> <p><pre><code>link: {\n   \"id\":\"12c4308e-f572-402a-8dd3-604d438539d4\",\n   \"class_name\":\"d3-data-link\",\n   \"srcNodeId\":\"2b1af6c2-f98b-4728-97b3-416d40224bce\",\n   \"trgNodeId\":\"b43fffe6-dc01-4d30-8b6d-abd977850a2e\",\n   \"type\":\"nodeLink\"\n},\nsourceNodeId: \"56d30c83-3a08-4147-933e-b01d3c348ac1\",\ntargetNodeId: \"815271f0-f4da-4793-ab8f-c4c32d3dd7e0\"\n</code></pre> Note that the link to be cloned has references to the original source and target nodes, while the sourceNodeId and targetNodeId are the new node ids for the copied nodes. The new nodes are not part of the model yet.</p> <ul> <li>clone comment link: triggered when copying&amp;pasting a comment and a node that are connected<ul> <li>action: clone_comment_link</li> <li>data:</li> </ul> </li> </ul> <p><pre><code>link: {\n   \"id\":\"12c4308e-f572-402a-8dd3-604d438539d4\",\n   \"class_name\":\"d3-comment-link\",\n   \"srcNodeId\":\"2b1af6c2-f98b-4728-97b3-416d40224bce\",\n   \"trgNodeId\":\"b43fffe6-dc01-4d30-8b6d-abd977850a2e\",\n   \"type\":\"commentLink\"\n},\nsourceNodeId: \"56d30c83-3a08-4147-933e-b01d3c348ac1\",\ntargetNodeId: \"815271f0-f4da-4793-ab8f-c4c32d3dd7e0\"\n</code></pre> Note that the link to be cloned has references to the original comment and target node, while the sourceNodeId and targetNodeId are the new ids for the copied comment and node. The new node and comment are not part of the model yet.</p>"},{"location":"02-canvas/03-callbacks/08-selection-change-handler/","title":"Selection Change Handler","text":"<p>This is an optional callback. It is triggered whenever the set of selected objects on the canvas changes either through selection or deselection.</p>"},{"location":"02-canvas/03-callbacks/08-selection-change-handler/#selectionchangehandler","title":"selectionChangeHandler","text":"<p><pre><code>    selectionChangeHandler(data)\n</code></pre> The callback contains a JavaScript object with the following format: <pre><code>{\n    \"selection\": [\n      \"id6PXRG57DGIV\"\n    ],\n    \"selectedNodes\": [\n      {\n        \"id\": \"id6PXRG57DGIV\",\n        \"type\": \"binding\",\n        \"operator_id_ref\": \"variablefile\",\n        \"output_ports\": [...],\n        \"input_ports\": [],\n        \"label\": \"DRUG1n\",\n        \"description\": \"\",\n        \"image\": \"\",\n        \"x_pos\": 96,\n        \"y_pos\": 219,\n        \"class_name\": \"canvas-node\",\n        \"decorations\": [],\n        \"parameters\": [],\n        \"messages\": [],\n        \"inputPortsHeight\": 0,\n        \"outputPortsHeight\": 20,\n        \"height\": 75,\n        \"width\": 70\n      }\n    ],\n    \"selectedComments\": [],\n    \"addedNodes\": [\n      {\n        \"id\": \"id6PXRG57DGIV\",\n        \"type\": \"binding\",\n        \"operator_id_ref\": \"variablefile\",\n        \"output_ports\": [...],\n        \"input_ports\": [],\n        \"label\": \"DRUG1n\",\n        \"description\": \"\",\n        \"image\": \"\",\n        \"x_pos\": 96,\n        \"y_pos\": 219,\n        \"class_name\": \"canvas-node\",\n        \"decorations\": [],\n        \"parameters\": [],\n        \"messages\": [],\n        \"inputPortsHeight\": 0,\n        \"outputPortsHeight\": 20,\n        \"height\": 75,\n        \"width\": 70\n      }\n    ],\n    \"addedComments\": [],\n    \"deselectedNodes\": [\n      {\n        \"id\": \"id2PZSCTRPRIJ\",\n        \"type\": \"execution_node\",\n        \"operator_id_ref\": \"derive\",\n        \"output_ports\": [...],\n        \"input_ports\": [...],\n        \"label\": \"Na_to_K\",\n        \"description\": \"\",\n        \"image\": \"\",\n        \"x_pos\": 219.01116943359375,\n        \"y_pos\": 162.3754425048828,\n        \"class_name\": \"canvas-node\",\n        \"decorations\": [],\n        \"parameters\": [],\n        \"messages\": [...],\n        \"inputPortsHeight\": 20,\n        \"outputPortsHeight\": 20,\n        \"height\": 75,\n        \"width\": 70\n      }\n    ],\n    \"deselectedComments\": [\n      {\n        \"id\": \"id42ESQA3VPXB\",\n        \"content\": \" comment 1\",\n        \"height\": 34,\n        \"width\": 128,\n        \"x_pos\": 132,\n        \"y_pos\": 103,\n        \"class_name\": \"canvas-comment-1\"\n      }\n    ],\n    previousPipelineId: \"123-456\",\n    selectedPipelineId: \"789-012\"\n}\n</code></pre></p> <ul> <li>selection: Array with ids of selected nodes and comments</li> <li>selectedNodes: Array of selected node objects</li> <li>selectedComments: Array of selected comment objects</li> <li>addedNodes: Array with node objects that were added to the selection</li> <li>addedComments: Array with comment objects that were added to the selection</li> <li>deselectedNodes: Array with node objects that were removed from the selection</li> <li>deselectedComments: Array with comment objects that were removed from the selection</li> <li>previousPipelineId: The ID of the Pipeline for the selected objects prior to the selection action</li> <li>selectedPipelineId: The ID of the Pipeline for the newly selected objects</li> </ul>"},{"location":"02-canvas/03-callbacks/09-click-action-handler/","title":"Click Action Handler","text":"<p>This callback is optional. You don\u2019t need to implement anything for it and it doesn\u2019t need to return anything to common canvas. It is called whenever the user clicks or double clicks on something on the canvas. You could use this callback to implement opening a properties dialog when the user double clicks a node.</p>"},{"location":"02-canvas/03-callbacks/09-click-action-handler/#clickactionhandler","title":"clickActionHandler","text":"<pre><code>    clickActionHandler(source)\n</code></pre> <p>The callback is called with a single <code>source</code> parameter which contain information about the object that was clicked.</p> <p>Note: When handling selections, it is recommended the selectionChangeHandler be used in preference to this handler when possible. selectionChangeHandler will notify you of all selection changes regardless of how they occur, such as when the user presses Ctrl+A on the keyboard to select all objects.</p> <p>At the moment only click/double-click/context-menu  on nodes and the canvas background are returned. It is provided with one parameter that looks like this:</p> <p><pre><code>    {\n      clickType: \"DOUBLE_CLICK\"\n      id: \"node_1\",\n      objectType: \"node\",\n      selectedObjectIds: [\"node_1\", \"node_2\"]\n    }\n</code></pre> The fields can be:</p> <ul> <li>clickType - This can be either \u201cSINGLE_CLICK\u201d, \u201cSINGLE_CLICK_CONTEXTMENU\u201d or \u201cDOUBLE_CLICK\u201d</li> <li>objectType - Can be either \u201cnode\u201d, \u201ccomment\u201d, \u201ccanvas\u201d or \u201cregion\u201d. \u201cregion\u201d is specified when the user pulls out a selection rectangle around a set of objects that might include nodes and comments.</li> <li>id - The ID of the node or comment clicked. Only provided when objectType is \u201cnode\u201d or \u201ccomment\u201d</li> <li>selectedObjectIds - An array of the selected objects (after the click action was performed).</li> </ul> <p>Note: \u201cSINGLE_CLICK_CONTEXTMENU\u201d indicates that the user performed a contextmenu gesture when doing the click such as pressing the right-side mouse button or a two finger tap on a trackpad.</p>"},{"location":"02-canvas/03-callbacks/10-action-label-handler/","title":"Action Label Handler","text":"<p>This is an optional handler you don\u2019t need to implement anything for it unless you want to. This callback allows your code to override the default tooltip text for the <code>Undo</code> and <code>Redo</code> buttons.</p>"},{"location":"02-canvas/03-callbacks/10-action-label-handler/#actionlabelhandler","title":"actionLabelHandler","text":"<pre><code>    actionLabelHandler(action)\n</code></pre> <p>The <code>actionLabelHandler</code> callback, when provided, is called for each action that is performed in common-canvas. The <code>action</code> object parameter, passed in to the callback, contains details of the action being performed. This callback should return either a string or null. If a string is returned it will be shown in the tooltip for the <code>Undo</code> button in the toolbar preceded by \u201cUndo:\u201d and the string will also appear in the tooltip for the <code>Redo</code> button (when appropriate) preceded by \u201cRedo:\u201d. If null is returned, common-canvas will display the default text for the <code>Undo</code> and <code>Redo</code> buttons.</p>"},{"location":"02-canvas/04-controller/","title":"Canvas Controller API","text":"<p>Your application code can programmatically perform many of the actions that the user can do in the common canvas using the Canvas Controller API. Note: See this section for differences between the structure of objects in the API and the schema.</p> <p>Also, this section discusses different techniques for calling the canvas controller API.</p> <p>In most cases within the API, the pipelineId parameter is optional. If pipelineId is omitted, the method will default to the pipeline that is currently displayed in the main canvas viewport.</p> <p>Warning 1: Do not alter the IDs of objects that currently exist on the canvas. Changing object IDs can cause internal problems, in particular with the command stack.</p> <p>Warning 2: When using external pipeline flows, Pipeline IDs must be globally unique identifiers.</p> <p>The API provides the following:</p>"},{"location":"02-canvas/04-controller/#pipeline-flow-methods","title":"Pipeline Flow methods","text":"<pre><code>// Loads the pipelineFlow document provided into common-canvas and displays it.\n// The document must conform to the pipelineFlow schema as documented in the\n// elyra-ai pipeline-schemas repo. Documents conforming to older versions may be\n// provided but they will be upgraded to the most recent version.\nsetPipelineFlow(flow)\n\n// Clears the pipleine flow and displays an empty canvas.\nclearPipelineFlow()\n\n// Returns the current pipelineFlow document in the latest version of the\n// pipelineFlow schema as documented in the elyra-ai pipeline-schemas repo.\ngetPipelineFlow()\n\n// Returns the current pipelineFlow document ID.\ngetPipelineFlowId()\n\n// Returns the ID of the primary pipeline from the pipelineFlow.\ngetPrimaryPipelineId()\n\n// Returns the external pipeline flow for the url passed in. The external\n// flow must have been loaded through some common canvas action for this\n// method to be able to return anything.\ngetExternalPipelineFlow(url)\n\n// Returns the internal format of all canvas data stored in memory by\n// common-canvas. Nodes, comments and links are returned in the internal\n// format.\ngetCanvasInfo()\n\n// Returns the IDs of the ancestor pipleline of the pipeline ID passed in.\ngetAncestorPipelineIds(pipelineId)\n\n// Removes all styles from nodes, comments and links. See the setObjectsStyle\n// and setLinkStyle methods for details on setting styles.\n// temporary - is a boolean that indicates whether temporary or permanent\n// styles should be removed.\nremoveAllStyles(temporary)\n\n// Specifies the new styles for objects that are not highlighted during\n// branch highlighting.\n// newStyle - is a style specification object. See wiki for details.\nsetSubdueStyle(newStyle)\n</code></pre>"},{"location":"02-canvas/04-controller/#pipeline-methods","title":"Pipeline methods","text":"<pre><code>// Returns the pipeline object for the pipeline Id passed in.\ngetPipeline(pipelineId)\n\n// Returns the ID of the pipeline object which is currently on display\n// in the canvas. Typically, this is the primary pipeline but will be\n// different if the user has navigated into one or more supernodes; in\n// which case it will be the ID of the pipeline at the level in the\n// supernode hierarchy that is currently on display.\ngetCurrentPipelineId()\n\n// Returns truty if the pipeline is external (that is it is part of an\n// external pipeline flow). Otherwise, return falsy to indicate the pipeline\n// is local.\nisPipelineExternal(pipelineId)\n\n// Returns the flow validation messages for the pipeline ID passed in.\ngetFlowMessages(pipelineId)\n\n// Returns a boolean to indicate whether there are any messages of\n// includeMsgsType in the pipeline identified by the pipeline ID passed in.\n// includeMsgsType - can be either \"error\" or \"warning\"\nisFlowValid(includeMsgTypes, pipelineId)\n\n// Rearranges the nodes in the canvas in the direction specified for the\n// pipeline ID passed in.\n// layoutDirection - can be \"horizontal\" or \"vertical\"\nautoLayout(layoutDirection, pipelineId)\n</code></pre>"},{"location":"02-canvas/04-controller/#palette-methods","title":"Palette methods","text":"<pre><code>// Loads the palette data as described in the palette schema in\n// elyra-ai pipeline-schemas repo. Any version can be loaded and it will be\n// upgraded to the latest version.\nsetPipelineFlowPalette(palette)\n\n// Clears the palette data from common-canvas.\nclearPaletteData()\n\n// Sets the loading text of the category. If set to a non-empty string the\n// category will show an InlineLoading control in the palette category div\n// with this text as the label. If set to falsey the palette category\n// will display as normal.\nsetCategoryLoadingText(categoryId, loadingText)\n\n// Sets the empty text of the category. If set to a non-empty string and the\n// category does not have any nodes, the palette will show a warning icon with\n// this text as a message under the category title when the category is opened.\n// This message will not be displayed if the field is set to falsey or if\n// nodetypes are added to the category.\nsetCategoryEmptyText(categoryId, emptyText)\n\n// Adds a new node into the palette:\n// nodeTypeObj - must conform to the style of node used by the palette as\n// described in the palette schema. See objects in nodeTypes array in the\n// palette schema:\n//  https://github.com/elyra-ai/pipeline-schemas/blob/master/common-canvas/palette/palette-v3-schema.json\n// category - is the name of the palette category where the node will be\n// added. If the category doesn't exist it will be created.\n// categoryLabel - Is an optional param. If a new category is created it will\n// be displayed with this label.\n// categoryDescription - Is an optional param. If a new category is created\n// it will be displayed with this description.\n// categoryImage - Is an optional param. The image displayed for the category provided as a\n// reference to an image or the image itself.\naddNodeTypeToPalette(nodeTypeObj, categoryId, categoryLabel, categoryDescription, categoryImage)\n\n// Adds an array of new node into the palette:\n// nodeTypeObjs - an array of nodetypes that must conform to the style of\n// nodes used by the palette as described in the palette schema. See objects\n// in nodeTypes array in the palette schema:\n//  https://github.com/elyra-ai/pipeline-schemas/blob/master/common-canvas/palette/palette-v3-schema.json\n// category - is the name of the palette category where the node will be\n// added. If the category doesn't exist it will be created.\n// categoryLabel - is an optional param. If a new category is created it will\n// be displayed with this label.\n// categoryImage - the image displayed for the category provided as a\n// reference to an image or the image itself.\n// categoryDescription - Is an optional param. If a new category is created\n// it will be displayed with this description.\n// categoryImage - Is an optional param. The image displayed for the category provided as a\n// reference to an image or the image itself.\naddNodeTypesToPalette(nodeTypeObjs, categoryId, categoryLabel, categoryDescription, categoryImage)\n\n// Removes nodetypes from a palette category\n// selObjectIds - an array of object IDs to identify the nodetypes to be\n// removed\n// categoryId - the ID of teh category from which the nodes will be removed\nremoveNodesFromPalette(selObjectIds, categoryId)\n\n// Returns the palette data document which will conform to the latest version\n// of the palette schema.\ngetPaletteData()\n\n// Returns the palette node identified by the operator ID passed in.\ngetPaletteNode(operatorId)\n\n// Returns the palette node identified by the node ID passed in.\ngetPaletteNodeById(nodeId)\n\n// Returns the category of the palette node identified by the operator passed in\ngetCategoryForNode(nodeOpIdRef)\n\n// Converts a node template from the format use in the palette (that conforms\n// to the schema) to the internal node format.\nconvertNodeTemplate(nodeTemplate)\n\n// Opens the palette category identified by the category ID passed in.\nopenPaletteCategory(categoryId)\n\n// Closes the palette category idetified by the category ID passed in.\nclosePaletteCategory(categoryId)\n\n// Opens all the palette categories.\nopenAllPaletteCategories()\n\n// Closes all the palette categories.\ncloseAllPaletteCategories()\n\n// Returns true or false to indicate whether a palette category is open or not.\nisPaletteCategoryOpen(categoryId)\n</code></pre>"},{"location":"02-canvas/04-controller/#selections-methods","title":"Selections methods","text":"<pre><code>// Sets the currently selected objects replacing any current selections.\n// newSelection - An array of object IDs for nodes and/or comments\n// pipelineId - Optional. The ID of the pipeline where the objects exist.\n// Selected objects can only be in one pipeline. If this parameter is omitted\n// it is assumed the selections will be for objects in the 'top-level' pipeline\n// being displayed.\nsetSelections(newSelection, pipelineId)\n\n// Clears all the current selections from the canvas.\nclearSelections()\n\n// Selects all the objects on the canvas.\nselectAll()\n\n// Returns an array of the IDs of the currently selected objects.\ngetSelectedObjectIds()\n\n// Returns the currently selected Nodes.\ngetSelectedNodes()\n\n// Returns the currently selected Comments.\ngetSelectedComments()\n\n// Returns the ID of the pipeline in which the currently selected objects\n// exist. Only one pipeline may contain selected objects.\ngetSelectedPipelineId()\n\n// Deletes all currently selected objects.\ndeleteSelectedObjects()\n\n// Returns true if the currently selected objects are all linked together.\n// This is used when deciding to creating a supernode.\nareSelectedNodesContiguous()\n</code></pre>"},{"location":"02-canvas/04-controller/#notification-messages-methods","title":"Notification messages methods","text":"<p>The notification panel is displayed by the user by clicking the notifications icon in the toolbar. Your application can display whatever messages it wants in the notification panel. See the Notification Messages Specification documentation for the structure of message objects. The contents of the notification panel can be managed using the methods below: <pre><code>// Overwrites the array of notification messages shown in the notification\n// panel.\n// newMessage - An array of messages (see getNotificationMessages)\nsetNotificationMessages(newMessages)\n\n// Deletes all notification messages shown in the notification panel.\nclearNotificationMessages()\n\n// Removes the notification messages from the given array of ids\ndeleteNotificationMessages(ids)\n\n// Returns the array of current notification messages. If the messageType is\n// provided only messages of that type will be returned. If messageType is\n// not provided, all messages will be returned. The format of a notification\n// message is an object with these fields:\n// {\n//   \"id\": string (Required),\n//   \"type\" : enum, oneOf [\"info\", \"success\", \"warning\", \"error\"] (Required),\n//   \"callback\": function, the callback function when a message is clicked (Required),\n//   \"title\": string (Optional),\n//   \"content\": string, html, JSX Object (Optional),\n//   \"timestamp\": string (Optional),\n//   \"closeMessage\": string (Optional)\n// }\ngetNotificationMessages(messageType)\n\n// Returns the maximum notification message type present in the current set\n// of notification messages. For this: (\"error\" &gt; \"warning\" &gt; \"success\" &gt; \"info\")\ngetNotificationMessagesMaxType()\n</code></pre></p>"},{"location":"02-canvas/04-controller/#node-and-comment-methods","title":"Node AND comment methods","text":"<p>In common-canvas nodes and comments are collectively known as objects. The following methods may be used to manage either collections of comments or nodes or a mixture of both. Note:</p> <ul> <li>See this sections if you are working with styles.</li> <li>See this section if you are working with decorations.</li> <li>See this section for differences between the structure of objects in the API and the schema. <pre><code>// Moves the objects identified in the data object which must be in the\n// pipeline identified by the pipeline ID.\n// data - A javascript object like this:\n// {\n//   nodes: []       // An array of node and comment IDs\n//   offsetX: number // Offset in pixels the objects will move in the X dir\n//   offsetY: number // Offset in pixels the objects will move in the Y dir\n// }\nmoveObjects(data, pipelineId)\n\n// Deletes the objects specified in objectIds array.\n// objectIds - An array of node and comment IDs\ndeleteObjects(objectIds, pipelineId)\n\n// Removes the links to and from the objects specified in the objectIds array.\n// objectIds - An array of node and comment IDs\ndisconnectObjects(objectIds, pipelineId)\n\n// Deletes the object specified by the id in the pipleine specified by\n// pipeline ID.\n// @Deprecated Use deleteNode or deleteComment as appropriate instead.\ndeleteObject(id, pipelineId)\n\n// Sets the style of the objects specified by pipelineObjectIds to be\n// the newStyle which will be either temporary or permanent.\n// pipelineObjectIds: This identified the objects to be styles. It is a\n// javascript object like this:\n//   {\n//     &lt;pipelineID_1&gt;: [\n//       &lt;objectID_1_1&gt;,\n//       &lt;objectID_1_2&gt;\n//     ],\n//     &lt;pipelineID_2&gt;: [\n//         &lt;objectID_2_1&gt;,\n//         &lt;objectID_2_2&gt;\n//     ]\n//   }\n// newStyles - This is a style specification. See the wiki for details.\n// temporary - A boolean to indicate if the style is serialized when\n//             getPipelineFlow() method is called or not.\nsetObjectsStyle(pipelineObjectIds, newStyle, temporary)\n\n// Sets the styles of multiple objects at once.\n// pipelineObjStyles - Specified the objects and the styles each should be\n// set to. It is a javascript array like this:\n//   [\n//     { pipelineId: &lt;pipelineId&gt;, objId: &lt;objectId&gt;, style: &lt;style_spec&gt;},\n//     { pipelineId: &lt;pipelineId&gt;, objId: &lt;objectId&gt;, style: &lt;style_spec&gt;},\n//     { pipelineId: &lt;pipelineId&gt;, objId: &lt;objectId&gt;, style: &lt;style_spec&gt;}\n//   ]\n// temporary - A boolean to indicate if the styles are serialized when\n//             getPipelineFlow() method is called or not.\nsetObjectsMultiStyle(pipelineObjStyles, temporary)\n</code></pre></li> </ul>"},{"location":"02-canvas/04-controller/#node-methods","title":"Node methods","text":"<p><pre><code>// Retuns an array of nodes for the pipeline specified by the pipelineId.\ngetNodes(pipelineId)\n\n// Returns a new node created from the data parameter in the pipeline\n// identified by the pipelineId.\n// The data parameter must contain:\n// nodeTemplate -  a node template from the palette. The nodeTemplate\n//                 can be retrieved from the palette using with Canvas\n//                 Controller methods: getPaletteNode or getPaletteNodeById.\n// offsetX - the x coordinate of the new node\n// offsetY - the y coordinate of the new node\ncreateNode(data, pipelineId)\n\n// Adds a new node into the pipeline specified by the pipelineId.\naddNode(node, pipelineId)\n\n// Creates a node using the data parameter provided in the pipeline specified\n// by pipelineId and adds the command to the command stack (so the user can\n// undo/redo the command). This will also cause the beforeEditActionHandler\n// and editActionHandler callbacks to be called.\n// The data parameter must contain:\n// nodeTemplate -  a node template from the palette. The nodeTemplate\n//                 can be retrieved from the palette using with Canvas\n//                 Controller methods: getPaletteNode or getPaletteNodeById.\n// offsetX - the x coordinate of the new node\n// offsetY - the y coordinate of the new node\n//\n// If pipelineId is omitted the node will be created in the current\n// \"top-level\" pipeline.\ncreateNodeCommand(data, pipelineId)\n\n// Deletes the node specified.\n// nodeId - The ID of the node\n// pipelineId - The ID of the pipeline\ndeleteNode(nodeId, pipelineId)\n\n// Sets the node properties\n// nodeId - The ID of the node\n// properties - An object containing properties to be overriden in the node\n// pipelineId - The ID of the pipeline\nsetNodeProperties(nodeId, properties, pipelineId)\n\n// Sets the node parameters\n// nodeId - The ID of the node\n// parameters - An array of parameters\n// pipelineId - The ID of the pipeline\nsetNodeParameters(nodeId, parameters, pipelineId)\n\n// Sets the node UI parameters\n// nodeId - The ID of the node\n// parameters - An array of UI parameters\n// pipelineId - The ID of the pipeline\nsetNodeUiParameters(nodeId, uiParameters, pipelineId)\n\n// Sets the node messages\n// nodeId - The ID of the node\n// messages - An array of messages\n// pipelineId - The ID of the pipeline\nsetNodeMessages(nodeId, messages, pipelineId)\n\n// Sets a single message on a node\n// nodeId - The ID of the node\n// message - A message\n// pipelineId - The ID of the pipeline\nsetNodeMessage(nodeId, message, pipelineId)\n\n// Sets the lable for a node\n// nodeId - The ID of the node\n// ndeLabel - The label\n// pipelineId - The ID of the pipeline\nsetNodeLabel(nodeId, newLabel, pipelineId)\n\n// Sets the class name to newClassName of the nodes identified by nodeIds\n// array in the pipleine specified by pipeline ID. The class name will be\n// applied to the node body path.\nsetNodesClassName(nodeIds, newClassName, pipelineId)\n\n// Sets the decorations on a node. The decorations array passed in\n// will replace any decorations currently applied to the node.\n// nodeId - The ID of the node\n// newDecorations - An array of decorations. See Wiki for details.\n// pipelineId - The ID of the pipeline\nsetNodeDecorations(nodeId, newDecorations, pipelineId)\n\n// Sets the input ports on a node. The inputs array of ports provided will\n// replace any input ports for a node.\n// nodeId - The ID of the node\n// inputs - An array of input port objects.\n// pipelineId - The ID of the pipeline\nsetNodeInputPorts(nodeId, inputs, pipelineId)\n\n// Sets the output ports on a node. The outputs array of ports provided will\n// replace any output ports for a node.\n// nodeId - The ID of the node\n// outputs - An array of output port objects.\n// pipelineId - The ID of the pipeline\nsetNodeOutputPorts(nodeId, outputs, pipelineId)\n\n// Sets the decorations of multiple nodes at once. The decorations array\n// passed in will replace any decorations currently applied to the nodes.\n// pipelineNodeDecorations - Specifies the nodes and their decorations.\n// It is a JavaScript array like this:\n//   [\n//     { pipelineId: &lt;pipelineId&gt;, nodeId: &lt;nodeId&gt;, decorations: &lt;decoration_spec_array&gt;},\n//     { pipelineId: &lt;pipelineId&gt;, nodeId: &lt;nodeId&gt;, decorations: &lt;decoration_spec_array&gt;},\n//     { pipelineId: &lt;pipelineId&gt;, nodeId: &lt;nodeId&gt;, decorations: &lt;decoration_spec_array&gt;}\n//   ]\nsetNodesMultiDecorations(pipelineNodeDecorations)\n\n// Sets the input port label on a node\n// nodeId - The ID of the node\n// portId - The ID of the input port\n// newLabel - The label\n// pipelineId - The ID of the pipeline\nsetInputPortLabel(nodeId, portId, newLabel, pipelineId)\n\n// Sets the output port label on a node\n// nodeId - The ID of the node\n// portId - The ID of the output port\n// newLabel - The label\n// pipelineId - The ID of the pipeline\nsetOutputPortLabel(nodeId, portId, newLabel, pipelineId)\n\n// Gets a node\n// nodeId - The ID of the node\n// pipelineId - The ID of the pipeline\ngetNode(nodeId, pipelineId)\n\n// Gets the UI parameters for a node\n// nodeId - The ID of the node\n// pipelineId - The ID of the pipeline\ngetNodeUiParameters(nodeId, pipelineId)\n\n// Gets the supernodes for a pipeline.\n// pipelineId - The ID of the pipeline\ngetSupernodes(pipelineId)\n\n// Returns supernode ID that has a subflow_ref to the given pipelineId.\ngetSupernodeObjReferencing(pipelineId)\n\n// Gets the messages for a node\n// nodeId - The ID of the node\n// pipelineId - The ID of the pipeline\ngetNodeMessages(nodeId, pipelineId)\n\n// Gets the array of input ports for the node or null if the node ID is\n// not recognized.\n// nodeId - The ID of the node\n// pipelineId - The ID of the pipeline\ngetNodeInputPorts(nodeId, pipelineId)\n\n// Gets the array of output ports for the node or null if the node ID is\n// not recognized.\n// nodeId - The ID of the node\n// pipelineId - The ID of the pipeline\ngetNodeOutputPorts(nodeId, pipelineId)\n\n// Gets a message for a specific control for a node\n// nodeId - The ID of the node\n// controlName - The control name\n// pipelineId - The ID of the pipeline\ngetNodeMessage(nodeId, controlName, pipelineId)\n\n// Gets an array of decorations for a node\n// nodeId - The ID of the node\n// pipelineId - The ID of the pipeline\ngetNodeDecorations(nodeId, pipelineId)\n\n// Gets the class name associated with the node specified by nodeId in the\n// pipeline specified by pipelineId.\ngetNodeClassName(nodeId, pipelineId)\n\n// Gets the style spcification (see Wiki) for a node\n// nodeId - The ID of the node\n// temporary - A boolean to indicate if the style is serialized when\n//             getPipelineFlow() method is called or not.\n// pipelineId - The ID of the pipeline\ngetNodeStyle(nodeId, temporary, pipelineId)\n\n// Returns an array of nodes that are for the branch(es) that the nodes,\n// identified by the node IDs passed in, are within.\n// nodeIds - An array of node Ids\n// pipelineId - The ID of the pipeline where the nodes exist\ngetBranchNodes(nodeIds, pipelineId)\n\n// Returns an array of nodes that are upstream from the nodes\n// identified by the node IDs passed in.\n// nodeIds - An array of node Ids\n// pipelineId - The ID of the pipeline where the nodes exist\ngetUpstreamNodes(nodeIds, pipelineId)\n\n// Returns an array of nodes that are downstream from the nodes\n// identified by the node IDs passed in.\n// nodeIds - An array of node Ids\n// pipelineId - The ID of the pipeline where the nodes exist\ngetDownstreamNodes(nodeIds, pipelineId)\n\n// Returns a boolean to indicate whether the supernode is expanded in place.\n// nodeId - The ID of the node\n// pipelineId - The ID of the pipeline\nisSuperNodeExpandedInPlace(nodeId, pipelineId)\n\n// Sets the label, for the node identified, to edit mode, provided the node\n// label is editable. This allows the user to edite the label text.\nsetNodeLabelEditingMode(nodeId, pipelineId)\n\n// Sets the decoration label, for the decoration in the node identified, to edit\n// mode, provided the node label is editable. This allows the user to edit the\n// label text.\nsetNodeDecorationLabelEditingMode(decId, nodeId, pipelineId)\n</code></pre> The format of the message object is described in Pipeline Flow UI schema</p>"},{"location":"02-canvas/04-controller/#comment-methods","title":"Comment methods","text":"<pre><code>// Returns the comments from the pipeline.\n// pipelineId - The ID of the pipeline\ngetComments(pipelineId)\n\n// Returns a comment from the pipeline.\n// comId - The ID of the comment\n// pipelineId - The ID of the pipeline\ngetComment(comId, pipelineId)\n\n// Returns a position object which indicates the position of where a new\n// comment should be placed in a situation where the mouse position cannot be\n// used (e.g. the toolbar button was clicked).\n// pipelineId - The ID of the pipeline\ngetNewCommentPosition(pipelineId)\n\n// Creates a comment for the pipeline.\n// source - Input data\n// pipelineId - The ID of the pipeline\ncreateComment(source, pipelineId)\n\n// Adds a comment to the pipeline.\n// data - the data describing the comment\n// pipelineId - The ID of the pipeline\naddComment(data, pipelineId)\n\n// Edits a comment with the data.\n// data - the comment\n// pipelineId - The ID of the pipeline\neditComment(data, pipelineId)\n\n// Sets the properties in the comment identified by the commentId. The\n// commentProperties is an object containing one or more properties that will\n// replace the corresponding properties in the comment. For example: if\n// commentProperties is { x_pos: 50, y_pos: 70 } the comment\n// will be set to that position.\nsetCommentProperties(commentId, commentProperties, pipelineId)\n\n// Sets the class name to newClassName of the comments identified by commentIds\n// array in the pipleine specified by pipeline ID. The class name will be\n// applied to the comment body path.\nsetCommentsClassName(commentIds, newClassName, pipelineId)\n\n// Deletes a comment\n// comId - The ID of the comment\n// pipelineId - The ID of the pipeline\ndeleteComment(comId, pipelineId)\n\n// Gets the class name associated with the comment specified by commentId in the\n// pipeline specified by pipelineId.\ngetCommentClassName(commentId, pipelineId)\n\n// Gets the style spcification (see Wiki) for a comment\n// commentId - The ID of the node\n// temporary - A boolean to indicate if the style is serialized when\n//             getPipelineFlow() method is called or not.\n// pipelineId - The ID of the pipeline\ngetCommentStyle(commentId, temporary, pipelineId)\n\n// Hides all comments on the canvas.\nhideComments()\n\n// Shows all comments on the canvas - if they were previously hiding.\nshowComments()\n\n// Returns true if comments are currently hiding.\nisHidingComments()\n\n// Sets the comment identified, to edit mode so the user can\n// edit the comment.\nsetCommentEditingMode(commentId, pipelineId)\n</code></pre>"},{"location":"02-canvas/04-controller/#link-methods","title":"Link methods","text":"<pre><code>// Gets a link\n// linkId - The ID of the link\n// pipelineId - The ID of the pipeline\ngetLink(linkId, pipelineId)\n\n// Returns an array of link objects for the pipelineId passed in.\n// pipelineId - The ID of the pipeline\ngetLinks(pipelineId)\n\n// Sets the properties in the link identified by the linkId. The\n// linkProperties is an object containing one or more properties that will\n// replace the corresponding properties in the link. For exam`ple: if\n// linkProperties is { trgNodeId: \"123\", trgNodePortId: \"789\" } the target\n// node ID will be set to \"123\" and the target port ID set to \"789\".\nsetLinkProperties(linkId, linkProperties, pipelineId)\n\n// Sets the source properties in the data link identified by the linkId. The\n// srcNodeId and srcNodePortId will be set to the values provided. If\n// srcNodePortId is set to null the current srcNodePortId will be removed\n// from the link. Also, if the link has a srcPos property (because its\n// source end is detached) that will be removed.\nsetNodeDataLinkSrcInfo(linkId, srcNodeId, srcNodePortId, pipelineId)\n\n// Sets the target properties in the data link identified by the linkId. The\n// trgNodeId and trgNodePortId will be set to the values provided. If\n// trgNodePortId is set to null the current trgNodePortId will be removed\n// from the link. Also, if the link has a trgPos property (because its\n// target end is detached) that will be removed.\nsetNodeDataLinkTrgInfo(linkId, trgNodeId, trgNodePortId, pipelineId)\n\n// Gets a node to node data link\n// srcNodeId - The ID of the source node\n// srcNodePortId - The ID of the source node port\n// trgNodeId - The ID of the target node\n// trgNodePortId - The ID of the target node port\n// pipelineId - The ID of the pipeline\ngetNodeDataLinkFromInfo(srcNodeId, srcNodePortId, trgNodeId, trgNodePortId, pipelineId)\n\n// Gets a comment to node link\n// id1 - The ID of the comment\n// id2 - The ID of the node\n// pipelineId - The ID of the pipeline\ngetCommentLinkFromInfo(id1, id2, pipelineId)\n\n// Gets a node to node association link\n// id1 - The ID of one of the node\n// id2 - The ID of one of the node\n// pipelineId - The ID of the pipeline\ngetNodeAssocLinkFromInfo(id1, id2, pipelineId)\n\n// Adds links to a pipeline\n// linkList - An array of links\n// pipelineId - The ID of the pipeline\naddLinks(linkList, pipelineId)\n\n// Deletes a link\n// source - An array of links\n// pipelineId - The ID of the pipeline\ndeleteLink(link, pipelineId)\n\n// Creates node to node links\n// data - Data describing the links\n// pipelineId - The ID of the pipeline\ncreateNodeLinks(data, pipelineId)\n\n// Creates comment links\n// data - Data describing the links\n// pipelineId - The ID of the pipeline\ncreateCommentLinks(data, pipelineId)\n\n// Sets the class name to newClassName of the links identified by linkIds\n// array in the pipleine specified by pipeline ID. The class name will be\n// applied to the link line path.\nsetLinksClassName(linkIds, newClassName, pipelineId)\n\n// Sets the style of the links specified by pipelineLinkIds to be\n// the newStyle which will be either temporary or permanent.\n// pipelineLinkIds - This identifies the objects to be styles. It is a\n// javascript object like this:\n//   {\n//     &lt;pipelineID_1&gt;: [\n//       &lt;linkID_1_1&gt;,\n//       &lt;linkID_1_2&gt;\n//     ],\n//     &lt;pipelineID_2&gt;: [\n//         &lt;linkID_2_1&gt;,\n//         &lt;linkID_2_2&gt;\n//     ]\n//   }\n// newStyle - This is a style specification. See the wiki for details.\n// temporary - A boolean to indicate if the style is serialized when\n//             getPipelineFlow() method is called or not.\nsetLinksStyle(pipelineLinkIds, newStyle, temporary)\n\n// Sets the styles of multiple links at once.\n// pipelineObjStyles - Specified the links and the styles each should be\n// set to. It is a javascript array like this:\n//   [\n//     { pipelineId: &lt;pipelineId&gt;, objId: &lt;linkId&gt;, style: &lt;style_spec&gt;},\n//     { pipelineId: &lt;pipelineId&gt;, objId: &lt;linkId&gt;, style: &lt;style_spec&gt;},\n//     { pipelineId: &lt;pipelineId&gt;, objId: &lt;linkId&gt;, style: &lt;style_spec&gt;}\n//   ]\n// temporary - A boolean to indicate if the styles are serialized when\n//             getPipelineFlow() method is called or not.\nsetLinksMultiStyle(pipelineObjStyles, temporary)\n\n// Gets the class name associated with the link specified by linkId in the\n// pipeline specified by pipelineId.\ngetLinkClassName(linkId, pipelineId)\n\n// Returns the style specification for a link.\n// linkIds - An array of links\n// temporary - A boolean to indicate if the style is serialized when\n//             getPipelineFlow() method is called or not.\n// pipelineId - The ID of the pipeline\ngetLinkStyle(linkId, temporary, pipelineId)\n\n// Sets the decorations on a link. The decorations array passed in\n// will replace any decorations currently applied to the link.\n// linkId - The ID of the link\n// newDecorations - An array of decorations. See Wiki for details.\n// pipelineId - The ID of the pipeline\nsetLinkDecorations(linkId, newDecorations, pipelineId)\n\n// Sets the decorations of multiple links at once. The decorations array\n// passed in will replace any decorations currently applied to the links.\n// pipelineLinkDecorations - Specifies the links and their decorations.\n// It is a javascript array like this:\n//   [\n//     { pipelineId: &lt;pipelineId&gt;, linkId: &lt;linkId&gt;, decorations: &lt;decoration_spec_array&gt;},\n//     { pipelineId: &lt;pipelineId&gt;, linkId: &lt;linkId&gt;, decorations: &lt;decoration_spec_array&gt;},\n//     { pipelineId: &lt;pipelineId&gt;, linkId: &lt;linkId&gt;, decorations: &lt;decoration_spec_array&gt;}\n//   ]\nsetLinksMultiDecorations(pipelineLinkDecorations)\n\n// Gets an array of decorations for a link\n// linkId - The ID of the link\n// pipelineId - The ID of the pipeline\ngetLinkDecorations(linkId, pipelineId)\n\n// Sets the decoration label, for the decoration in the link identified, to edit\n// mode provided the link label is editable. This allows the user to edit the\n// label text.\nsetLinkDecorationLabelEditingMode(decId, linkId, pipelineId)\n</code></pre>"},{"location":"02-canvas/04-controller/#breadcrumbs-methods","title":"Breadcrumbs methods","text":"<pre><code>// Returns the current array of breadcrumbs. There will one breadcrumb object\n// for each level of supernode that the user has navigated into. This array\n// can be used to display breadcrumbs to the user to show where they are\n// within the navigation hierarchy within common canvas.\ngetBreadcrumbs()\n\n// Returns the last breadcrumb which represents the level with supernode\n// hierarchy that the user has currently navigated to.\ngetCurrentBreadcrumb()\n</code></pre>"},{"location":"02-canvas/04-controller/#branch-highlight-methods","title":"Branch Highlight methods","text":"<pre><code>// Highlights the branch(s) (both upstream and downstream) from the node\n// IDs passed in and returns the highlighted object Ids.\n// nodeIds - An array of node Ids\n// pipelineId - The ID of the pipeline\nhighlightBranch(nodeIds, pipelineId)\n\n// Highlights the upstream nodes from the node IDs passed in\n// and returns the returns the highlighted object Ids.\n// nodeIds - An array of node Ids\n// pipelineId - The ID of the pipeline\nhighlightUpstream(nodeIds, pipelineId)\n\n// Highlights the downstream nodes from the node IDs passed in\n// and returns highlighted object Ids.\n// nodeIds - An array of node Ids\n// pipelineId - The ID of the pipeline\nhighlightDownstream(nodeIds, pipelineId)\n</code></pre>"},{"location":"02-canvas/04-controller/#operational-methods","title":"Operational methods","text":"<p>These are general purpose methods for operation of the common-canvas components:</p>"},{"location":"02-canvas/04-controller/#logging-methods","title":"Logging methods","text":"<pre><code>// Returns a Boolean to indicate whether canvas logging is switched on or off.\ngetLoggingState()\n\n// Sets canvas logging based on the Boolean passed in.\nsetLoggingState(state)\n</code></pre>"},{"location":"02-canvas/04-controller/#palette-methods_1","title":"Palette methods","text":"<pre><code>// Opens the palette\nopenPalette()\n\n// Closes the palette\nclosePalette()\n\n// Returns true if the palette is currently open\nisPaletteOpen()\n</code></pre>"},{"location":"02-canvas/04-controller/#context-menu-methods","title":"Context menu methods","text":"<pre><code>// Opens the context menu\nopenContextMenu(menuDef)\n\n// Closes the context menu\ncloseContextMenu()\n</code></pre>"},{"location":"02-canvas/04-controller/#notification-panel-methods","title":"Notification Panel methods","text":"<pre><code>// Opens the notification panel\nopenNotificationPanel()\n\n// Closes the notification panel\ncloseNotificationPanel()\n\n// Either opens or closes the notifictaion panel based on its current status\ntoggleNotificationPanel()\n</code></pre>"},{"location":"02-canvas/04-controller/#right-flyout-methods","title":"Right Flyout methods","text":"<pre><code>// Returns a boolean to indicate if the right flyout is open or not\nisRightFlyoutOpen()\n</code></pre>"},{"location":"02-canvas/04-controller/#top-panel-methods","title":"Top panel methods","text":"<pre><code>// Returns a boolean to indicate if the top pnel is open or not\nisTopPanelOpen()\n</code></pre>"},{"location":"02-canvas/04-controller/#bottom-panel-methods","title":"Bottom panel methods","text":"<pre><code>// Returns a boolean to indicate if the bottom panel is open or not\nisBottomPanelOpen()\n\n// Sets the height of the bottom panel in pixels. This can be called\n// immediately after the CanvasController has been created, if the bottom\n// panel should be displayed at a specific height when it first opens.\nsetBottomPanelHeight(height)\n</code></pre>"},{"location":"02-canvas/04-controller/#canvaspipeline-navigation-methods","title":"Canvas/pipeline navigation methods","text":"<pre><code>// Displays a pipeline (identified by the pipelineId passed in). This must be\n// one of the pipelines referenced by the current set of breadcrumbs. It\n// cannot be used to open a new pipeline outside the current set of breadcruumbs.\ndisplaySubPipeline(pipelineId)\n\n// Displays a pipeline for the supernode (identifid by the supernodeId\n// parameter) in the pipeline (identifid by the pipelineId parameter). For\n// correct breadcrumb generation this pipeline should be the one in the last\n// of the current set of breadcrumbs. That is, the pipeline currently shown\n// \"full page\" in the canvas.\ndisplaySubPipelineForSupernode(supernodeId, pipelineId)\n\n// Displays full-page the previous pipeline from the one currently being displayed\ndisplayPreviousPipeline()\n</code></pre>"},{"location":"02-canvas/04-controller/#command-stack-interaction-methods","title":"Command Stack interaction methods","text":"<pre><code>// Adds the command object to the command stack which will cause the\n// do() method of the command to be called.\ndo(command)\n\n// Calls the undo() method of the next available command on the command\n// stack that can be undone, if one is available.\nundo()\n\n// Calls the redo() method of the next available command on the command\n// stack that can be redone, if one is available.\nredo()\n\n// Returns true if there is a command on the command stack\n// available to be undone.\ncanUndo()\n\n// Returns true if there is a command on the command stack\n// available to be redone.\ncanRedo()\n\n// Returns a string which is the label that descibes the next undoable\n// command.\ngetUndoLabel()\n\n// Returns a string which is the label that descibes the next redoable\n// command.\ngetRedoLabel()\n\n// Clears the command stack of all currently stored commands.\nclearCommandStack()\n</code></pre>"},{"location":"02-canvas/04-controller/#zoom-methods","title":"Zoom methods","text":"<pre><code>// Centers the canvas contents and zooms in\nzoomIn()\n\n// Centers the canvas contents and zooms out\nzoomOut()\n\n// Zooms the canvas contents to fit within the viewport\nzoomToFit()\n\n// Changes the zoom amounts for the canvas. This method does not alter the\n// pipelineFlow document. zoomObject is an object with three fields:\n// x: Is the horizontal translate amount which is a number indicating the\n//    pixel amount to move. Negative left and positive right\n// y: Is the vertical translate amount which is a number indicating the\n//    pixel amount to move. Negative up and positive down.\n// k: is the scale amount which is a number greater than 0 where 1 is the\n//    default scale size.\nzoomTo(zoomObject)\n\n// Increments the translation of the canvas by the x and y increment\n// amounts. The optional animateTime parameter can be provided to animate the\n// movement of the canvas. It is a time for the animation in milliseconds.\n// If omitted the movement happens immediately.\ntranslateBy(x, y, animateTime)\n\n// Returns the current zoom object for the currently displayed canvas or null\n// if the canvas is not yet rendered for the first time.\ngetZoom()\n\n// Returns a zoom object required to pan the objects (nodes and/or comments\n// and/or links) identified by the objectIds array to 'reveal' the objects\n// in the viewport. Returns null if no nodes, comments or links can be found\n// using the IDs passed in. Note: node, comment and link IDs must be unique.\n// The zoom object returned can be provided to the CanvasController.zoomTo()\n// method to perform the zoom/pan action.\n// If the xPos and yPos parameters are provided it will return a zoom object\n// to pan the center of the objects specified, to a location where, xPos\n// is the percentage of the viewport width and yPos is the percentage of the\n// viewport height. So if you want the center of the objects specified to be\n// in the center of the viewport set xPos to 50 and yPos to 50.\n// If the xPos and yPos parameters are undefined (omitted) and all the\n// objects are currently fully within the canvas viewport, this method will\n// return null. This can be used to detect whether the objects are fully\n// visible or not.\n// If the xPos and yPos parameters are undefined and the objects are outside\n// the viewport, a zoom object will be returned that can be used to zoom them\n// so they appear at the nearest side of the viewport to where they are\n// currently positioned.\n// The zoom object retuurned has three fields:\n// x: Is the horizontal translate amount which is a number indicating the\n//    pixel amount to move. Negative left and positive right\n// y: Is the vertical translate amount which is a number indicating the\n//    pixel amount to move. Negative up and positive down.\n// k: is the scale amount which is a number greater than 0 where 1 is the\n//    default scale size.\n// Parameters:\n// objectIds - An array of nodes and/or comment IDs.\n// xPos - Optional. Can be set to percentage offset of the viewport width.\n// yPos - Optional. Can be set to percentage offset of the viewport height.\ngetZoomToReveal(objectIds, xPos, yPos)\n\n// Clears any saved zoom values stored in local storage. This means\n// newly opened flows will appear with the default zoom. This method\n// is only applicable when the `enableSaveZoom` config parameter is\n// set to \"LocalStorage\".\nclearSavedZoomValues()\n</code></pre>"},{"location":"02-canvas/04-controller/01-Styling-Objects/","title":"Styling Canvas Objects","text":"<p>There are multiple was to specify the styles for the objects common-canvas displays:</p> <ul> <li>A class name can be provided for nodes either within the pipelineFlow document or</li> <li>The common-canvas default styes can be overriden within your CSS or SCSS file</li> </ul> <p>For more precise styling of objects the style specification object can be used to provide a number of styles to common canvas to set the inline styles on numerous elements of an object. For example, a node is made up of: a selection outline; a node body (rectangle); an image, a label etc.</p> <p>Style specifications may be applied to common-canvas objects using the following Canvas Controller methods: <pre><code>setObjectsStyle()\nsetObjectsMultiStyle()\nsetLinksStyle()\nsetLinksMultiStyle()\nsetSubdueStyle()\n</code></pre> and may be retrieved for objects using: <pre><code>getNodeStyle()\ngetCommentStyle()\ngetLinkStyle()\n</code></pre></p> <p>The style spec for a node can set the styles for all these elements in one shot. Here is a template of a style spec for a node: <pre><code>{\n    body: { default: &lt;css_snippet&gt;, hover: &lt;css_snippet&gt; },\n    image: { default: &lt;css_snippet&gt; },\n    label: { default: &lt;css_snippet&gt; },\n    selection_outline: { default: &lt;css_snippet&gt; }\n}\n ```\nAnd here is a real example:\n```js\n{\n    body: {\n        default: \"fill: coral; stroke: red;\",\n        hover: \"fill: cornflowerblue; stroke: blue;\"\n    }\n};\n</code></pre></p> <p>Here is a template for styling a comment:</p> <pre><code>{\n    body: { default: &lt;css_snippet&gt;, hover: &lt;css_snippet&gt; },\n    text: { default: &lt;css_snippet&gt; },\n    selection_outline: { default: &lt;css_snippet&gt; },\n}\n</code></pre> <p>And here is a template for styling a link: <pre><code>{\n    line: { default: &lt;css_snippet&gt; , hover: &lt;css_snippet&gt;  }\n}\n</code></pre></p> <ul> <li><code>&lt;css_snippet&gt;</code> - is a string containing any CSS code that can be added inline to an SVG object. That means, for example, you need to use fill and stroke for colors etc  It is recommended NOT to change the sizes of text fonts.</li> </ul> <p>The CSS will be applied to the element of the object specified, either as the default inline style or as the style when the pointer hovers over the object.</p> <p>When a hover style is applied to a graphical element it is applied in addition to the default style so there is no need to repeat styles in the hover <code>&lt;css_snippet&gt;</code> because they will augment the default style.</p> <p>Because styles are applied as in-line styles they will override any styles provided in your application\u2019s CSS and specified to common-canvas through the class_name field of canvas objects.</p> <p>If the <code>&lt;css_snippet&gt;</code> is specified as null the current style will be removed from the specified element of the object.</p> <p>Finally, styles can be applied to your nodes, comments and links as either temporary or permanent styles by specifying the <code>temporary</code> boolean in the API methods. A temporary style is just applied for the duration of the session and are not persisted. You should use <code>temporary=true</code> styles that represent transient attributes of an object that should not be persisted in the pipelineFlow document. Use <code>temporary=false</code> styles for styles that you want to persist in the pipelineFlow document.</p>"},{"location":"02-canvas/04-controller/02-Decorations/","title":"Decorations","text":"<p>Your application can add Decorations \u2013 additional icons, text labels, shapes or JSX objects \u2013 to nodes or links in the canvas to indicate special status or attributes of the node or link. Decorations can be static (for display only) or interactive (a hotspot) so the user can click them to initiate some action.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#adding-decorations","title":"Adding Decorations","text":"<p>Decorations can be added to the nodes and/or links in four different ways:</p> <ol> <li> <p>By using the following <code>CanvasController</code> methods:     <pre><code>setNodeDecorations(nodeId, newDecorations, pipelineId)\nsetNodesMultiDecorations(pipelineNodeDecorations)\nsetLinkDecorations(linkId, newDecorations, pipelineId)\nsetLinksMultiDecorations(pipelineLinkDecorations)\n</code></pre>     and can be retrieved using these <code>CanvasController</code> methods:     <pre><code>getNodeDecorations(nodeId, pipelineId)\ngetLinkDecorations(linkId, pipelineId)\n</code></pre>     See the CanvasController API documentation for more details.</p> </li> <li> <p>Node decorations can be specified in the nodeLayout object in the canvas config. Decorations specified in this way are applied to all nodes on the canvas.</p> </li> <li> <p>Decorations can be applied to, and retrieved from, nodes or links in the pipelineFlow in the <code>app_data.ui_data</code> section for the node or link. (Note: JSX objects are not supported in the pipelineFlow document).</p> </li> <li> <p>Decorations can be returned in the layout information returned from the layoutHandler  CommonCanvas callback method.</p> </li> </ol>"},{"location":"02-canvas/04-controller/02-Decorations/#specification","title":"Specification","text":"<p>The decoration specification used by these methods and the pipelineFlow is a JavaScript object with these possible properties:</p> <p>These properties are applicable to an image decoration: <pre><code>     {\n       id: &lt;decoration_id&gt;,\n       image: &lt;image_url&gt;,\n       position: &lt;position&gt;,\n       distance: &lt;number&gt;\n       x_pos: &lt;number&gt;,\n       y_pos: &lt;number&gt;,\n       width: &lt;number&gt;,\n       height: &lt;number&gt;,\n       hotspot: &lt;boolean&gt;,\n       class_name: &lt;class_name&gt;,\n       outline: &lt;boolean&gt;,\n       tooltip: &lt;string&gt;,\n       temporary: &lt;boolean&gt;\n     }\n</code></pre> These properties are applicable to a label decoration: <pre><code>     {\n       id: &lt;decoration_id&gt;,\n       label: &lt;string&gt;,\n       label_editable: &lt;boolean&gt;,\n       label_align: &lt;enum&gt;,\n       label_single_line: &lt;boolean&gt;,\n       label_max_characters: &lt;number&gt;,\n       label_allow_return_key: &lt;boolean&gt;,\n       position: &lt;position&gt;,\n       distance: &lt;number&gt;\n       x_pos: &lt;number&gt;,\n       y_pos: &lt;number&gt;,\n       width: &lt;number&gt;,\n       height: &lt;number&gt;,\n       hotspot: &lt;boolean&gt;,\n       class_name: &lt;class_name&gt;,\n       tooltip: &lt;string&gt;,\n       temporary: &lt;boolean&gt;\n     }\n</code></pre> These properties are applicable to a shape decoration: <pre><code>     {\n       id: &lt;decoration_id&gt;,\n       path: &lt;string&gt;,\n       position: &lt;position&gt;,\n       distance: &lt;number&gt;\n       x_pos: &lt;number&gt;,\n       y_pos: &lt;number&gt;,\n       width: &lt;number&gt;,\n       height: &lt;number&gt;,\n       hotspot: &lt;boolean&gt;,\n       class_name: &lt;class_name&gt;,\n       tooltip: &lt;string&gt;,\n       temporary: &lt;boolean&gt;\n     }\n</code></pre> These properties are applicable to a JSX decoration: <pre><code>     {\n       id: &lt;decoration_id&gt;,\n       jsx: &lt;JSX Object&gt;,\n       position: &lt;position&gt;,\n       distance: &lt;number&gt;\n       x_pos: &lt;number&gt;,\n       y_pos: &lt;number&gt;,\n       width: &lt;number&gt;,\n       height: &lt;number&gt;,\n       hotspot: &lt;boolean&gt;,\n       class_name: &lt;class_name&gt;,\n       tooltip: &lt;string&gt;,\n     }\n</code></pre></p> <p>where:</p>"},{"location":"02-canvas/04-controller/02-Decorations/#id","title":"id","text":"<p>A unique ID for the decoration within the context of the node or link to which the decorator is attached.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#image","title":"image","text":"<p>A reference to an image to display for the decoration. If an image is specified the image is displayed within an outline rectangle unless <code>outline</code> is set to false. The image should be a reference to your image like: \u201c/images/decorations/zoom-in_32.svg\u201d. Do not set label or path or jsx when this field is set.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#path","title":"path","text":"<p>An SVG shape that is displayed using this string as it\u2019s SVG path. eg. \u201cM 0 0 L 10 10 -10 10 Z\u201d could be specified to draw a triangle. Do not set image or label or jsx when this field is set.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#jsx","title":"jsx","text":"<p>A JSX object that is is displayed at the specified decoration location. Do not set image or path or label when this field is set. Note JSX decorations are not supported in the pipelineFlow document.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#label","title":"label","text":"<p>A text string that is displayed at the specified decoration location. Do not set image or path or jsx when this field is set.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#label_editable","title":"label_editable","text":"<p>A boolean that defaults to <code>false</code>. When set to <code>true</code>, if the mouse pointer is hovered over the label an edit icon is displayed next to the label which, when clicked, opens the label for editing. The label can also for double clicked to go to edit mode.</p> <p>When editing is completed (by clicking outside the text area) an <code>editDecorationLabel</code> action is executed which results in calls to first the <code>beforeEditActionHandler</code> and then the <code>editActionHandler</code> callbacks.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#label_align","title":"label_align","text":"<p>Can be either \u201ccenter\u201d or \u201cleft\u201d. When set to center the label will be centered on the point defined by the <code>position</code>, <code>distance</code>, <code>x_pos</code> and <code>y_pos</code> properties.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#label_single_line","title":"label_single_line","text":"<p>A boolean that defaults to <code>false</code>. When set to <code>true</code> the label is displayed on a single line and is truncated at the width of the label (specified in the <code>width</code> property for the decoration) and does not word wrap. If it is truncated an ellipsis (\u2026) is displayed at the end of the truncated text.</p> <p>If this property is set to <code>false</code>, long label text is displayed over a number of lines with word wrapping being controlled by the <code>width</code> set for the decoration. If the text extends beyond a second line an ellipsis (..) is displayed at the end of the second line. This is controlled by the <code>-webkit-line-clamp: 2;</code> CSS property. You can override this if you want the ellipsis to be displayed on a different line.</p> <p>Note: For both single and multi-line labels you may need to set the <code>height</code> property for the decoration to show the text fully.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#label_max_characters","title":"label_max_characters","text":"<p>A number or null. Defaults to null. If set to a number the label will be restricted to that number of characters. If the label in the pipeline flow document is longer than the max number it will be displayed but when it is edited the user will not be able to do anything except delete characters until the label is shorter than the max number. If this property is set to <code>null</code> or omitted an unlimited number of characters may be entered by the user.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#label_allow_return_key","title":"label_allow_return_key","text":"<p>A boolean that defaults to <code>false</code>. When <code>false</code>, if the user presses the return key nothing will happen. This means multi-line labels will only word-wrap at the <code>width</code> of the decorator. Preventing newline insertion is useful if the label text appears elsewhere in the UI which is not able to show text with newline characters. When set to <code>\"save\"</code>, if the user presses the return key, the editing will be completed and the label saved \u2013 this is the equivalent of clicking on the canvas background to complete the edit. If set to <code>true</code>, a new line character will be inserted in the label when the user presses return.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#position","title":"position","text":"<p>This is the anchor point to which the decoration is attached.  For a node, this can be one of these 9 enumerated values: <pre><code>   \"topLeft\", \"topCenter\", \"topRight\",\n   \"middleLeft\", \"middleCenter\", \"middleRight\",\n   \"bottomLeft\", \"bottomCenter\", \"bottomRight\".\n</code></pre> If omitted it will default to \u201ctopLeft\u201d.</p> <p>For a link, this can be one of these 3 enumerated values: <pre><code>   \"source\"\n   \"middle\"\n   \"target\"\n</code></pre> <code>source</code> will position the decoration at the start point of the line and <code>target</code> will position it at the end point of the line. If omitted it will default to <code>middle</code>.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#distance","title":"distance","text":"<p>A number of pixels. This is only applicable when the decoration is for a link line and then, only with straight connecting lines. That is, for node to node connections when the config property <code>enableLinkType</code> is set to <code>\"straight\"</code>. When specified, it will move the anchor point for the decoration to a new position along the connecting line relative to the initial position specified in the decoration\u2019s <code>position</code> property. A positive number moves the decoration along the line from the starting position towards the target of the link and a negative number backwards towards the source of the link. For example, if a straight link decoration has <code>position</code> of <code>source</code> and a <code>distance</code> of <code>20</code> the decoration\u2019s anchor point will be 20 pixels along the link line from the source (start) point of the line. After the <code>distance</code> value has been applied to the anchor point of the decoration, any <code>x_pos</code> and <code>y_pos</code> adjustment will be applied to fine tune the decoration\u2019s final position.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#x_pos","title":"x_pos","text":"<p>This is the number of pixels horizontally from the anchor point that the decoration is positioned. It can be positive or negative. If omitted it takes a default value from the node layout properties. x_pos is not applicable if you specify an SVG path using the <code>path</code> field, because the SVG path can be used to position the shape.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#y_pos","title":"y_pos","text":"<p>This is the number of pixels vertically from the anchor point that the decoration is positioned. It can be positive or negative. If omitted it takes a default value from the node layout properties. y_pos is not applicable if you specify an SVG path using the <code>path</code> field, because the SVG path can be used to position the shape.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#width","title":"width","text":"<p>This is the width for the decorator in pixels. For an image decorator, it is the width of the rectangle surrounding the image. For a label decorator it is the width allowed for display of the label text. If omitted it takes a default value from the node layout properties for Node decorations and from the canvas layout properties for Link properties.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#height","title":"height","text":"<p>This is the height for the decorator in pixels. For an image decorator, it is the height of the rectangle surrounding the image. For a label decorator it is the height allowed for display of the label text. If omitted it takes a default value from the node layout properties for Node decorations and from the canvas layout properties for Link properties.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#hotspot","title":"hotspot","text":"<p>A Boolean. It defaults to false. When set to true the decoration becomes clickable and when it is clicked the decorationCallbackHandler is called with the ID of the decoration passed as a parameter.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#class_name","title":"class_name","text":"<p>An optional class that will be applied to the decoration. You can add a style rule that references that class in your CSS to style the decoration and override the default styles.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#outline","title":"outline","text":"<p>A Boolean. It defaults to true. When a decoration is specified with an image field the image is typically displayed with a outline rectangle around it and with an offset within the rectangle to improve presentation. If <code>outline</code> is set to <code>false</code> the outline rectangle is not displayed and the image is displayed without any offset from its specified <code>x_pos</code> and <code>y_pos</code>.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#tooltip","title":"tooltip","text":"<p>A String. When specified, the string will be shown in a tooltip when the pointer is hovered over the decoration. No tip will be displayed if the <code>tooltip</code> property is omitted. Note: for decoration tooltips to be displayed on the canvas, the <code>decorations</code> property of the <code>tipConfig</code> object in the canvas config must be set to true (which is its default setting).</p>"},{"location":"02-canvas/04-controller/02-Decorations/#temporary","title":"temporary","text":"<p>A Boolean. It defaults to false. When set to true the decoration object will not be saved in the pipelineFlow document returned by the <code>CanvasController.getPipelineFlow()</code> method. Typically, this should be set to <code>true</code> when adding decorations programmatically to the nodes and links on the canvas.</p>"},{"location":"02-canvas/04-controller/02-Decorations/#notes","title":"Notes:","text":"<ol> <li>Using <code>x_pos</code> and <code>y_pos</code>, decorations can be displayed outside the node boundary.</li> <li>If no image or label or path is provided, the default decoration is a rectangle displayed with the class_name provided.</li> <li>You can specify as many decorations as you want by providing extra entries in the decorations array.</li> <li>Images and labels are positioned differently. For images, the position defined for the decoration is the top left corner of the image. For labels it is anchor point for the label which is the base line of the string in the vertical direction and is dependent on the text-anchor CSS property applied to the text. So if you apply the <code>text-anchor: middle</code> CSS property to the label in the style related to class_name the label will be centered on the point calculated for the position of the decoration.</li> </ol>"},{"location":"02-canvas/04-controller/03-Object-structure-used-by-API/","title":"API differences with schema","text":"<p>Because historically common-canvas has had to deal with different external flow definitions, there are some differences between the nodes, comments and links that the CanvasController API handles internally and those specified in the pipelineFlow schema. As follows:</p>"},{"location":"02-canvas/04-controller/03-Object-structure-used-by-API/#object-structure","title":"Object structure","text":"<p>For the API methods that involve nodes, comments and links, those objects are passed in and out by the API in their internal formats rather than the formats defined in the schema files. </p> <p>The internal structure is a somewhat flattened version of that in the schema definition. That means, properties that are in <code>&lt;object&gt;.app_data.ui_data</code> are flattened out and appear as properties in the <code>&lt;object&gt;</code> itself. So for example a node that conforms to the schema might look like this: <pre><code>    {\n      id: \"1234\",\n      op: \"select\",\n      ...\n      app_data : {\n        ui_data: {\n          label: \"Selection node\",\n          image: \"/images/select.svg\",\n          description: \"A node for selection\"\n          ...\n        },\n        other_data: {\n          prop1: \"Something interesting\"\n        }\n      }\n    }\n</code></pre> whereas when it is passed through the API it looks like this: <pre><code>    {\n      id: \"1234\",\n      op: \"select\",\n      label: \"Selection node\",\n      image: \"/images/select.svg\",\n      description: \"A node for selection\"\n      ...\n      app_data : {\n        other_data: {\n          prop1: \"Something interesting\"\n        }\n      }\n    }\n</code></pre> Note that, any properties in <code>app_data</code>, other than <code>ui_data</code>, are preserved in the internal format. So in the example, <code>app_data.other_data</code> in the schema format is preserved in the internal format.</p>"},{"location":"02-canvas/04-controller/03-Object-structure-used-by-API/#links-handing-in-the-api","title":"Links handing in the API","text":"<p>The other difference between the API and the schema formats is with links. </p> <p>In the pipeline flow schema, links are typically defined as properties within another object, for example, a node to node link is defined within a <code>links</code> array inside the <code>inputs</code> field of the target node and contains references to the <code>node id</code> and <code>port</code> of the source node. Also, links from comments to nodes are stored as an array in the comment object.</p> <p>However, in the API and internally in common-canvas, links are treated as a top level object; that is, there is an array of links stored internally which can be manipulated using the API methods. Each link has a unique ID. Consequently, links can be retrieved from the API by their ID field and properties of the links can be updated again by identifying the links using their ID. If you do not specify an ID for links in your pipelineFlow document a unique global ID will be generated for each link when the pipeline flow is loaded.</p>"},{"location":"02-canvas/04-controller/04-Notification-Message-Specification/","title":"Notification Message Specification","text":""},{"location":"02-canvas/04-controller/04-Notification-Message-Specification/#notification-message-structure","title":"Notification Message structure.","text":"<p>Notification messages are displayed in the notification panel which the user can access by clicking the Notifications icon in the toolbar. Each notification message is described by a simple JavaScript object like this: <pre><code> {\n    id: &lt;string&gt;,\n    type: &lt;string&gt;,\n    title: &lt;string or JSX object&gt;,\n    content: &lt;string or JSX object&gt;,\n    timestamp: &lt;string&gt;,\n    callback: &lt;function&gt;,\n    closeMessage: &lt;string or JSX object&gt;\n}\n</code></pre> where:</p> <ul> <li> <p>id (string, required): this is a unique ID assigned to the notification message. This is passed as a parameter in the callback (see below) and is used to reference messages when deleting them through the <code>CanvasController</code> API.</p> </li> <li> <p>type (string, required): this must be one of four values: \u201cinfo\u201d, \u201csuccess\u201d, \u201cwarning\u201d, or \u201cerror\u201d. If <code>type</code> is null, empty string, or undefined, the message type will be \u201cunspecified\u201d.</p> </li> <li> <p>title (string or JSX object): the title of the notification message.</p> </li> <li> <p>content (string or JSX object): the body of the notification message.</p> </li> <li> <p>callback (function): an optional callback function that will be called when the notification message is clicked. Callback function is called with one parameter, <code>id</code></p> </li> <li> <p>timestamp (string or JSX object): an optional timestamp that will be rendered in a separate section with different formatting, if passed in</p> </li> <li> <p>closeMessage (string or React object): an optional message that, if passed in, will display as clickable. Clicking on this will delete this individual message. If none is passed in, no delete option will be shown.</p> </li> </ul>"},{"location":"02-canvas/04-controller/05-Programmatically-creating-new-canvas-nodes/","title":"Programmatically Creating New Canvas Nodes","text":""},{"location":"02-canvas/04-controller/05-Programmatically-creating-new-canvas-nodes/#introduction","title":"Introduction","text":"<p>The host application code can programmatically create nodes on the canvas in two ways:</p> <ul> <li> <p>By calling CanvasController API methods to create and add the node to the canvas.</p> </li> <li> <p>Creating and adding a node to the Pipeline Flow document</p> </li> </ul>"},{"location":"02-canvas/04-controller/05-Programmatically-creating-new-canvas-nodes/#creating-and-adding-a-node-to-the-canvas-controller-api","title":"Creating and adding a node to the Canvas Controller API","text":"<p>The following code will programmatically add a node to the canvas. These commands will update the common-canvas object model directly and will not be added to the command stack so the user will not be able to <code>undo</code> / <code>redo</code> these actions. Also, the <code>beforeEditActionHandler</code> and <code>editActionHandler</code> callbacks will not be called for these actions.</p> <p>First you can get a node template from the canvas by calling <pre><code>    const template = canvasController.getPaletteNode(\"sort\");\n</code></pre> where the parameter is the operation (<code>op</code> field) for the palette node. Alternatively, you can retrieve a node template using this method: <pre><code>    const template = canvasController.getPaletteNodeById(nodeId)\n</code></pre> which returns the node template based on the node ID. This can be useful if you have supernodes in your palette because supernodes do not have an <code>op</code> field. After creating the node template your code can alter fields (for example, the label) within the template. If you do change any fields be careful because common-canvas doesn\u2019t do any error checking on your fields.</p> <p>Next you create the node: <pre><code>    const newNode = canvasController.createNode({\n            nodeTemplate: template,\n            offsetX: 200,\n            offsetY: 400\n});\n</code></pre> This will work correctly for regular nodes, and also supernodes, that have been pulled from the palette. </p> <p>Next you add the node object to the canvas.  <pre><code>    canvasController.addNode(newNode);\n</code></pre> The node will appear at the offsetX, offseY position within the coordinate system for the canvas.  </p>"},{"location":"02-canvas/04-controller/05-Programmatically-creating-new-canvas-nodes/#if-command-stack-is-needed","title":"If command stack is needed","text":"<p>This method allows the host application to create a node, or supernode, from a palette template object by creating and executing a command which will be added to the command stack (so the user can <code>undo</code> / <code>redo</code> it) and will also cause the <code>beforeEditActionHandler</code> and <code>editActionHandler</code> callbacks  to be called.</p> <p>First your code retrieves a node template from the palette as described above and then calls this method: <pre><code>    const data = {\n        nodeTemplate: template,\n        offsetX: 200,\n        offsetY: 400\n    };\n\n    canvasController.createNodeCommand(data, pipelineId)\n</code></pre></p> <p>Note: If <code>pipelineId</code> is omitted the node will be created in the current \u201ctop-level\u201d pipeline.</p>"},{"location":"02-canvas/04-controller/05-Programmatically-creating-new-canvas-nodes/#creating-and-adding-a-node-using-pipeline-flow-document","title":"Creating and adding a node using Pipeline Flow document","text":"<p>This approach works by your code adding one or more JSON objects directly to the pipeline flow object, either before the pipeline flow document is loaded into common-canvas using <code>CanvasController.setPipelineFlow(pFlow)</code>, or afterwards by retrieving the pipeline flow object from common-canvas using <code>CanvasController.getPipelineFlow()</code> and then updating the nodes array of whichever pipeline you want to modify. This would require your code to navigate to the <code>pipeline</code> object (that you want to update) in the <code>pipelines</code> array of the pipeline flow and then add the node object to the <code>nodes</code> array in the pipeline object. </p> <p>After updating the pipeline flow object your code would need to reload it into common-canvas using <code>CanvasController.setPipelineFlow(pFlow)</code>.</p> <p>To use this approach you would need a good understanding of the pipeline flow schema and pipeline flow UI schema.</p>"},{"location":"02-canvas/04-controller/06-Read-only-or-locked-canvas/","title":"Read Only or Locked Canvas","text":""},{"location":"02-canvas/04-controller/06-Read-only-or-locked-canvas/#introduction","title":"Introduction","text":"<p>Some host applications need to display flows that cannot be edited by the user. This might be because the flow artifact is currently being edited by another user (locked) or because the user does not have authority to edit the flow (read-only) or some other reason. We\u2019ll use the term \u2018read-only\u2019 below to refer to both locked and read-only canvases. </p> <p>There are many aspects of common-canvas components that need to considered for a read-only canvas. Since common-canvas is highly customizable it is not possible for the common-canvas code to manage components of the canvas that have been customized by the host application. For example, if the host app code added tools to the toolbar, common-canvas does not know whether those tools should be disabled when displaying a read-only canvas or not. So the host application code will need to manage that. Let\u2019s look at each element of common-canvas and see what needs to be done.</p>"},{"location":"02-canvas/04-controller/06-Read-only-or-locked-canvas/#general-config","title":"General Config","text":"<p>There is one main canvas configuration property that will change the common-canvas behavior to implement a read-only canvas. This is <code>enableEditingActions</code> which defaults to true and needs to be set to <code>false</code> for read-only canvases. The sections below will cover what effect this will have on the different components of common-canvas and what you need to do for any customizations you have made.</p>"},{"location":"02-canvas/04-controller/06-Read-only-or-locked-canvas/#canvas","title":"Canvas","text":"<p>Setting <code>enableEditingActions</code> to false will prevent nodes and comments (and detachable links) from being moved relative to one another. It will also prevent new links from being created and prevent text (like comments or node labels) from being edited. </p> <p>With <code>enableEditingActions</code> set to false, the canvas can still be panned (left/right and up/down) and also zoomed in and out. Nodes, comments and links can still be clicked (to select) and right clicked (to display a context menu) and double clicked (usually to show properties). If you implemented any behavior for these interactions, using the <code>clickActionHandler</code>, you\u2019ll need to review what your code is doing and make sure it is appropriate when a read-only canvas is being displayed.</p> <p>Common-canvas allows objects from outside the canvas to be dropped onto the canvas to create a new node. For example, a file can be dragged from the operating system desktop onto the canvas to create a data node. With <code>enableEditingActions</code> set to false, the drag/drop gesture (which common-canvas cannot prevent) will prevent a new node from being created. It is recommended you switch the <code>enableDropZoneOnExternalDrag</code> config property to false when displaying a read-only canvas. This will prevent a \u2018drop zone\u2019 graphic from appearing over the canvas when the object is dragged over the top of the canvas.   </p> <p>Some applications need to show a tag (called a \u2018state tag\u2019) over the canvas to emphasize the \u2018read-only\u2019 or \u2018locked\u2019 state of the canvas. This can be displayed using the <code>enableStateTag</code> canvas config property. The tooltip of the \u2018state tag\u2019 can be provided by implementing the <code>tipHandler</code> callback function. </p> <p>Since there are numerous possible styles for nodes and links when displaying a read-only canvas, it isn\u2019t possible for common-canvas to style the canvas objects appropriately for all different designs. You will need to override any styles for nodes and links to fit your design. To help with this common-canvas sets a class called <code>config-edit-actions-false</code> on the top-level div that contains the common-canvas components. You can use this to build specific selectors in your CSS/SCSS that will override the styles applied to nodes and links by default. For example, to override node icon and label colors you could specify the following in your SCSS file: <pre><code>    .editing-actions-false {\n        .d3-node-group {\n        &amp; .d3-node-label,\n            &amp; svg path {\n                color: $disabled-02;\n                stroke: $disabled-02;\n                fill: $disabled-03;\n            }\n        }\n    }\n</code></pre></p>"},{"location":"02-canvas/04-controller/06-Read-only-or-locked-canvas/#context-menu","title":"Context menu","text":"<p>Setting <code>enableEditingActions</code> to false will prevent any options, that would edit the canvas objects, from being displayed in the common-canvas default context menu. For example, <code>Delete</code> will not show up in the context menu. See the <code>enableEditingActions</code> documentation for a list of options that are disabled.</p> <p>Your application code can add your own options to the context menu by implementing the <code>contextMenuHandler</code> callback function. If you have added your own options, you should review your code and ensure options that might change the canvas objects are not added to the context menu when you are displaying a read-only canvas.</p> <p>Note: The common-canvas default menu, passed as the second parameter to the <code>contextMenuHandler</code> callback, will still contain editing options. This means, if your code relies on them for some reason, (for example for calculating the position of your added options) your application code will still work OK.  The editing options will be removed after your code returns the array of items that describe the desired menu from the <code>contextMenuHandler</code> callback.</p>"},{"location":"02-canvas/04-controller/06-Read-only-or-locked-canvas/#toolbar","title":"Toolbar","text":"<p>The toolbar can display buttons for standard common-canvas actions and also buttons for any application-specific actions added by your code. Setting <code>enableEditingActions</code> to false will cause buttons for any standard common-canvas actions, that edit the canvas objects, to be disabled regardless of the setting for the <code>enable</code> property for each action. See the <code>enableEditingActions</code> documentation for a list of actions that are disabled.</p> <p>You should review any application-specific action buttons you have added to the toolbar and decide if they need to be disabled or removed from the toolbar when displaying a read-only canvas.</p>"},{"location":"02-canvas/04-controller/06-Read-only-or-locked-canvas/#keyboard","title":"Keyboard","text":"<p>Common-canvas supports a number of keyboard shortcuts. Setting <code>enableEditingActions</code> to false, disables any keyboard shortcuts that edit the canvas objects (such as Delete). See the <code>enableEditingActions</code> documentation for a list of keyboard shortcuts that are disabled.</p>"},{"location":"02-canvas/04-controller/06-Read-only-or-locked-canvas/#palette","title":"Palette","text":"<p>Setting <code>enableEditingActions</code> to false:</p> <ul> <li>prevents node templates from being dragged from the palette and </li> <li>disables the double-click action on node templates which automatically adds a node to the canvas. </li> </ul> <p>You should decide if your application should display the palette when displaying a read-only canvas or not. The palette can be hidden by setting the canvas config property <code>enablePaletteLayout</code> to \u201cNone\u201d.</p>"},{"location":"02-canvas/04-controller/06-Read-only-or-locked-canvas/#test-harness-sample-read-only-application","title":"Test Harness: Sample Read-Only application","text":"<p>The test harness contains a sample application called \u201cRead-Only\u201d which shows how a read-only canvas can be built using the <code>enableEditingActions</code> config option. In the application there are three toolbar buttons which can be used to navigate between Editable state, Read-Only state and Locked state. You can review the <code>.jsx</code> and <code>.scss</code> files in the application code to see how the application is implemented and styled.  </p>"},{"location":"02-canvas/04-controller/07-Calling-the-Canvas-Controller-API/","title":"Calling the Canvas Controller API","text":""},{"location":"02-canvas/04-controller/07-Calling-the-Canvas-Controller-API/#techniques-for-calling-canvas-controller-api","title":"Techniques for calling Canvas Controller API","text":"<p>There are a couple of techniques you can use to update the object model using the Canvas Controller.</p>"},{"location":"02-canvas/04-controller/07-Calling-the-Canvas-Controller-API/#incremental-updates","title":"Incremental Updates","text":"<p>Once the pipeline flow is loaded into common-canvas using:  <pre><code>canvasController.setPipelineFlow(pFlow)\n</code></pre> the pipeline flow is held in memory \u201cinside\u201d the object model of common-canvas.   Thereafter, you can update that in-memory pipeline flow by calling canvas controller API such as: <code>deleteComment</code> or <code>createNode</code>, etc.  The canvas controller will directly update the in-memory object model based on these calls, and it will cause the canvas view to refresh to reflect the change your code requested with the API call.</p> <p>It\u2019s best to use the above technique when making small incremental changes to the object model often based on user requests.</p>"},{"location":"02-canvas/04-controller/07-Calling-the-Canvas-Controller-API/#extensive-updates","title":"Extensive Updates","text":"<p>An alternative to making these individual API calls is to use <code>canvasController.getPipelineFlow(pFlow)</code> which will return the full contents of the current state of the object model into a variable e.g. <pre><code>const currentPF = this.canvasController.getPipelineFlow();   \n</code></pre> You can then make changes to the pipeline flow using you own code. For example:</p> <pre><code>// Wipe out all the comments in the zeroth pipeline\ncurrentPF.pipelines[0].comments = []; \n</code></pre> <p>and then set the pipeline flow back into common canvas with this:</p> <pre><code>this.canvasController.setPipelineFlow(currentPF);   \n</code></pre> <p>Note: the updating of the pipeline flow (currentPF) is entirely done by your code \u2014 there is no API to help you \u2014 so you have to understand the pipeline flow schema to understand what to do. </p> <p>This technique is probably most useful when doing extensive changes to the pipeline flow where you don\u2019t want each change to cause a refresh of the canvas. This is because the only refresh of the canvas will be when you do the final <code>setPipelineFlow()</code> call.</p>"},{"location":"02-canvas/05-ext-objs/","title":"Node Creation from External Object","text":""},{"location":"02-canvas/05-ext-objs/#dragging-object-from-within-the-browser","title":"Dragging object from within the browser","text":"<p>Common canvas supports the ability for an object from the your browser page to be dragged onto the canvas to initiate the creation of a node on the canvas. To do this you need to set the object you want to drag into the canvas to be draggable:</p> <p><pre><code>    &lt;div \n      draggable=\"true\"\n      onDragStart={this.onDragStart}\n      onDragOver={this.onDragOver}&gt;\n      ....\n      ....\n    &lt;/div&gt;\n</code></pre> and then specify the on drag behavior like this  <pre><code>    onDragStart(ev) {\n       const evData = {\n          operation: \"addToCanvas\",\n          data: {\n             editType: \"createExternalNode\",\n             field1: \"field_val_1\",\n             field2: \"field_val_2\"\n             ....\n             ....\n          }\n       };\n       ev.dataTransfer.setData(\"text\", JSON.stringify(evData));\n    }\n</code></pre> where </p> <ul> <li>operation - is always set to \u201caddToCanvas\u201d</li> <li>data - is the object that will be passed to the editActionHandler callback</li> <li>editType - this is the type of editing operation. You can set it to anything except any of the reserved settings which are: \u2018createNode\u2019, \u2018createNodeOnLink\u2019, \u2018createAutoNode\u2019 and \u2018createFromExternalObject\u2019.</li> <li>fields - an optional number of fields can be provided that describe the object you are dragging onto the canvas. For example, if it is a data object the fields might describe the data source details.</li> </ul> <p>After the object has been dropped on the canvas your editActionHandler() callback method will be called with a parameter data object that contains the fields you specified in <code>data</code> in the drag data along with three additional fields, called pipelineId, offsetX and offsetY, containing the x,y co-ordinates of where the drop occurred. In your editActionHandler() method you can use the CanvasController API to add a node to the pipeline flow and get common canvas to display it.    </p>"},{"location":"02-canvas/05-ext-objs/#dragging-object-from-the-desktop-or-another-application","title":"Dragging object from the desktop or another application","text":"<p>If an object from the desktop or another application is dropped on the canvas your editActionHandler(data) method will be called with the <code>data</code> parameter set to an object like this:  <pre><code>    {\n       dataTransfer: &lt;The event data from the drag operation&gt;,\n       editType: \"createFromExternalObject\",\n       editSource: \"canvas\",\n       offsetX: 200,\n       offsetY: 100,\n       pipelineId: \"1234-5678\"\n    }      \n</code></pre> Your code can examine the <code>dataTransfer</code> object to see what object was dragged onto the canvas and then take appropriate action. </p> <p>If you want a new node to appear on the canvas as a result of the object being dropped your code will need to create that node at the point where the drop occurred, using the Canvas Controller API. Here is some sample code that will </p> <ul> <li>create a new node template based on the \u201cvariablefile\u201d node in the palette data</li> <li>set the label of the node to be created to the name of the file being dropped</li> <li>create a new node on the canvas at the offsetX, offsetY position</li> <li>the command will be added to the command-stack so the user can click undo to undo the addition of the node</li> </ul> <p><code>data</code> is the parameter passed into your <code>editActionHandler</code> method. <pre><code>    if (data.editType === \"createFromExternalObject\") {\n        const nodeTemplate = canvasController.getPaletteNode(\"variablefile\");\n        if (nodeTemplate) {\n            const convertedTemplate = canvasController.convertNodeTemplate(nodeTemplate);\n            convertedTemplate.label = data.dataTransfer.files[0].name;\n            const action = {\n                editType: \"createNode\",\n                nodeTemplate: convertedTemplate,\n                pipelineId: data.pipelineId,\n                offsetX: data.offsetX,\n                offsetY: data.offsetY\n            };\n            canvasController.editActionHandler(action);\n    }\n</code></pre></p> <p>Tip: You can optionally instruct common canvas to display a graphic over the canvas as the external object is being dragged over it. To do this you need to specify the <code>enableDropZoneOnExternalDrag</code> configuration parameter.</p>"},{"location":"02-canvas/06-stack/01-Command-Stack/","title":"Command Stack API","text":"<p>The CommandStack is a JavaScript class that provides the functionality to support do/undo/redo of commands.  It maintains an internal stack of commands with a cursor that moves up and down when commands are undone or redone. Commands are also Javascript classes that implement a simple interface.</p> <p>The canvas-controller creates an instance of the command stack. Common-canvas provides command objects for each of the commands that are performed by the user, such as: create node, delete comment, link nodes together, etc.</p> <p>To allow the user to activate the undo and redo actions, common-canvas provides undo/redo options in its default context menu, on the default toolbar and via keystrokes ctrl+z (undo) and ctrl+shift+z (redo). You can implement your own undo and redo UI if required, using the API.</p> <p>The canvas-controller provides the following methods to allow the application to control the command stack:</p> <pre><code>   do(command) - push the command onto the command stack and then invoke command.do()\n   undo() - pop a command from the command stack and then invoke command.undo()\n   redo() - push last undo command onto the command stack and then invoke command.redo()\n   canUndo() - returns true if there is a command on the command stack that can be undone.\n   canRedo() - returns true if there is a command on the command stack that can be redone.\n   getUndoLabel() - returns the label for the next command to be undone.\n   getRedoLabel() - returns the label for the next command to be redone.\n   clearCommandStack() - empties the command stack\n</code></pre> <p>Each command that is added to the command stack is a Javascript class that needs to implement these methods:</p> <pre><code>   constructor()\n   do()\n   undo()\n   redo()\n   getLabel()\n</code></pre> <p>constructor() - Initial setup</p> <p>do() - Performs all actions necessary to execute the command</p> <p>undo() - Performs all actions necessary to reverse the actions performed in do()</p> <p>redo() - Performs all actions necessary to re-execute the command. For some commands this is the same as do() but others it is different.</p> <p>getLabel() - Returns a label that descibes the action.</p> <p>Here is some sample code that shows how a create-node command might be written:</p> <pre><code>   export default class CreateNodeAction extends Action {\n\n        constructor(data, canvasController) {\n            super(data);\n            this.canvasController = canvasController;\n            this.newNode = createNode(data);\n         }\n\n         do() {\n            this.canvasController.addNode(this.newNode);\n         }\n\n         undo() {\n            this.canvasController.deleteNode(this.newNode.id);\n         }\n\n         redo() {\n            this.canvasController.addNode(this.newNode);\n         }\n\n         getLabel() {\n            return \"Add 1 node\"\n         }\n   }\n</code></pre> <p>Here is an example showing how to create a command action and push it on the stack using the canvas-conttoller:</p> <pre><code>   const command = new CreateNodeAction(data);\n   this.canvasController.do(command);\n</code></pre>"},{"location":"02-canvas/06-stack/01-Command-Stack/#exported-common-canvas-action-classes","title":"Exported common-canvas action classes","text":"<p>Some of the internal action classes have been exported from common-canvas and can be extended with additional functionality if needed. The classes that are exported are:</p> <ul> <li>CreateAutoNodeAction</li> <li>CreateNodeAction</li> <li>CreateNodeLinkAction</li> <li>DeleteObjectsAction</li> <li>DisconnectObjectsAction</li> <li>PasteAction</li> </ul> <p>The constructors for these classes all take the same two parameters. The <code>data</code> object that descrbes the command and a reference to <code>canvas controller</code>.</p> <p>Applications can extend these classes to augment their basic behavior with application specific behavior. It is the application\u2019s responsibility to add the extended object to the command stack when the user performs the corresponding action.</p> <p>Although there are no plans to alter the internal workings of these six command action classes, there is always the chance that a change in the future might alter a field name or two. If you extend these classes, it is therefore recommended that you have sufficient regression tests for your extensions that would highlight such a problem, should it occur.</p>"},{"location":"02-canvas/07-layout/01-Customizing-Node-Layout/","title":"Customizing Node Layout Properties","text":""},{"location":"02-canvas/07-layout/01-Customizing-Node-Layout/#node-layout-properties","title":"Node layout properties","text":"<p>Node layout properties define how all the elements of a node are displayed such as: the position and size of the icon image; the position of the main label; even the shape of the node itself! You can change just about anything to do with the way the nodes appear in your canvas. So you can get a very different looking canvas to suit your needs. </p> <p>There are two possible sets of node layout properties provided by common-canvas, these are controlled by the <code>enableNodeFormatType</code> canvas configuration property which can be set to either \u201cHorizontal\u201d or \u201cVertical\u201d. \u201cHorizontal\u201d will display a node with an image and the label to the right of the image. \u201cVertical\u201d will display the node with the label underneath the image.</p>"},{"location":"02-canvas/07-layout/01-Customizing-Node-Layout/#default-values-for-node-layout-properties","title":"Default values for node layout properties","text":"<p>The possible node layout properties are shown below with the values they have when <code>enableNodeFormatType = \"Horizontal\"</code>. You can see the values for both sets of properties by looking at the layout-dimensions.js program </p> <pre><code>// Default node sizes. The height might be overridden for nodes with more ports\n// than will fit in the default size.\ndefaultNodeWidth: 160,\ndefaultNodeHeight: 40,\n\n// A space separated list of classes that will be added to the group &lt;g&gt;\n// DOM element for the node.\nclassName: \"\",\n\n// Displays the node outline shape underneath the image and label.\nnodeShapeDisplay: true,\n\n// Default node shape. Can be \"rectangle\" or \"port-arcs\". Used when nodeOutlineDisplay is true.\nnodeShape: \"port-arcs\",\n\n// SVG path strings to define the shape of your node and its\n// selection highlighting. If set to null the paths will be set by default\n// based on the nodeShape setting.\nbodyPath: null,\nselectionPath: null,\n\n// Displays the external object specified, as the body of the node\nnodeExternalObject: false,\n\n// Display image\nimageDisplay: true,\n\n// Image dimensions\nimageWidth: 26,\nimageHeight: 26,\n\n// Image position\nimagePosition: \"topLeft\",\nimagePosX: 6,\nimagePosY: 7,\n\n// Display label\nlabelDisplay: true,\n\n// Label dimensions\nlabelWidth: 112,\nlabelHeight: 19,\n\n// Label position\nlabelPosition: \"topLeft\",\nlabelPosX: 36,\nlabelPosY: 12,\n\n// Label appearance\nlabelEditable: false,\nlabelAlign: \"left\", // can be \"left\" or \"center\"\nlabelSingleLine: true, // false allow multi-line labels\nlabelOutline: false,\nlabelMaxCharacters: null, // null allows unlimited characters\nlabelAllowReturnKey: false, // true allows line feed to be inserted into label, \"save\" to make the return key save the label.\n\n// An array of decorations to be applied to the node. For details see:\n// https://github.com/elyra-ai/canvas/wiki/2.4.2-Decoration-Specification\n// These are added to the node at run time and will not be saved into\n// the pipeline flow.\ndecorations: [],\n\n// Positions and dimensions for 9 enumerated default decorator positions.\n// decoratorWidth and decoratorHeight are the dimensions of the outline\n// rectangle and decoratorPadding is the padding for the image within the\n// outline rectangle.\ndecoratorTopY: 2,\ndecoratorMiddleY: -8,\ndecoratorBottomY: -18,\n\ndecoratorLeftX: 2,\ndecoratorCenterX: -8,\ndecoratorRightX: -30,\n\n// Width, height and padding for image decorators\ndecoratorWidth: 16,\ndecoratorHeight: 16,\ndecoratorPadding: 2,\n\n// Width and height for label decorators\ndecoratorLabelWidth: 80,\ndecoratorLabelHeight: 30,\n\n// Display drop shadow under and round the nodes\ndropShadow: true,\n\n// The gap between a node and its selection highlight rectangle\nnodeHighlightGap: 1,\n\n// The size of the node sizing area that extends around the node, over\n// which the mouse pointer will change to the sizing arrows.\nnodeSizingArea: 10,\n\n// Error indicator dimensions\nerrorPosition: \"topLeft\",\nerrorXPos: 24,\nerrorYPos: 5,\nerrorWidth: 10.5,\nerrorHeight: 10.5,\n\n// When sizing a supernode this decides the size of the corner area for\n// diagonal sizing.\nnodeCornerResizeArea: 10,\n\n// What point to draw the data links from and to when enableLinkType is set\n// to \"Straight\". Possible values are \"image_center\" or \"node_center\".\ndrawNodeLinkLineFromTo: \"node_center\",\n\n// What point to draw the comment to node link line to. Possible values\n// are \"image_center\" or \"node_center\".\ndrawCommentLinkLineTo: \"node_center\",\n\n// This is the size of the horizontal line protruding from the\n// port on the source node when drawing an elbow or straight connection line.\nminInitialLine: 30,\n\n// For the elbow connection type with nodes with multiple output ports,\n// this is used to increment the minInitialLine so that connection lines\n// do not overlap each other when they turn up or down after the elbow.\nminInitialLineIncrement: 8,\n\n// This is the minimum size of the horizontal line entering the\n// target port on the target node when drawing an Elbow connection line.\nminFinalLine: 30,\n\n// Display input ports.\ninputPortDisplay: true,\n\n// Object for input port can be \"circle\" or \"image\".\ninputPortObject: \"circle\",\n\n// If input port object is \"image\" use this image.\ninputPortImage: \"\",\n\n// If input port dimensions for \"image\".\ninputPortWidth: 12,\ninputPortHeight: 12,\n\n// Position of left single input port. Multiple input ports will be\n// automatically positioned with the Y coordinate being overriden. These\n// values are an offset from the top left corner of the node outline.\n// Used when linkDirection is \"LeftRight\".\ninputPortLeftPosX: 0,\ninputPortLeftPosY: 20,\n\n// Position of top single input port. Multiple input ports will be\n// automatically positioned with the X coordinate being overriden. These\n// values are an offset from the top left corner of the node outline.\n// Used when linkDirection is \"TopBottom\".\ninputPortTopPosX: 80,\ninputPortTopPosY: 0,\n\n// Position of bottom single input port. Multiple input ports will be\n// automatically positioned with the X coordinate being overriden. These\n// values are an offset from the bottom left corner of the node outline.\n// Used when linkDirection is \"BottomTop\".\ninputPortBottomPosX: 80,\ninputPortBottomPosY: 0,\n\n// The 'guide' is the object drawn at the mouse position as a new line\n// is being dragged outwards.\n// Object for input port guide can be \"circle\" or \"image\".\ninputPortGuideObject: \"circle\",\n\n// If input port guide object is \"image\" use this image.\ninputPortGuideImage: \"\",\n\n// Display output ports.\noutputPortDisplay: true,\n\n// Object for output port can be \"circle\" or \"image\".\noutputPortObject: \"circle\",\n\n// If output port object is \"image\" use this image.\noutputPortImage: \"\",\n\n// Output port dimensions for \"image\".\noutputPortWidth: 12,\noutputPortHeight: 12,\n\n// Position of right single output port. Multiple input ports will be\n// automatically positioned with the Y coordinate being overriden. These\n// values are an offset from the top right corner of the node outline.\n// Used when linkDirection is \"LeftRight\".\noutputPortRightPosition: \"topRight\",\noutputPortRightPosX: 0,\noutputPortRightPosY: 20,\n\n// Position of top single output port. Multiple input ports will be\n// automatically positioned with the X coordinate being overriden. These\n// values are an offset from the top left corner of the node outline.\n// Used when linkDirection is \"BottomTop\".\noutputPortTopPosX: 80,\noutputPortTopPosY: 0,\n\n// Position of bottom single output port. Multiple input ports will be\n// automatically positioned with the X coordinate being overriden. These\n// values are an offset from the bottom left corner of the node outline.\n// Used when linkDirection is \"TopBottom\".\noutputPortBottomPosX: 80,\noutputPortBottomPosY: 0,\n\n// The 'guide' is the object drawn at the mouse position as a new line\n// is being dragged outwards.\n// Object for output port guide can be \"circle\" or \"image\".\noutputPortGuideObject: \"circle\",\n\n// If output port guide object is \"image\" use this image.\noutputPortGuideImage: \"\",\n\n// Automatically increases the node size to accommodate its ports so both\n// input and output ports can be shown within the dimensions of\n// the node.\nautoSizeNode: true,\n\n// Radius of the either the input or output ports when they are set to \"circle\"\nportRadius: 3,\n\n// Size of an offset above and below the set of port arcs.\nportArcOffset: 3,\n\n// Radius of an imaginary circle around the port. This controls the\n// spacing of ports and the size of port arcs when nodeShape is set to\n// port-arcs.\nportArcRadius: 6,\n\n// Spacing between the port arcs around the ports.\nportArcSpacing: 3,\n\n// Position of the context toolbar realtive to the node. Some adjustment\n// will be made to account for the width of the toolbar.\ncontextToolbarPosition: \"topRight\",\n\n// Display of vertical ellipsis to show context menu\nellipsisDisplay: true,\nellipsisPosition: \"topLeft\",\nellipsisWidth: 10,\nellipsisHeight: 22,\nellipsisPosX: 145,\nellipsisPosY: 9,\nellipsisHoverAreaPadding: 2\n</code></pre>"},{"location":"02-canvas/07-layout/01-Customizing-Node-Layout/#positioning-objects","title":"Positioning objects","text":"<p>If you have nodes of varying sizes or if you have enabled re-sizeable nodes, by setting the canvas config property <code>enableResizableNodes</code> to true, it is important to note the following.</p> <p>All coordinate positions for elements are based on one of nine anchor positions around the node: <pre><code>       \"topLeft\", \"topCenter\", \"topRight\",  \n       \"middleLeft\", \"middleCenter\", \"middleRight\",   \n       \"bottomLeft\", \"bottomCenter\", \"bottomRight\".   \n</code></pre></p> <p>The PosX and PosY properties for each element is an offset from the associated anchor position where PosX is the number of pixels to the right of the anchor position and PosY is a number of pixels down from the anchor position. Negative values can be provided to specify an offset to the left and up from the anchor position. The default anchor position for all elements is <code>topLeft</code>. By the way, the top left corner of the node is also the point that the node will be positioned at based on its <code>x_pos</code> and <code>y_pos</code> fields in the pipelineFlow document.</p> <p>For example, these settings: <pre><code>    {\n        imagePosition: \"middleCenter\",\n        imagePosX: -10,\n        imagePosY: -10,\n        imageWidth: 20,\n        imageHeight: 20\n    }\n};\n</code></pre> would position the image 10 pixels left and 10 pixels above the very center of the node. Since the image is 20 x 20 pixels this would position the center of the image at the center of the node. If you have enabled re-sizeable nodes, this would keep the image centrally positioned while the node is being resized by the user.</p> <p>Elements like the node image and vertical ellipsis are positioned based on the top left corner of that element. Text is positioned based on the top left corner of its containing <code>&lt;div&gt;</code>.</p> <p>The values for <code>bodyPath</code> and <code>selectionPath</code> must be SVG path strings which describe how to draw the node body shape and its selection highlight shape. For example, the following would draw a triangular node body and a triangular selection outline 5 pixels away from it:</p> <pre><code>    bodyPath: \"     M  0 0 L  70 35  0 70 Z\",\n    selectionPath: \"M -5 -5 L 75 35 -5 75 Z\",\n</code></pre>"},{"location":"02-canvas/07-layout/01-Customizing-Node-Layout/#overriding-the-default-node-layout-properties","title":"Overriding the default node layout properties","text":"<p>There are a couple of ways to do this depending on your needs. First, if you just want to change the appearance of all nodes on your canvas you can specify the <code>enableNodeLayout</code> configuration parameter in the main canvas configuration object. The properties from this object will replace any properties in the default set, which was chosen based on the settings of <code>enableNodeFormatType</code>. So you don\u2019t need to provide all of the properties; just the ones you want to replace. </p> <p>Let\u2019s say you want your nodes to be displayed as ellipses. You could provide the following settings in <code>enableNodeLayout</code> in the canvas config: <pre><code>const canvasConfig = { \n    enableNodeLayout: {\n        bodyPath: \"     M  0 30 Q  0  0 60  0 Q 120  0 120 30 Q 120 60 60 60 Q  0 60  0 30 Z\",\n        selectionPath: \"M -5 30 Q -5 -5 60 -5 Q 125 -5 125 30 Q 125 65 60 65 Q -5 65 -5 30 Z\",\n        defaultNodeWidth: 120,\n        defaultNodeHeight: 60,\n        imageWidth: 30,\n        imageHeight: 30,\n        imagePosX: 20,\n        imagePosY: 10,\n        labelEditable: true,\n        labelPosX: 60,\n        labelPosY: 37,\n        labelWidth: 90,\n        labelHeight: 17, // Should match the font size specified in css + padding\n        ellipsisDisplay: true,\n        ellipsisPosX: 100,\n        ellipsisPosY: 20,\n        portPosY: 30\n    }\n};\n</code></pre></p>"},{"location":"02-canvas/07-layout/01-Customizing-Node-Layout/#customizing-individual-nodes-or-categories-of-nodes","title":"Customizing individual nodes or categories of nodes","text":"<p>If you want each node, or category of nodes, to have a different layout based on some criteria you can use the second method for overriding the node layout properties. This uses the layoutHandler callback method. When you specify this callback method to common canvas, it will be called for each node on the canvas, during initialization and, occasionally, at other times. </p> <p>The method should return a simple JavaScript object that contains any node layout properties you want to override from the defaults and the ones specified in the <code>enableNodeLayout</code> field in the canvas config. This is an important point: there are three levels of properties provided where each overrides the previous set:</p> <ol> <li>First we take the full default set of node layout properties based on the value for <code>enableNodeFormatType</code>.</li> <li>Then we override these with the properties from the <code>enableNodeLayout</code> field in the canvas config object, if any are provided.</li> <li>Finally we override the combined set with any properties from the object returned from the <code>layoutHandler</code> method if one is specified.</li> </ol> <p>The callback is provided with a <code>data</code> parameter which is the node object from the pipelineFlow so your code can examine the node object and return node layout properties as appropriate.</p> <p>Note: The <code>layoutHandler</code> callback is called while the canvas is being displayed, therefore it must return very quickly each time it is called otherwise your canvas display speed will be slowed down.</p> <p>Here is a simple example of a <code>layoutHandler</code> callback method which will override the width of the node based on the width of the main label for any node where the node\u2019s <code>op</code> field is set to <code>Sort</code>: <pre><code>layoutHandler(data) {\n    let customNodeLayout = {};\n    if (data.op === \"Sort\") {\n        const labLen = data.label ? data.label.length : 0;\n        const width = (labLen * 9) + 30; // Allow 9 pixels for each character and a bit extra for padding\n        customNodeLayout = {\n            defaultNodeWidth: width // Override default width with calculated width\n        };\n    }\n    return customNodeLayout;\n</code></pre> OK, it\u2019s not a very complicated example but hopefully you get the message :)</p> <p>In the test harness, you can see an example application that use the layoutHandler callback method. In the test harness:</p> <ol> <li>Open the Common Canvas side panel (click the hamburger icon)</li> <li>Select the <code>Explain</code> sample application</li> </ol> <p>You will see the nodes have different shapes and colors based on their type. You can examine the Explain sample app code to see how it works. This involves these parts:</p> <ol> <li>This line sets the <code>enableNodeFormatType</code> in the canvas config to \u201cVertical\u201d. This will set all of the node layout properties to their defaults for \u201cVertical\u201d nodes.</li> <li>This line will override the default node layout properties with a few different values which apply to all nodes.</li> <li>The layout handler will override layout properties on a node by node basis. It calls some utility functions to translate data retrieved from the node to the appropriate layout properties. The returned node layout properties contains an array of decorations that are used to display data values from the node.</li> <li>This line specifies the <code>layoutHandler</code> to the <code>&lt;CommonCanvas&gt;</code> object.  </li> </ol>"},{"location":"02-canvas/07-layout/01-Customizing-Node-Layout/#customizing-node-colors-and-styles","title":"Customizing node colors and styles","text":"<p>The DOM elements that make up a node can be customized using CSS styles. This is done by assigning a class name to the group <code>&lt;g&gt;</code> element that is the container for all the node elements. The class can be applied to the group object is a number of different ways:</p> <ol> <li>By specifying it in the <code>app_data.ui_data.class_name</code> field of the node in the pipeline flow document that is provided to common-canvas using <code>CanvasController.setPipelineFlow(pFlow)</code></li> <li>By specifying it using the following API methods: <ul> <li>CanvasController.setNodeProperties(nodeId, properties, pipelineId)</li> <li>CanvasController.setNodesClassName(nodeIds, newClassName, pipelineId)</li> </ul> </li> <li>By specifying a class name in the <code>className</code> field of the node layout properties in the canvas config. Like this <pre><code>const canvasConfig = {\n    enableNodeLayout: {\n        className: \"my-node-class\"\n    }\n};\n</code></pre></li> <li>By specifying a class name in the <code>className</code> field of the node layout properties returned from the <code>layoutHandler</code>.</li> </ol> <p>You can see the svg-canvas-d3.scss file for full details about what elements in the node can be styled but here are a list of some basic parts of the node:</p> Element DOM Element Class Name Group <code>&lt;g&gt;</code> d3-node-group \u2013&gt; Body Shape <code>&lt;path&gt;</code> d3-node-body-outline \u2013&gt; Selection Outline <code>&lt;path&gt;</code> d3-node-selection-highlight \u2013&gt; Label Container <code>&lt;foreignobject&gt;</code> d3-foreign-object-node-label -----&gt; Label <code>&lt;div&gt;</code> d3-node-label <p>So for example if you want the node body (the rectangle) to be colored orange you would provide a class name to the group element using one of the techniques mentioned above and then put this in you CSS:</p> <p><pre><code>.my-node-class .d3-node-body-outline {\n   fill: orange;\n}\n</code></pre> Note: You can use the <code>enableParentClass</code> canvas config field to make you CSS rulesets specific so your styles are picked up in preference to the common-canvas default styles.</p>"},{"location":"02-canvas/08-menu/01-Context-Menu-Wrapper/","title":"Context Menu Wrapper","text":"<p>Context Menu Wrapper is now deprecated. Carbon 11 supports a context menu component</p> <p>The context menu in common-canvas can be used in your application by importing the <code>ContextMenuWrapper</code> React component. Aside from providing a standard context menu to allow users to select different actions, this context menu also allows for configuration of submenus as a menu item, as well as a visual dividers.</p>"},{"location":"02-canvas/08-menu/01-Context-Menu-Wrapper/#getting-started-with-context-menu","title":"Getting started with Context Menu","text":""},{"location":"02-canvas/08-menu/01-Context-Menu-Wrapper/#step-1-import-context-menu-wrapper","title":"Step 1: Import Context Menu Wrapper","text":"<p>To use Context Menu Wrapper in your React application you need to import the <code>ContextMenuWrapper</code> React component from the common-canvas library. It\u2019s recommended to use All Components if common-canvas is also being imported, otherwise use ContextMenuWrapper only option.</p> <p>All Components <pre><code>    import {ContextMenuWrapper} from \"@elyra/canvas\";\n</code></pre></p> <p>ContextMenuWrapper only <pre><code>    import ContextMenuWrapper from \"@elyra/canvas/dist/lib/context-menu\";\n</code></pre></p>"},{"location":"02-canvas/08-menu/01-Context-Menu-Wrapper/#step-2-pass-in-the-correct-props","title":"Step 2: Pass in the correct props","text":"<ul> <li>contextMenuDef <code>array</code> (required): an array of menu item objects consisting of action and label. You can also pass in a divider item.</li> </ul> <pre><code>    const menuDef = [\n        { action: ACTION.BUILD, label: \"Build\" },\n    { action: ACTION.EXTEND, label: \"Extend\" },\n    { action: ACTION.CLEAR, label: \"Clear\" },\n    { divider: true },\n    { action: ACTION.SCORE, label: \"Score\" },\n    ];\n</code></pre> <ul> <li>containingDivId <code>string</code> (required): the id of the element that the context menu will be absolutely positioned inside. typically, the page element is used.</li> <li> <p>contextMenuPos <code>object</code> (required): the position of the context menu within the containing div. <pre><code>    const menuPos = { x: 500  , y: 300  };\n</code></pre></p> </li> <li> <p>contextMenuActionHandler <code>func</code> (required): this handler is where context menu actions are defined. <pre><code>    contextMenuActionHandler(action) {\n        switch (action) {\n            case \"BUILD\":\n            break;\n        case \"EXTEND\":\n            break;\n        default:\n        }\n    }\n</code></pre></p> </li> <li>closeContextMenu <code>func</code>  (required): this handler will be called when the context menu is closed.</li> <li>stopPropagation <code>bool</code> (optional): this is optional and only for very specific, uncommon use cases. When this flag is set, if a user clicks outside the context menu, the event will not bubble to parent elements, preventing parent event handlers from being called.</li> </ul>"},{"location":"02-canvas/08-menu/01-Context-Menu-Wrapper/#example","title":"Example","text":"<pre><code>    const contextMenuWrapper = (\n        &lt;ContextMenuWrapper\n            contextMenuDef={menuDef}\n            containingDivId=\"main-page\"\n            contextMenuPos={menuPos}\n            contextMenuActionHandler={this.contextMenuActionHandler}\n            closeContextMenu={this.props.closeContextMenu}\n        /&gt;\n    );\n</code></pre>"},{"location":"02-canvas/09-ext-flows/01-External-Subflows-support/","title":"External Subflows","text":""},{"location":"02-canvas/09-ext-flows/01-External-Subflows-support/#introduction","title":"Introduction","text":"<p>The pipeline flow schema describes two ways of storing a sub-flow pipelines for a supernode: local or external. Local sub-flows are stored within the pipeline flow document whereas external pipelines are stored in a separate pipeline flow document (usually as the primary pipeline in that pipeline flow). The supernode that references an external pipeline contains a <code>url</code> property (in <code>&lt;node&gt;.subflow_ref.url</code>) and a <code>pipeline ID</code> property (in <code>&lt;node&gt;.subflow_ref.pipeline_id_ref</code>) to identify the external pipeline flow and the pipeline within it.</p> <p>Common-canvas supports external pipelines but the host application UI code needs to manage the storage and retrieval of any external pipeline flows. To do this the app UI code needs to:</p> <ul> <li>Manage the storage of newly created external pipeline flows.</li> <li>Respond to calls from common-canvas to provide the external pipeline flow(s) when requested.</li> <li>Respond to call from common-canvas when a local pipeline is changed to external or an external is changed to local.</li> </ul> <p>Common-canvas supports lazy loading of external pipeline flows so they will only be requested from your code when the user performs some gesture that requires the pipeline (from within the external pipeline flow) to be displayed.</p>"},{"location":"02-canvas/09-ext-flows/01-External-Subflows-support/#creating-an-external-sub-flow","title":"Creating an external sub-flow","text":"<p>When the common-canvas config property enableExternalPipelineFlows is set to true (the default) and, when a set of objects are selected from which a super node can be created, the default common-canvas context menu will include a <code>Create External Supernode</code> option.</p> <p>When the <code>Create External Supernode</code> option is clicked the <code>createSuperNodeExternal</code> action is executed.</p> <p>If your application doesn\u2019t use the default context menu you can define your own context menu (returned from <code>contextMenuHandler</code>) to contain an option which maps to the <code>createSuperNodeExternal</code> action. See the section on the contextMenuHandler for details on how to do this.</p> <p>When the <code>createSuperNodeExternal</code> action is executed, the <code>beforeEditActionHandler</code> callback is called before the external sub-flow is created. The <code>beforeEditActionHandler</code> is called where the first parameter <code>data</code> has two properties <code>externalUrl</code> and <code>externalPipelineFlowId</code> which will both be set to empty string.  Your code must set these to whatever values you want for the url and pipeline flow ID. The url will be assigned to the <code>subflow_ref.url</code> property of the supernode that is being created. The pipeline flow ID will be assigned to the newly created pipeline flow.</p> <p>Your code must return the <code>data</code> parameter from the <code>beforeEditActionHandler</code> callback if you want the action to proceed and create the sub-flow. If you need to do any asynchronous activity at this point see the documentation on the beforeEditActionHanlder for details on how to do that.</p> <p>When the sub-flow has been created common-canvas will call the <code>editActionHandler</code> callback with the <code>createSuperNodeExternal</code> action. In this callback you can, if you wish, retrieve the pipeline flow document that has been created internally in common-canvas using <code>CanvasController.getExternalPipelineFlow(url)</code>. Your code can then save it to your repository. Alternatively, you can wait until some later time, like perhaps during an auto-save, to retrieve and store the pipeline flow externally in your repository.</p>"},{"location":"02-canvas/09-ext-flows/01-External-Subflows-support/#loading-an-external-sub-flow","title":"Loading an external sub-flow","text":"<p>When the main pipeline flow, displayed by common-canvas, contains a super node that references an external sub-flow it will need to be loaded whenever the user performs a gesture that causes it to be displayed or processed in some way - for example displaying it \u2018in-place\u2019 or converting it from an external to a local supernode. An external sub-flow will also need to be loaded if the top-level pipeline being displayed has a supernode, that refers to an external pipeline, that is already expanded in-place in the saved pipeline flow JSON document being displayed. So, actions that can cause the external pipeline to be loaded are:</p> <ul> <li>loadPipelineFlow</li> <li>expandSuperNodeInPlace</li> <li>displaySubPipeline</li> <li>convertSuperNodeExternalToLocal</li> <li>deconstructSuperNode</li> </ul> <p>When any of these actions are performed common-canvas will call the <code>beforeEditActionHandler</code> callback with the data parameter as the first parameter. The data object will have the following properties:</p> <ul> <li>editType - The name of the action being performed.</li> <li>externalPipelineFlowLoad - This is a boolean which indicates whether the pipeline flow needs to be provided by your code.</li> <li>externalUrl - This is the string which identifies the external pipeline flow document.</li> <li>externalPipelineId - This is the ID of the pipeline being loaded</li> <li>externalPipelineFlow - If <code>externalPipelineFlowLoad</code> if true this will be undefined. Otherwise it will be contain the previously loaded external pipeline flow.</li> </ul> <p>You need to implement the <code>beforeEditActionHandler</code> so that:</p> <ul> <li>when the actions above are being performed and externalPipelineFlowLoad is true, you retrieve the external pipeline flow from your repository</li> <li>you then assign it to the <code>externalPipelineFlow</code> property of the data object</li> <li>you then return the data object from the callback.</li> </ul> <p>Your code must return the <code>data</code> parameter from the <code>beforeEditActionHandler</code> callback if you want the action to proceed and load the external pipeline flow. If you need to do any asynchronous activity at this point see the documentation on the beforeEditActionHanlder for details on how to do that.</p>"},{"location":"02-canvas/09-ext-flows/01-External-Subflows-support/#converting-a-local-supernode-to-an-external-supernode","title":"Converting a local supernode to an external supernode","text":"<p>When the common-canvas config property enableExternalPipelineFlows is set to true, and a local supernode\u2019s is right clicked, the default common-canvas context menu will include a <code>Convert local to external</code> option.  This will execute the <code>convertSuperNodeLocalToExternal</code> action.</p> <p>The <code>convertSuperNodeLocalToExternal</code> action is similar to the <code>createSuperNodeExternal</code> action in that a new external pipeline flow is being created. Consequently, you can follow the instructions in the Creating an external sub-flow section for providing the appropriate properties of the <code>data</code> object in the <code>beforeEditActionHandler</code> and <code>editActionHandler</code> callbacks.</p>"},{"location":"02-canvas/09-ext-flows/01-External-Subflows-support/#converting-an-external-supernode-to-a-local-supernode","title":"Converting an external supernode to a local supernode","text":"<p>When the common-canvas config property enableExternalPipelineFlows is set to true, and an external supernode\u2019s is right clicked, the default common-canvas context menu will include a <code>Convert external to local</code> option.  This will execute the <code>convertSuperNodeExternalToLocal</code> action.</p> <p>The <code>convertSuperNodeExternalToLocal</code> action is similar to the <code>expandSuperNodeInPlace</code> action in that an external pipeline flow may need to be retrieved from your repository. Consequently, you can follow the instructions in the Loading an external sub-flow section for providing the appropriate properties of the <code>data</code> object in the <code>beforeEditActionHandler</code> callback.</p>"},{"location":"02-canvas/09-ext-flows/01-External-Subflows-support/#deleting-an-external-supernodesub-flow","title":"Deleting an external supernode/sub-flow","text":"<p>When the user deletes an external supernode/sub-flow the supernode will be removed from the canvas. You code does not need to do anything unless you want to also remove the external pipeline flow from your repository.</p>"},{"location":"02-canvas/09-ext-flows/01-External-Subflows-support/#clipboard-support","title":"Clipboard support","text":"<p>When a supernode, that refers to an external pipeline, is cut/copied and pasted, the pasted supernode refers to the same external pipeline as the supernode that was cut or copied. This means that if an external supernode is copied to the clipboard and then pasted into the same canvas the result will be two supernodes that refer to the same external pipeline.\u00a0\u00a0</p> <p>The same situation can occur if a supernode, that refers to an external pipeline, is in the palette and that node is dragged multiple times from the palette onto the canvas.</p>"},{"location":"02-canvas/09-ext-flows/01-External-Subflows-support/#manipulating-objects-in-external-pipelines-using-the-canvas-controller-api","title":"Manipulating objects in external pipelines using the Canvas Controller API","text":"<p>Objects (nodes, links comments, etc.) in an external pipeline can be updated by the host application calling the <code>CanvasController</code> API. However, such changes are only effective within common-canvas. It is the host application\u2019s responsibility to make sure these changes are persisted in the external pipeline flow document (if that is the behavior that is required). This can be done by the host application calling <code>CanvasController.getExternalPipelineFlow(url)</code> and then saving the returned document to the appropriate repository.</p>"},{"location":"02-canvas/09-ext-flows/01-External-Subflows-support/#external-pipelines-in-the-elyra-canvas-test-harness","title":"External pipelines in the Elyra Canvas Test Harness","text":"<p>The Test Harness supports external pipeline flows but will only persist any saved flows for the current session. (It just stores them in memory).  You can examine the <code>beforeEditActionHandler</code> and <code>editActionHandler</code> in App.js in the test harness to see how it handles the different actions for managing external pipeline flows.</p>"},{"location":"02-canvas/10-validate/01-Flow-Validation-API/","title":"Flow Validation API","text":""},{"location":"02-canvas/10-validate/01-Flow-Validation-API/#this-function-is-deprectated-and-will-be-removed-in-future-release","title":"This function is deprectated and will be removed in  future release","text":"<p>The Flow Validation API allows application code to programmatically validate the nodes in the flow against it\u2019s property values.  The API can be invoked after setting the Canvas Controller pipeline flow, when opening a new flow, or associated with a canvas context menu item.  To use the Flow Validation API import the FlowValidation object fro common-canvas: <pre><code>import { FlowValidation } from \"@elyra/canvas\";\n</code></pre> then call the API on the object, for example: <pre><code>FlowValidation.validateFlow( ... );\n</code></pre></p> <p>The Flow Validation object provides the following API:</p> <p><pre><code>validateFlow(canvasController, parameterDataCallback, setNodeMessagesCallback, includeMsgTypes)\n    canvasController - an instance of the canvas controller\n    parameterDataCallback \u2013 function to get the parameter data or form data for a node\n    setNodeMessagesCallback \u2013 function to set the validation messages for a node. (optional)\n    includeMsgTypes - array[strings] Return invalid only if messages are found of types contained\n                      in the array. If not specified then any message type causes invalid return. (optional)\n    return - boolean If flow is valid returns true, otherwise returns false.\n</code></pre> where the two callbacks are defined as follows: <pre><code>parameterDataCallback(nodeId)\n    nodeId \u2013 string node Id.\n    function must return this object:\n    {\n        type: \u201cparameterDef\u201d | \u201cform\u201d,\n        data: Json_object\n    }\n\n/* The setNodeMessagesCallback is optional and only useful if not using internal object model.\nsetNodeMessagesCallback(nodeId, messages)\n    nodeId \u2013 string node Id.\n    an array of message objects generated from the validation of the node.\n</code></pre></p> <p>The validateFlow() API will traverse the current flow and for each node invoke the parameterDataCallback() to get with a form data JSON or a parameterDef JSON.  It will validate the JSON for the node and store any messages in the node objects within the model.  The setNodeMessagesCallback() function will be called with all the messages generated for the node.  This is only useful if the application is not using the internal object model. The format of the message object is described in Pipeline Flow UI schema</p> <p>Here is an example of using the FlowValidation API to validate a flow on opening:</p> <pre><code>import { CanvasController, FlowValidation } from \"@elyra/canvas\";\n\ngetNodeForm(nodeId) {\n    const parameterDef = getParameterDefJSON(nodeId);\n    return { type: \"parameterDef\", data: parameterDef };\n}\n\nsetNodeMessages(nodeId, messages) {\n    // code to persist messages in a store in addition to the internal model.\n}\n\nopenCanvas(canvasJson) {\n    const canvasController = new CanvasController();\n    canvasController.setPipelineFlow(canvasJson);\n    FlowValidation.validateFlow(canvasController, this.getNodeForm, this.setNodeMessages);\n}\n</code></pre>"},{"location":"03-props/","title":"Common Properties","text":""},{"location":"03-props/#introduction","title":"Introduction","text":"<p>Common properties displays controls to view and set property values.</p> <p>You can look at the harness/src/client/App.js file of this repo to see examples of code that uses the common properties component.</p>"},{"location":"03-props/#getting-started-with-common-properties-programming","title":"Getting started with Common Properties programming","text":"<p>Note: There are two ways one can use the Common Properties tooling: Either by allowing the form to be built dynamically from a parameterDef JSON (which is comprised of the base property set, ui-hints, conditions, and resources), or by explicitly providing the dialog form for rendering (deprecated). The first approach is recommended as an easier and clearer interface</p> <p>This takes 3 easy steps:</p>"},{"location":"03-props/#step-1-import","title":"Step 1 : Import","text":"<p>To use Common Properties in your React application you need to do the following. First import the CommonProperties React component from the common-canvas library. Elyra Canvas produces both esm and cjs outputs. By default esm will be used when webpack is used to build the consuming application.</p> <p><pre><code>    import { CommonProperties } from \"@elyra/canvas\";\n</code></pre> Properties Only</p> <p>To import only common properties functionality in <code>cjs</code> format use:</p> <pre><code>    import { CommonProperties } from \"@elyra/canvas/dist/lib/properties\";\n</code></pre>"},{"location":"03-props/#step-2-set-the-data","title":"Step 2 : Set the data","text":"<p>Next you\u2019ll need to populate propertiesInfo with:</p> <p><pre><code>propertiesInfo: {\n  parameterDef: this.parameterDef,          // Parameter definitions/hints/conditions\n  appData: \"{user-defined}\",                // User data returned in applyPropertyChanges [optional]\n  additionalComponents: \"{components}\",     // Additional component(s) to display [optional]\n  messages: \"[node_messages]\",              // Node messages array [optional]\n  expressionInfo: this.expressionInfo,      // Information for expression builder [optional],\n  initialEditorSize: \"{size}\",              // This value will override the value of editor_size in uiHints. This can have a value of \"small\", \"medium\", \"large\", or null [optional]\n  id: \"{id}\"                                // Unique parameter definition ID [Optional]\n}\n</code></pre> parameterDef schema and examples 3.1 Common Properties Parameter Definition <code>expressionInfo</code> schema and examples</p> <p>or\u2026</p> <p>(Deprecated) <pre><code>propertiesInfo: {\n  formData: this.formData,\n  appData: \"{user data returned back in applyPropertyChanges}\", //optional\n  additionalComponents: \"{additional control(s) to display}\",   //optional\n  messages: \"[node_messages]\",                                  // Node messages array [optional]\n  expressionInfo: this.expressionInfo,                          // Information for expression builder [optional]\n  initialEditorSize: \"{size}\",                                  // This value will override the value of editor_size in uiHints. This can have a value of \"small\", \"medium\", \"large\", or null [optional]\n  id: \"{id}\"                                                    // Unique parameter definition ID [Optional]\n}\n</code></pre> formData schema form information wiki</p> <p>The optional messages attribute can be used to set validation messages associated with a node.  The format of the message objects is defined in Pipelin Flow UI schema</p>"},{"location":"03-props/#step-3-display-the-properties-editor","title":"Step 3 : Display the properties editor","text":"<p>Finally you\u2019ll need to display the editor. Inside your render code, add the following: <pre><code>import { IntlProvider } from \"react-intl\";\nvar i18nData = require(\"../intl/en.js\");\n\nvar locale = \"en\";\nvar messages = i18nData.messages;\n  &lt;IntlProvider key=\"IntlProvider2\" locale={ locale } messages={ messages }&gt;\n    &lt;CommonProperties\n      ref={(instance) =&gt; {\n        this.CommonProperties = instance;\n      }}\n      propertiesInfo={this.propertiesInfo} // required\n      propertiesConfig={this.propertiesConfig} // optional\n      callbacks={this.callbacks} // required\n      customPanels={[CustomSliderPanel, CustomTogglePanel]} //optional\n      customControls={[CustomSliderControl]} // optional\n      light // optional\n    /&gt;\n  &lt;/IntlProvider&gt;\n</code></pre> Properties</p> <ul> <li>propertiesInfo <code>object</code>: See above</li> <li>propertiesConfig <code>object</code>:<ul> <li>containerType <code>string</code>: type of container to display the properties, can be \u201cModal\u201d, \u201cTearsheet\u201d, or \u201cCustom\u201d.  default: <code>\"Custom\"</code></li> <li>rightFlyout <code>boolean</code>: If set to true, groups will be displayed as an accordion. If false, groups are displayed as tabs. default: <code>false</code></li> <li>applyOnBlur <code>boolean</code>: calls applyPropertyChanges when focus leave common-properties.  default: <code>false</code></li> <li>disableSaveOnRequiredErrors <code>boolean</code>: Disable the properties editor \u201csave\u201d button if there are required errors</li> <li>enableResize <code>boolean</code>: adds a button that allows the right-side fly-out editor to expand/collapse between small and medium sizes. default: <code>true</code></li> <li>conditionReturnValueHandling <code>string</code>: used to determine how hidden or disabled control values are returned in applyPropertyChanges callback.  Current options are \u201cvalue\u201d or \u201cnull\u201d.  default: <code>\"value\"</code></li> <li>buttonLabels <code>object</code>:<ul> <li>primary <code>string</code>: Label to use for the primary button of the properties dialog</li> <li>secondary <code>string</code>: Label to use for the secondary button of the properties dialog</li> </ul> </li> <li>heading <code>boolean</code>: show heading and heading icon in right-side fly-out panels. default: <code>false</code></li> <li>schemaValidation <code>boolean</code>: If set to true, schema validation will be enabled when a parameter definition has been set in CommonProperties. Any errors found will be reported on the browser dev console. It is recommended you run with schema validation switched on while in development mode.</li> <li>applyPropertiesWithoutEdit <code>boolean</code>: When true, will always call <code>applyPropertyChanges</code> even if no changes were made.  default: <code>false</code></li> <li>maxLengthForMultiLineControls <code>number</code> - maximum characters allowed for multi-line string controls like textarea. default: 1024</li> <li>maxLengthForSingleLineControls <code>number</code> - maximum characters allowed for single-line string controls like textfield. default: 128</li> <li>convertValueDataTypes <code>boolean</code> - Default false. If set to true, currentParameter values whose data type does not match what is defined in the parameter definitions will be converted to the specified data type.</li> <li>trimSpaces <code>boolean</code> - Default true. If set to false, condition ops(<code>isEmpty</code>, <code>isNotEmpty</code>) and <code>required</code> fields are allowed to only contain spaces without triggering condition errors.</li> <li>showRequiredIndicator <code>boolean</code> - Default true to show <code>(required)</code> indicator. If set to false, show <code>(optional)</code> indicator next to properties label.</li> <li>showAlertsTab <code>boolean</code> - Default true to show \u201cAlerts\u201d tab whenever there are error or warning messages. If set to false, Alerts tab won\u2019t be displayed.</li> <li>returnValueFiltering <code>array</code> - Default []. When set this will filter out any values in the array in the parameters returned when <code>applyPropertyChanges</code> is call.  Only primitive data types are currently supported.</li> <li>categoryView <code>string</code> - View categories in right-flyout. Can be <code>\"accordions\"</code> or <code>\"tabs\"</code>. default: <code>\"accordions\"</code>.</li> </ul> </li> <li>callbacks object - See callbacks section for more details on each callback method.</li> <li>customPanels <code>array</code>: array of custom panels.  See 3.5 Common Properties Custom Components for more details.</li> <li>customControls <code>array</code>: array of custom controls. See 3.5 Common Properties Custom Components for more details.</li> <li>customConditionOps <code>array</code>: array of custom condition operators.  See 3.5 Common Properties Custom Components</li> <li>light <code>boolean</code>: Carbon controls in common-properties will use light mode. When the <code>light</code> option is disabled, the background color will be the same as the Carbon theme background. When the <code>light</code> option is enabled, the background color is set to $ui-01. Defaults to <code>true</code></li> </ul> <p>Internationalization and override of labels in CommonProperties The CommonProperties dialogs have a set of labels that can have customized and internationalized values.  CommonProperties uses the react-intl package to provide internationalization of these labels.  This requires the <code>IntlProvider</code> element to wrap the <code>CommonProperties</code> element. You can look at the harness/src/intl/en.js file of this repo to see the list of labels and the default values.</p> <p>Reference methods <pre><code>/*\n* @closeEditor (boolean) - determines if closePropertiesDialog is called or not\n*/\napplyPropertiesEditing(closeEditor)\n</code></pre></p>"},{"location":"03-props/#using-commonproperties-in-commoncanvas-right-flyout-panel","title":"Using CommonProperties in CommonCanvas right-flyout panel","text":"<p>Common Canvas has a right-flyout panel that can render a React object. It can be used to render Common Properties in a flyout panel.</p> <p>Create a CommonProperties object with containerType set to \u201cCustom\u201d and rightFlyout set to true. <pre><code>    const rightFlyoutContent =(&lt;CommonProperties\n        propertiesInfo={this.propertiesInfo}\n        propertiesConfig={{ containerType: \"Custom\", rightFlyout: true }}\n        callbacks={this.callbacks}\n    /&gt;);\n</code></pre> Pass the CommonProperties object into CommonCanvas\u2019s rightFlyoutContent props. Also set the showRightFlyout boolean to tell CommonCanvas when to show the rightFlyout. <pre><code>    &lt;CommonCanvas\n  config={commonCanvasConfig}\n  contextMenuHandler={this.contextMenuHandler}\n  contextMenuActionHandler= {this.contextMenuActionHandler}\n  editActionHandler= {this.editActionHandler}\n  clickActionHandler= {this.clickActionHandler}\n  decorationActionHandler= {this.decorationActionHandler}\n  toolbarConfig={toolbarConfig}\n  toolbarMenuActionHandler={this.toolbarMenuActionHandler}\n  rightFlyoutContent={rightFlyoutContent}\n  showRightFlyout={showRightFlyout}\n    /&gt;\n</code></pre></p>"},{"location":"03-props/#callbacks","title":"Callbacks","text":""},{"location":"03-props/#applypropertychangespropertyset-appdata-additionalinfo-undoinfo-uiproperties","title":"applyPropertyChanges(propertySet, appData, additionalInfo, undoInfo, uiProperties)","text":"<p>Executes when the user clicks <code>OK</code> in the property dialog.  This callback allows users to save the current property values.</p> <ul> <li>propertySet: The set of current property values</li> <li>appData: (optional) application data that was passed in to <code>propertiesInfo</code></li> <li>additionalInfo: Object with additional information returned:<ul> <li>messages: (optional) An array of messages associated with the nodes current property values.</li> <li>title: The title of the properties editor</li> </ul> </li> <li>undoInfo: Object with information needed to undo this apply:<ul> <li>properties: Set of property values;</li> <li>messages: (optional) An array of messages associated with the nodes property values.</li> <li>uiProperties: (optional) Set of UI only properties values</li> </ul> </li> <li>uiProperties: The set of UI only property values (optional)</li> </ul> <pre><code>applyPropertyChanges(propertySet, appData, additionalInfo, undoInfo, uiProperties) {\n  var data = {\n    propertySet: propertySet,\n    appData: appData,\n    additionalInfo: {\n        messages: messages,\n        title: title\n    }\n  };\n}\n</code></pre>"},{"location":"03-props/#closepropertiesdialogclosesource","title":"closePropertiesDialog(closeSource)","text":"<p>Executes when user clicks <code>Save</code> or <code>Cancel</code> in the property editor dialog.  This callback is used to control the visibility of the property editor dialog. <code>closeSource</code> identifies where this call was initiated from. It will equal \u201capply\u201d if the user clicked on \u201cSave\u201d when no changes were made, or \u201ccancel\u201d if the user clicked on \u201cCancel\u201d</p> <pre><code>closePropertiesDialog() {\n  this.setState({ showPropertiesDialog: false, propertiesInfo: {} });\n}\n</code></pre>"},{"location":"03-props/#propertylistener","title":"propertyListener()","text":"<p>Executes when a user property values are updated.</p> <pre><code>propertyListener(data) {\n\n}\n</code></pre>"},{"location":"03-props/#controllerhandler","title":"controllerHandler()","text":"<p>Executes when the property controller is created.  Returns the property controller.  See here for APIs</p> <pre><code>controllerHandler(propertyController) {\n\n}\n</code></pre>"},{"location":"03-props/#actionhandler","title":"actionHandler()","text":"<p>Called whenever an action is ran.  <code>id</code> and <code>data</code> come from uihints and appData is passed in with propertiesInfo.</p> <pre><code>actionHandler(id, appData, data) {\n\n}\n</code></pre>"},{"location":"03-props/#buttonhandler","title":"buttonHandler()","text":"<p>Called when the edit button is clicked on in a <code>readonlyTable</code> control, or if a custom table button is clicked. The callback provides the following data:</p> <ul> <li>data: an object that consists of<ul> <li>type: of button the click was invoked from.<ul> <li><code>edit</code> is returned from the edit button click of a <code>readonlyTable</code> control.</li> <li><code>custom_button</code> is returned from the custom button click of a complex type control.</li> </ul> </li> <li>propertyId: of the control that was clicked.</li> <li>buttonId: of the button that was clicked from a custom table button.</li> </ul> </li> </ul> <pre><code>buttonHandler(data) {\n\n}\n</code></pre>"},{"location":"03-props/#buttoniconhandler","title":"buttonIconHandler()","text":"<p>Called when there is a <code>buttons</code> uihints set in the <code>complex_type_info</code> section of the parameter definition. This buttonIconHandler expects a Carbon Icon jsx object as the return value from the callback. This is used to display the Carbon icon in the custom table button. The buttonIconHandler provides the following data:</p> <ul> <li>data: an object that consists of<ul> <li>type: <code>customButtonIcon</code></li> <li>propertyId: of the control that was clicked.</li> <li>buttonId: of the button that was clicked from a custom table button.</li> <li>carbonIcon: The name of the Carbon icon specified in the uihints. The corresponding jsx object is expected to be returned in the callback.</li> </ul> </li> </ul> <pre><code>buttonIconHandler(data, callbackIcon) {\n  if (data.type === \"customButtonIcon\" &amp;&amp; data.carbonIcon === \"Edit32\") {\n    callbackIcon(&lt;Edit32 /&gt;);\n  }\n}\n</code></pre>"},{"location":"03-props/#helpclickhandler","title":"helpClickHandler()","text":"<p>Executes when user clicks the help icon in the property editor dialog. The callback provides the following data:</p> <ul> <li>nodeTypeId: in case of parameterDef, id property of uihints; in case formData, the componentId.</li> <li>helpData: Optional helpData specified in paramDef/formData (see below).</li> <li>appData: Optional application data that was passed in to <code>propertiesInfo</code> <pre><code>helpClickHandler(nodeTypeId, helpData, appData) {\n\n}\n</code></pre> To control whether a node shows the help icon in the right fly-out, a help object with optional helpData needs to be provided in the paramDef or formData:</li> <li>paramDef: Provide help object in operator\u2019s uihints. If help object exists, the icon will be shown. Optionally, provide a helpData object within the help object, which will be passed in the helpClickHandler callback. https://github.com/elyra-ai/pipeline-schemas/blob/master/common-pipeline/operators/uihints-v2-schema.json#L64</li> <li>formData: add help object to form definition. The https://github.com/elyra-ai/pipeline-schemas/blob/master/common-canvas/form/form-v2-schema.json#L51</li> </ul> <p>If no help object is found, no help link will be shown.</p>"},{"location":"03-props/#titlechangehandler","title":"titleChangeHandler()","text":"<p>Called on properties title change. This callback can be used to validate the new title and return warning or error message if the new title is invalid. This callback is optional.</p> <p>In case of error or warning, titleChangeHandler should call callbackFunction with an object having type and message. If the new title is valid, no need to call the callbackFunction. <pre><code>titleChangeHandler(title, callbackFunction) {\n  // If Title is valid. No need to send anything in callbackFunction\n  if (title.length &gt; 15) {\n    callbackFunction({\n      type: \"error\",\n      message: \"Only 15 characters are allowed in title.\"\n    });\n  }\n}\n</code></pre> where:</p> <ul> <li>type (string, required): This must be one of two values: \u201cwarning\u201d or \u201cerror\u201d.</li> <li>message(string, required): Error or warning message. There is no restriction on length of the message.</li> </ul>"},{"location":"03-props/#propertiesactionlabelhandler","title":"propertiesActionLabelHandler()","text":"<p><pre><code>propertiesActionLabelHandler()\n</code></pre> This is an optional handler you don\u2019t need to implement anything for it unless you want to. This callback allows your code to override the default tooltip text for the <code>Undo</code> and <code>Redo</code> buttons. The <code>propertiesActionLabelHandler</code> callback, when provided, is called for the save properties action that is performed in common-properties. This callback should return a string or null. If a string is returned it will be shown in the tooltip for the <code>Undo</code> button in the toolbar preceded by \u201cUndo:\u201d and the string will also appear in the tooltip for the <code>Redo</code> button (when appropriate) preceded by \u201cRedo:\u201d. If null is returned, common-properties will display the default text <code>Save {node_name} node properties</code> for the Undo and Redo buttons.</p>"},{"location":"03-props/#tooltiplinkhandler","title":"tooltipLinkHandler()","text":"<p>Optional callback used for adding a link in properties tooltips. link object must be defined under description in uiHints parameter info. Common-properties internally pass the link object to tooltipLinkHandler callback. This callback must return an object having url and label.</p> <pre><code>tooltipLinkHandler(link) {\n    return { url: \"https://www.google.com/\", label: \"More info\" };\n}\n</code></pre>"},{"location":"03-props/01-Parameter-Definition/","title":"Parameter Definitions","text":"<p>The parameter definition json files is an easy way to provide input for controlling the common properties dialog.  It consists of information that is available in the operator json combined with UI hints, information on data sets, and resources.  </p> <p>The parameter definition has a defined schema and set of examples located here: schema and examples </p> <p>The parameter definition consists of eight sections. </p>"},{"location":"03-props/01-Parameter-Definition/#title-definition","title":"Title Definition","text":"<p>The title of the properties editor. If <code>editable</code> is set to true (default), the title can be edited. If set to false, the title will be readonly.</p> <pre><code>\"titleDefinition\": {\n    \"title\": \"Properties Title\",\n    \"editable\": true\n  }\n</code></pre>"},{"location":"03-props/01-Parameter-Definition/#current-parameters","title":"Current Parameters","text":"<p>A list of input parameters and initial values upon input.  The list is a set of key/value pairs with the key being the field name and the value is the initial value.</p> <p>Example <pre><code>\"current_parameters\": {\n    \"targetField\": [],\n    \"inputFieldList\": [],\n    \"elasticNetParam\": 0.0,\n    \"fitIntercept\": false,\n    \"maxIter\": 75,\n    \"regParam\": 0.1,\n    \"standardization\": true,\n    \"threshold\": 0.5,\n    \"tol\": 0.0000010\n  }\n</code></pre></p>"},{"location":"03-props/01-Parameter-Definition/#parameter-definitions_1","title":"Parameter Definitions","text":"<p>The list of parameters definitions for this property dialog.  The list contains the name of the parameter, the data type of the parameter, the role and the default value.  The information provided is as needed by the backend engine, i.e. the parameter name should be the name of the parameter that is expected for the backend engine.</p> <p>The list of parameter definitions has the following attributes. * <code>id</code> (string) Required Parameter identifier as consumed by the backend engine. * <code>default</code> (any) The default value of the parameter.  * <code>enum</code> (array[string]) A restricted list of string values that are valid for the field.  * <code>type</code> (string) Parameter type as consumed by the backend engine.  * <code>role</code> (string) Parameter role, which is an optional specialization of the type.  * <code>required</code> (boolean) Indication whether parameter is required or optional. </p> <p>Parameter types have one of a fixed set of basic types. These are:</p> <ul> <li><code>integer</code></li> <li><code>double</code></li> <li><code>string</code></li> <li><code>date</code></li> <li><code>time</code></li> <li><code>timestamp</code> </li> <li><code>custom</code></li> </ul> <p>These can be used as maps or arrays e.g.:</p> <pre><code>array[&lt;value-type&gt;]: a sequence or list of values\n</code></pre> <p>Parameter roles defined by the role attribute can be one of:</p> <ul> <li><code>expression</code>: an expression assumed to be in the expression language for the run time</li> <li><code>column</code>: value represents one or more columns from the data model visible to this operator</li> <li><code>new_column</code>: value represents the name of a new column to be added to the data model and must therefore not match an existing column and conform to existing syntactic restrictions.</li> </ul> <p>Example <pre><code>\"parameters\": [\n    {\n      \"id\":\"targetField\",\n      \"type\":\"string\",\n      \"default\":\"\",\n      \"role\":\"column\"\n    },\n    {\n      \"id\":\"inputFieldList\",\n      \"type\":\"array[string]\",\n      \"default\":[],\n      \"role\":\"column\"\n    },\n    {\n      \"id\": \"impurity\",\n      \"enum\": [\n        \"gini\",\n        \"entropy\"\n      ],\n      \"default\": \"gini\"\n    },\n    {\n      \"id\":\"elasticNetParam\",\n      \"type\":\"double\",\n      \"default\":0.0\n    }\n]\n</code></pre></p>"},{"location":"03-props/01-Parameter-Definition/#ui-only-parameters","title":"UI-only Parameters","text":"<p>A list of input parameters and initial values upon input.  This set of parameters are separated from the backend parameters (current parameters).  The idea is that these parameters are not passed into the backend engine by the common properties consumer.</p> <p>Example <pre><code>\"current_ui_parameters\": {\n    \"databaseResource\": true,\n    \"tol\": 0.0000010\n  }\n</code></pre></p> <p>UI-only parameters require information about the parameters same as the parameter definition information used for the backend parameters.  The UI-only parameter definition information is stored in the UI-hints section in the sub-section named <code>ui_parameters</code>.    A description of the UI hints specifications can be found here: 3.2 Common Properties UI Hints</p> <p>UI-only properties are returned to the consuming application via a separate parameter on the applyPropertiesChanges callback.  See the <code>Callbacks</code> section of 3.1 Common Properties Documentation section.</p>"},{"location":"03-props/01-Parameter-Definition/#complex-types","title":"Complex Types","text":"<p>The complex types section is an array of </p> <p>The complex types have the following attributes. * <code>id</code> (string) Required Identifier of complex type, can be referenced in other places. * <code>type</code> (string) If <code>object</code> is specified, common properties will return the values as an array of objects consisting of key value pairs. This defaults to <code>array</code>. * <code>key_definition</code> (object) A parameter definition attribute on the key parameter field. * <code>parameters</code> (object) Required List of parameters fields.  Each parameter can be defined as a parameter definition attribute or a complex type attribute.</p> <p>Example of complex types <pre><code>\"complex_types\": [\n    {\n      \"id\": \"SortEntry\",\n      \"type\": \"object\",\n      \"key_definition\": {\n        \"id\": \"field\",\n        \"type\": \"string\",\n        \"role\": \"column\",\n        \"default\": \"\"\n      },\n      \"parameters\": [\n        {\n          \"id\": \"sort_order\",\n          \"enum\": [\n            \"Ascending\",\n            \"Descending\"\n          ],\n          \"default\": \"Ascending\"\n        }\n      ]\n    }\n  ]\n</code></pre></p>"},{"location":"03-props/01-Parameter-Definition/#a-note-on-parameters-and-complex-types","title":"A Note on Parameters and Complex Types:","text":"<p>Note that both parameter and complex type definitions are in the exact same format as defined in the operator schema. Therefore the contents of operator JSON files can be used for these two sections.</p>"},{"location":"03-props/01-Parameter-Definition/#ui-hints","title":"UI Hints","text":"<p>A set of specifications for controlling the layout and flow of the common properties.  A description of the UI hints specifications can be found here: 3.2 Common Properties UI Hints</p>"},{"location":"03-props/01-Parameter-Definition/#conditions","title":"Conditions","text":"<p>A set of specifications for controlling validation checking of parameters during the common properties dialog. A description of the Conditions specifications can be found here: 3.4 Common Properties Conditions</p>"},{"location":"03-props/01-Parameter-Definition/#data-set-metadata","title":"Data Set Metadata","text":"<p>The data set metadata is an array of datarecord-metadata objects as defined in the datarecord-metadata JSON schema. Each datarecord-metadata object contains and array of fields that provide column information on the input data set.  schema and examples </p> <p>The fields have the following attributes. * <code>name</code> (string) Required Field name. Must be unique within the dataset. * <code>type</code> (string) Required Field type. Can be a primitive type (string, integer, double, date, time, timestamp), or a vector, map, or struct containing those types. Required. * <code>nullable</code> (boolean) Indicates whether or not one can place null values into the field.  Default: False. * <code>metadata</code> (object) A set of additional metadata attributes.</p> <p>The additional metadata attributes are as follows. * <code>description</code> (string) A description of the field. * <code>measure</code> (string) The field measurement type.  The value can be one of the following. <code>range, discrete, flag, set, ordered-set, typeless, collection, geospatial, default</code> * <code>role</code> (string) Field role for modeling. The value can be one of the following. <code>input, target, both, none, partition, split, frequency, record-id</code> * <code>max_string_length</code> (number) Maximum character length for string fields. Length is unlimited when not present. * <code>values</code> (array[string]) Array of unique categorical values for the column. * <code>ranges</code> (object) Minimum and maximum discovered values for scalar data.</p> <p>Example  <pre><code>\"dataset_metadata\": [\n  {\n    \"name\": \"Schema-1\",\n    \"fields\": [\n      {\n        \"name\": \"Age\",\n        \"type\": \"integer\",\n        \"metadata\": {\n          \"description\": \"\",\n          \"measure\": \"range\",\n          \"role\": \"input\"\n        }\n      },\n      {\n        \"name\": \"Sex\",\n        \"type\": \"string\",\n        \"metadata\": {\n          \"description\": \"\",\n          \"measure\": \"discrete\",\n          \"role\": \"input\"\n        }\n      },\n      {\n        \"name\": \"BP\",\n        \"type\": \"string\",\n        \"metadata\": {\n          \"description\": \"\",\n          \"measure\": \"discrete\",\n          \"role\": \"input\"\n        }\n      }\n    ]\n  },\n  {\n    \"name\": \"Schema-2\",\n    \"fields\": [\n      {\n        \"name\": \"Birthdate\",\n        \"type\": \"date\",\n        \"metadata\": {\n          \"description\": \"Date of birth\",\n          \"measure\": \"range\",\n          \"role\": \"input\"\n        }\n      }\n    ]\n  }\n]\n</code></pre></p>"},{"location":"03-props/01-Parameter-Definition/#resources","title":"Resources","text":"<p>This is a map of string resources.</p> <p>Example: <pre><code>\"resources\":{\n  \"org.apache.spark.ml.classification.DecisionTreeClassifier.label\":\"Random Forest Classifier\",\n  \"org.apache.spark.ml.classification.DecisionTreeClassifier.desc\":\"Fitted Random Forest Classification Model\",\n  \"inputFieldList.label\":\"Input columns\",\n  \"inputFieldList.desc\":\"Select one or more input columns\",\n  \"targetField.label\":\"Target column\",\n  \"targetField.desc\":\"Select a target column\",\n  \"max_depth_not_valid\":\"The max depth parameter must be greater than or equal to zero\",\n  \"max_iter_not_valid\": \"The max iterations parameter must be greater than or equal to zero\",\n  \"min_instances_per_node_not_valid\": \"The minimum instances per node value must be &gt;= 1\",\n  \"subsampling_rate_not_valid\": \"The subsampling rate value must be &gt; 0 and &lt;= 1\"\n}\n</code></pre></p>"},{"location":"03-props/02-UI-Hints/","title":"UI Hints","text":"<p>UI hints is a section of the property definition json and  contains specifications to assist in the presentation and flow of the property dialog.  The specifications indicate which controls to use to display and gather input on the fields. uihints schema</p> <p>The UI Hints section consists a set of simple and complex attributes.</p> <p>The simple attributes are:</p> <ul> <li><code>id</code> (string) Dialog id.</li> <li><code>label</code> (object) External name of dialog.<ul> <li>See Resource Definition</li> </ul> </li> <li><code>description</code> (object) Description of dialog.<ul> <li>See Resource Definition</li> </ul> </li> <li><code>editor_size</code> (string) The width of the properties editor panel.  This can have a value of <code>\"small\"</code>, <code>\"medium\"</code>, <code>\"large\"</code> or <code>\"max\"</code>. The default is <code>\"small\"</code>. <ul> <li>When <code>\"small\"</code> is specified the properties panel is displayed with a default width of 320px and with a resize button that allows the panel to be increased in size up to the <code>\"medium\"</code> size which is 480px.</li> <li>When <code>\"medium\"</code> is specified the properties panel has a width of 480px and with a resize button that allows the panel to be increased in size up to the <code>\"large\"</code> size which is 640px.</li> <li>When <code>\"large\"</code> is specified the properties panel has a width of 640px and with a resize button that allows the panel to be increased in size up to the <code>\"max\"</code> size which is 900px.</li> <li>When <code>\"max\"</code> is specified the properties panel has a width of 900px and no resize button is displayed.  </li> </ul> </li> <li><code>pixel_width</code> (object) This optional property gives finer control over the minimum and maximum sizes of the properties editor panel. If this is omitted the properties editor width is controlled by the <code>editor_size</code> property. <code>pixel_width</code> is an object with two properties <code>min</code> and <code>max</code> which are both numbers.<ul> <li>If <code>min</code> is specified it overrides the default size of the shrunken panel and <code>max</code> is based on the <code>editor_size</code> value.</li> <li>If <code>max</code> is specified it overrides the default size of the expanded panel and <code>min</code> is based on the <code>editor_size</code> value. </li> <li>If <code>editor_size</code> is set to <code>\"large\"</code> only the <code>max</code> value will be used to specify the size of the panel and no resize button will be displayed. </li> </ul> </li> </ul> <p>A warning will be displayed in the console if you specify an invalid value for either <code>min</code> or <code>max</code> such as making <code>min</code> greater than <code>max</code>.  </p> <p>Example of the simple attributes: <pre><code>\"uihints\": {\n  \"id\":\"org.apache.spark.ml.ibm.transformers.Distinct\",\n  \"icon\": \"images/transformationspark.svg\",\n  \"label\": {\n    \"default\": \"Distinct\"\n  },\n  \"editor_size\": \"medium\",\n  \"pixel_width\": {\n    \"min\": 400,\n    \"max\": 800\n  },\n  \"description\": {\n    \"default\": \"Remove rows to leave only rows with distinct combinations of rows\"\n}\n</code></pre></p> <p>The complex attributes of the UI hints section are:</p>"},{"location":"03-props/02-UI-Hints/#group-info","title":"Group-info","text":"<p>Group info attributes.</p> <ul> <li><code>id</code> (string) Required Panel id</li> <li><code>type</code> (string) The group type to be displayed. see Group/Panel Controls in 3.3 Common Properties Controls.</li> <li><code>depends_on_ref</code> (string) Property name this group depends upon. Valid for panelSelector groups only.</li> <li><code>label</code> (object) Group label.<ul> <li>See Resource Definition</li> </ul> </li> <li><code>description</code> (object) Group description.  Only used with <code>textPanel</code> and <code>actionPanel</code>.<ul> <li>See Resource Definition</li> <li>See Dynamic Text Expressions</li> <li><code>link</code> (object) Optional link in the description. tooltipLinkHandler callback must be defined whenever link object is added in uiHints..<ul> <li><code>id</code> (string) Required unique link id.</li> <li><code>data</code> (object) Data passed to the tooltipLinkHandler callback.</li> </ul> </li> </ul> </li> <li><code>parameter_refs</code> (array[string]) List of parameter to be displayed.</li> <li><code>action_refs</code> (array[string]) List of action to be displayed.  Used with <code>actionPanel</code> only.</li> <li><code>group_info</code> (object) List of additional group information. </li> <li><code>data</code> (any) Returned in custom panel constructor without any changes.</li> <li><code>insert_panels</code> (boolean) Indicates whether panels, contained with a panelSelector, should be inserted between the radio buttons of a radio button set indicated by the depends_on_ref parameter.</li> <li><code>nested_panel</code> (boolean) Indicate whether panel should be nested. Nested panels are indented by 16px from the left and display left border. Default is false.</li> <li><code>class_name</code> (string) Optional classname for this group</li> <li><code>open</code> (boolean) Optional used to determine if a panel should be open or not by default.  Used with <code>twistyPanel</code> only.  Default is <code>false</code>.</li> </ul> <p>Example group info section: <pre><code>\"group_info\": [\n      {\n        \"id\": \"settings\",\n        \"label\": {\n          \"default\": \"Settings\"\n        },\n        \"type\": \"columnSelection\",\n        \"parameter_refs\": [\n          \"keys\"\n        ]\n      }\n    ]\n</code></pre></p>"},{"location":"03-props/02-UI-Hints/#ui-only-parameters","title":"UI-only Parameters","text":"<p>UI-only parameters require information about the parameters same as the parameter definition information used for the backend parameters.  The UI-only parameter definition information is stored in the UI-hints section in the sub-section named <code>ui_parameters</code>.  The format of the information in the <code>ui_parameters</code> sub-section is documented in the <code>Parameter Definition</code> section of Common Properties Parameter Definition. </p> <p>Example <pre><code>\"ui_parameters\": [\n    {\n      \"id\":\"databaseResource\",\n      \"type\":\"boolean\",\n      \"default\":true\n    },\n    {\n      \"id\":\"toi\",\n      \"type\":\"double\",\n      \"default\":0.0\n    }\n]\n</code></pre></p> <p>The UI-only parameters need to be added to other UI Hints sections (for example <code>Group Info</code> and canbe refered to by the <code>parameter_ref</code> field just like backend parameters.</p>"},{"location":"03-props/02-UI-Hints/#parameter-info","title":"Parameter Info","text":"<p>The parameter info section contains the list of parameters to gather values on through the property dialogs and UI hints about each parameter.  The UI hints provide information to facilitate the UI controls used to display the parameter in the property dialogs.</p> <p>Parameter info attributes.</p> <ul> <li><code>parameter_ref</code> (string) Required Parameter name.</li> <li><code>label</code> (object) External name for parameter.</li> <li>See Resource Definition</li> <li><code>label_visible</code> (boolean) Determines whether to display the label for a control.</li> <li><code>description</code> (object) Description of parameter with optional placement context.<ul> <li>See Resource Definition</li> <li><code>placement</code> (string) Placement context for the text.  Valid values are <code>as_tooltip, on_panel</code>.</li> <li><code>link</code> (object) Optional link in the description. tooltipLinkHandler callback must be defined whenever link object is added in uiHints..<ul> <li><code>id</code> (string) Required unique link id.</li> <li><code>data</code> (object) Data passed to the tooltipLinkHandler callback.</li> </ul> </li> </ul> </li> <li><code>control</code> (string) Which control to use. see Parameter Controls in 3.3 Common Properties Controls.</li> <li><code>increment</code> (number) Determines the increment/decrement value for the spinner control only. The default value is <code>1</code>.</li> <li><code>orientation</code> (string) Determines how the control is displayed. Valid values are <code>vertical, horizontal</code>.</li> <li><code>width</code> (number) Column width for tables. The widths provided for table columns are used to calculate relative widths for each table column. So for example a 3 column table with widths of 20, 30, and 50 would use 20%, 30%, and 50% of the overall table width, respectively.</li> <li><code>char_limit</code> (number) Limits the number of characters a user can enter into the control for string parameters only.</li> <li><code>display_chars</code> (number) This has been deprecated and is subject to removal. Limits the number of characters displayed for a text field in a column in a table.  The text will have an ellipsis appended at this limit. Defaults to 64 characters.</li> <li><code>separator</code> (string) Determines where to put a separator relative to the current control.  Valid values are <code>after, before</code>.</li> <li><code>visible</code> (boolean) Determines whether to display control in a table cell. Used in complex types only.</li> <li><code>place_holder_text</code> (object) Text hint for the user displayed input controls. <ul> <li>See Resource Definition</li> </ul> </li> <li><code>resource_key</code> (string) Used as a key for enum value labels in the resources section of property definition.</li> <li><code>edit_style</code> (string) Editing style of elements in a table. Valid values are <code>subpanel, inline, on_panel</code>.</li> <li><code>value_icons</code> (array[string]) For enumerated types, this defines the set of icons for the valid values. The ordering must be consistent with the order in the parameter enum attribute.</li> <li><code>filterable</code> (boolean) Determines if this column values can be filtered so that only rows that match the filter in column values are shown in the table. Applies to complex parameters only.</li> <li><code>sortable</code> (boolean) Determines if this column values can be sorted into ascending/descending order in a table. Applies to complex parameters only.</li> <li><code>number_generator</code> (object) Describes a number generator button beside numeric control. The \u2018label\u2019 element is a standard resource item, and the \u2018range\u2019 element contains \u2018min\u2019 and \u2018max\u2019 attributes to constrain the range of generated numbers.</li> <li><code>dm_default</code> (string) Data record metadata field to be used for default values in table cell columns. Typically this is used with parameters in complex structures in which the key field is a column name. Valid values are <code>type</code>, <code>description</code>, <code>measure</code>, and <code>modeling_role</code>.</li> <li><code>dm_image</code> (string) This can be set to display an icon of the corresponding dm type in the <code>role</code>:<code>column</code> field of a table. Valid values are <code>measure</code>, <code>type</code>, <code>none</code></li> <li><code>summary</code> (boolean) Determines if parameter should be shown in the summary when using a <code>summaryPanel</code>. </li> <li><code>text_before</code> (object) Text to be displayed before the control<ul> <li>See Resource Definition</li> <li><code>type</code> (string) Adds a icon and additional formatting to the text.  Only <code>info</code> is support at this time.</li> <li>See Dynamic Text Expressions</li> </ul> </li> <li><code>text_after</code> (object) Text to be displayed after the control<ul> <li>See Resource Definition</li> <li><code>type</code> (string) Adds a icon and additional formatting to the text.  Only <code>info</code> is support at this time.</li> <li>See Dynamic Text Expressions</li> </ul> </li> <li><code>custom_control_id</code> (string) Id that is used to determine which custom control to use when <code>control=custom</code></li> <li><code>data</code> (any) Returned in custom control constructor without any changes.</li> <li><code>rows</code> (integer) Number of rows to show in a table before scrolling starts. If one table in a panel is set to -1, that table will use the remaining available vertical space, down to a minimum of 2 rows.  Used in expression and code controls to determine the number of rows to show for those controls.</li> <li><code>moveable_rows</code> (boolean) Determines if rows can be moved up or down in a table or array of strings.</li> <li><code>action_ref</code> (string) An action to be displayed.  </li> <li><code>date_format</code> (string) A format string such as YYYY-MM-DD which describes the display and entry format for a date field.</li> <li><code>time_format</code> (string) A format string such as HH:mm:ss which describes the display and entry format for a time field.</li> <li><code>custom_value_allowed</code> (boolean) Determines if a dropdown, outside of a table, can allow a custom value to be entered.</li> <li><code>class_name</code> (string) Optional classname for this parameter</li> <li><code>resizable</code> (boolean) Determines if this column can be resized in a table. When a column is resized, width of all the columns to the right of resized column is adjusted. Applies to structure parameters only. Default is <code>false</code>.</li> </ul> <p>Example parameter info section: <pre><code>    \"parameter_info\": [\n      {\n        \"parameter_ref\": \"keys\",\n        \"label\": {\n          \"resource_key\": \"sort.keys.label\"\n        },\n        \"description\": {\n          \"resource_key\": \"sort.keys.desc\",\n          \"placement\": \"on_panel\"\n        },\n        \"rows\": -1\n      }\n    ]\n</code></pre></p>"},{"location":"03-props/02-UI-Hints/#complex-type-info","title":"Complex Type Info","text":"<p>The complex_type_info section defines complex data types.  This section is needed if in the <code>parameters</code> section of the parameter definition, one of the parameters has a type that is not the base type (i.e. an array or map of base types).  The type of control used for this definition depends on the group info type value.</p> <p>Complex Type info attributes.</p> <ul> <li><code>complex_type_ref</code> (string) Required Name of complex type, can be referenced in other places.</li> <li><code>key_definition</code> (string) A set of parameter info attributes about the key parameter.</li> <li><code>label</code> (object) External name of subpanel.<ul> <li>See Resource Definition</li> </ul> </li> <li><code>parameters</code> (object) Required List of parameters that are part of this complex parameter.  This parameter can either have a set of parameter_info attributes or other nested complex_type_info attributes.</li> <li><code>header</code> (boolean) If <code>true</code> then the table has a header row with column names. Defaults to <code>true</code>. </li> <li><code>add_remove_rows</code> (boolean) If <code>true</code> then the table can have rows added and removed. Defaults to <code>true</code>.</li> <li><code>include_all_fields</code> (boolean) When <code>true</code> and <code>add_remove_rows</code> is <code>false</code>, ensures that all fields are included in the control at all times. </li> <li><code>row_selection</code> (string enum) How many rows in a table can be selected at a time. <ul> <li><code>single</code>: only one row at a time is able to be selected.</li> <li><code>multiple</code>: multiple rows at a time are able to be selected. </li> <li><code>multiple-edit</code>: select multiple rows and allow the editing of column values of all selected rows.</li> </ul> </li> <li><code>buttons</code> (array) An array of objects that define custom buttons to be displayed in this complex structure, overriding any default buttons. Each button object contains the following properties:<ul> <li><code>id</code> (string) Required: Unique identifier used to identify the button in the callback function.</li> <li><code>label</code> (object): Button label to display. If an icon is specified as well, the icon will be shown to the right of the label.<ul> <li>See Resource Definition</li> </ul> </li> <li><code>description</code> (object): Tooltip text to display when the button is hovered.<ul> <li>See Resource Definition</li> </ul> </li> </ul> </li> <li><code>icon</code> (string): URL to .svg image to display.</li> <li><code>carbon_icon</code> (string): Host provided name of Carbon icon to display. A callback function is required for the host application to return the jsx icon object imported from @carbon/icons-react library.</li> <li><code>enabled</code> (boolean): Button will be enabled if true, disabled if false.</li> <li><code>divider</code> (string enum): Display a divider before or after this button. Defaults to <code>after</code><ul> <li><code>before</code> Display divider before this button</li> <li><code>after</code> Display divider after this button</li> </ul> </li> </ul> <p>Example complex_type_info section: <pre><code> \"complex_type_info\": [\n      {\n        \"complex_type_ref\": \"SortEntry\",\n        \"row_selection\": \"multiple\",\n        \"moveable_rows\": true,\n        \"add_remove_rows\": false,\n        \"include_all_fields\": true,\n        \"key_definition\": {\n          \"parameter_ref\": \"field\",\n          \"width\": 28,\n          \"label\": {\n            \"resource_key\": \"SortEntry.field.label\"\n          }\n        },\n        \"parameters\": [\n          {\n            \"parameter_ref\": \"sort_order\",\n            \"width\": 16,\n            \"resource_key\": \"SortEntry.sort_order\",\n            \"label\": {\n              \"resource_key\": \"SortEntry.sort_order.label\"\n            },\n            \"control\": \"toggletext\",\n            \"value_icons\": [\n              \"/images/up-triangle.svg\",\n              \"/images/down-triangle.svg\"\n            ]\n          }\n        ]\n      },\n      {\n        \"complex_type_ref\": \"FieldStorageEntry\",\n        \"key_definition\": {\n          \"parameter_ref\": \"field\",\n          \"label\": {\n            \"default\": \"\",\n            \"resource_key\": \"FieldStorageEntry.field\"\n          },\n          \"width\": 26,\n          \"sortable\": true,\n          \"filterable\": true\n        },\n        \"parameters\": [\n          {\n            \"parameter_ref\": \"override\",\n            \"label\": {\n              \"default\": \"\",\n              \"resource_key\": \"FieldStorageEntry.override\"\n            },\n            \"width\": 16,\n            \"edit_style\": \"inline\",\n            \"sortable\": true\n          },\n          {\n            \"parameter_ref\": \"storage\",\n            \"label\": {\n              \"default\": \"\",\n              \"resource_key\": \"FieldStorageEntry.storage\"\n            },\n            \"width\": 26,\n            \"edit_style\": \"inline\",\n            \"dm_default\": \"type\"\n          }\n        ],\n        \"buttons\": [\n          {\n            \"id\": \"icon_button_1\",\n            \"carbon_icon\": \"Edit32\",\n            \"label\": {\n              \"resource_key\": \"table.somekey.label\"\n            },\n            \"description\": {\n              \"default\": \"This renders a button that has a label and Carbon icon to the right of the label.\n            },\n            \"enabled\": true\n          }\n        ]\n      }\n    ]\n</code></pre></p>"},{"location":"03-props/02-UI-Hints/#action-info","title":"Action Info","text":"<p>The action_info section defines an action.  Actions are used to callback to the application to perform an operation.</p> <p>Action info attributes.</p> <ul> <li><code>id</code> (string) Required Id of the action.</li> <li><code>label</code> (object) Required External name of action.<ul> <li>See Resource Definition</li> </ul> </li> <li><code>control</code> (string) Required The type of action.  Currently <code>button</code> and <code>image</code> are supported.</li> <li><code>class_name</code> (string) Optional classname for this action</li> <li><code>image</code> (object) Properties associate with an <code>image</code> action.<ul> <li><code>url</code> (string) Location of the image to display.</li> <li><code>placement</code> (string) Placement of image relative to a property.  Values are <code>right</code> or <code>left</code>.</li> <li><code>size</code> (object) Pixel size of the image.<ul> <li><code>height</code> (number) Image height in pixels.</li> <li><code>width</code> (number) Image width in pixels.</li> </ul> </li> <li><code>tooltip_direction</code> (string) Set tooltip direction for action image. Values are <code>right</code>, <code>left</code>, <code>top</code>, or <code>bottom</code>. Default is <code>bottom</code>.</li> </ul> </li> <li><code>button</code> (object) Properties associated with action button.<ul> <li><code>kind</code> (string) Button kind. Values are same as carbon button kind values. Default is <code>tertiary</code>.</li> <li><code>size</code> (string) Button size. Values are sm, md, lg, xl. Default is <code>sm</code>.</li> </ul> </li> <li><code>data</code> (any) Returned back in action callback.</li> </ul> <pre><code>{\n  \"id\": \"increment\",\n  \"label\": {\n    \"default\": \"Increment\"\n  },\n  \"control\": \"button\",\n  \"data\": {\n    \"parameter_ref\": \"number\"\n  }\n}\n</code></pre>"},{"location":"03-props/02-UI-Hints/#resource-definition","title":"Resource Definition","text":"<p>Used for user facing text.  Allows for default values if no translations are provided.</p> <ul> <li><code>default</code> (string) Default value if <code>resource_key</code> not defined.</li> <li><code>resource_key</code> (string) Used as a key for enum value labels in the resources section of property definition.</li> </ul>"},{"location":"03-props/02-UI-Hints/#dynamic-text-expressions","title":"Dynamic text expressions","text":"<p>Used to dynamically set text based on a parameter value change. If parameter id is used then then current value for that parameter will be passed into the function.</p> <ul> <li><code>percent(&lt;number or parameter id&gt;, &lt;integer&gt;)</code>  Return the percent of the 1st parameter.  The optional 2nd parameter determines the number of decimal places.  </li> <li><code>sum(&lt;number or parameter id&gt;, &lt;number or parameter id&gt;, ...)</code>  Returns the sum of all parameters</li> </ul> <pre><code>{\n  \"parameter_ref\": \"numberfield\",\n  \"label\": {\n    \"default\": \"Number\"\n  },\n  \"text_after\": {\n    \"default\": \"Sum: ${sum(numberfield, 2)} with (numberfield, 2, numberfield). Percent: ${percent(numberfield,2)}\"\n  }\n}\n</code></pre>"},{"location":"03-props/03-Controls/","title":"Controls","text":""},{"location":"03-props/03-Controls/#common-properties-element-types","title":"Common Properties Element Types","text":"<p>The editor determines the most appropriate control and panel type for each parameter based on the context (parameter type, role, group type, etc.). Although an author can specify a desired control for a given parameter via its <code>uihints</code>, this should be used sparingly and carefully - specifying an inappropriate control for a parameter will lead to undefined behavior.</p> <p>A visual documentation containing examples of the following group/panels and control types are available at https://wdp-common-canvas-dev.stage1.mybluemix.net/#/properties.</p>"},{"location":"03-props/03-Controls/#grouppanel-controls","title":"Group/Panel Controls","text":"<p>Controls are grouped and arranged on panels and sub-panels within the \u201cgroup_info\u201d section of operator uihints. Some panels appear as tab controls, others are for managing shared dataset metadata, while still others contain nested sub-panels.</p>"},{"location":"03-props/03-Controls/#group-types","title":"Group Types","text":"<ul> <li><code>controls</code> A general panel type containing parameter controls.</li> <li><code>tabs</code> A tabbed control, each tab containing sub-panels and controls.</li> <li><code>subTabs</code> A horizontal sub-tabbed control, each tab containing sub-panels and controls. If displayed within a Tearsheet container, subtabs will be displayed vertically.</li> <li><code>panels</code> A panel type that contains sub-panels.</li> <li><code>panelSelector</code> A panel containing sub-panels that are shown or hidden based upon a controlling radio selection.</li> <li><code>columnSelection</code> A panel type containing field-selection controls that share a common set of fields.</li> <li><code>customPanel</code> A custom panel for displaying user defined control. See 3.5 Common Properties Custom Components for more details.</li> <li><code>summaryPanel</code> A panel used in the flyout editor that will provide a link to open a wide flyout that can contain panels and parameter.</li> <li><code>actionPanel</code> A panel used for containing action controls.</li> <li><code>textPanel</code> A panel used to display static label and/or description.</li> <li><code>twistyPanel</code> A panel used to display a panel title that expands to the panel content when clicked.</li> <li><code>columnPanel</code> A panel used to display children side by side.</li> <li><code>tearsheetPanel</code> A tearsheet panel.  The panel can be opened/closed using the propertyController methods <code>setActiveTearsheet(groupId)</code> and <code>clearActiveTearsheet()</code></li> </ul>"},{"location":"03-props/03-Controls/#parameter-controls","title":"Parameter Controls","text":"<p>The following controls are supported in the Common Properties editor. Control types are intended for use with particular parameter types:</p>"},{"location":"03-props/03-Controls/#control-types","title":"Control Types","text":"<ul> <li><code>readonly</code> A read only text field. Used for fields users shouldn\u2019t edit.</li> <li><code>hidden</code> A control that has no UI to display.</li> <li><code>textfield</code> A single line editable text field.</li> <li><code>passwordfield</code> A masked single line text field with tooltip. The tooltip text can be customized by setting <code>[parameter_id].passwordHide.tooltip</code> and <code>[parameter_id].passwordShow.tooltip</code> in resources section.</li> <li><code>textarea</code> A multi-line text area.</li> <li><code>list</code> A single column table for editing a list of values.</li> <li><code>expression</code> An expression editing field  that provides language specific syntax highlighting and text auto complete.  An expression builder addon is available with the expression control.  You must provide the <code>expressionInfo</code> field for the <code>propertiesInfo</code> config. See 3.0 Common Properties Documentation for more details. To maximize in a tearsheet add this attribute and define a <code>tearsheetPanel</code> in <code>group_info</code>.     <pre><code>\"data\": {\n  \"tearsheet_ref\": \"&lt;tearsheet groupId&gt;\"\n}\n</code></pre></li> <li><code>code</code> An code editing field  that provides language specific syntax highlighting and text auto complete.  To maximize in a tearsheet add this attribute and define a <code>tearsheetPanel</code> in <code>group_info</code>.     <pre><code>\"data\": {\n  \"tearsheet_ref\": \"&lt;tearsheet groupId&gt;\"\n}\n</code></pre></li> <li><code>numberfield</code> A numeric text field. Number fields can also optionally display a random number generator button beside the control. See the uihints schema for details.</li> <li><code>datefield</code> A date input control whose date format tokens follow date-fns. Defaults to <code>yyyy-mm-dd</code></li> <li><code>timefield</code> A time input control whose time format tokens follow date-fns. Defautls to <code>H:m:s</code></li> <li><code>datepicker</code> A date input control with calendar picker whose date format tokens follow Flatpickr. Defaults to <code>Y-m-d</code>. Helper text can be included by adding <code>[parameter_id].helper</code> in the resources section.</li> <li><code>datepickerRange</code> A date input control with calendar picker for a range of dates. This follow the same rules as the <code>datepicker</code> control. Start and end labels defaults to <code>Start</code> and <code>End</code> respectively. Start, end, and helper labels can be customized by adding the following in the resources section:     <pre><code>\"resources\": {\n  [parameter_id].range.start.label: \"Custom start label\",\n  [parameter_id].range.start.desc: \"Custom start description that will appear as tooltip next to the label\",\n  [parameter_id].range.start.helper: \"Custom start helper that will appear as text below the input\",\n  [parameter_id].range.end.label: \"Custom end label\",\n  [parameter_id].range.end.desc: \"Custom end description that will appear as tooltip next to the label\",\n  [parameter_id].range.end.helper: \"Custom end helper that will appear as text below the input\"`\n}\n</code></pre></li> <li><code>spinner</code> A standard spinner control to increment/decrement the number value.</li> <li><code>checkbox</code> A standard checkbox control.</li> <li><code>radioset</code> A radio set where a parameter value is selected from a small range of options. See the Conditions wiki page for special radio button disabling options.</li> <li><code>checkboxset</code> A checkbox set for list type parameters with enumerated options where the count is less than 5.</li> <li><code>oneofselect</code> A standard dropdown list control.</li> <li><code>multiselect</code> A standard dropdown list control that allows for multiple selection.</li> <li><code>someofselect</code> A multi-selection control for enumerated list parameters where the count is greater than 4.</li> <li><code>selectcolumn</code> A dropdown list control that selects from available column names. When dropdown list is empty, <code>selectcolumn</code> control will display default placeholder text <code>\"...\"</code>. This placeholder text can be customized by setting <code>[parameter_id].emptyList.placeholder</code> in resources section. When custom empty list placeholder text is provided, common-properties will disable the empty list control.</li> <li><code>selectcolumns</code> A multi-select control for column selections.</li> <li><code>selectschema</code> A dropdown control that contains the available schemas in <code>dataset_metadata</code>. The <code>name</code> of the schema will be displayed if provided. If <code>name</code> is not provided, the index (zero-based) of the schema will be used instead. When dropdown list is empty, <code>selectschema</code> control will display default placeholder text <code>\"...\"</code>. This placeholder text can be customized by setting <code>[parameter_id].emptyList.placeholder</code> in resources section. When custom empty list placeholder text is provided, common-properties will disable the empty list control.</li> <li><code>toggle</code>  A standard toggle control with default On/Off states. This text can be customized by setting <code>[parameter_id].toggle.on.label</code> and <code>[parameter_id].toggle.off.label</code> in resources section.</li> <li><code>toggletext</code> A two-state control with optional icons that can exist on its own or within table cells.</li> <li><code>structuretable</code> Table control for editing lists or maps of complex types that have field names in the first column.</li> <li><code>structurelisteditor</code> For lists or maps of complex types that are not field-oriented parameters.</li> <li><code>structureeditor</code> Allows one to define a structure and use it directly on a panel. Each structure member is surfaced as an individual control. Supports a <code>layout</code> setting that allows one to position structureeditor controls in a grid (see below).</li> <li><code>readonlyTable</code> A read only table. Used for tables to display fields that users shouldn\u2019t edit.</li> <li><code>custom</code> A custom control for displaying a user defined control. See 3.5 Common Properties Custom Components for more details.</li> <li><code>slider</code> A standard slider which allows to enter a numeric value within the slider range and also allows to drag and adjust the slider track to a specific value within the range. The slider labels for minimum and maximum values can be customized by setting them as <code>[parameter_id].min.label</code>   for minimum value label and <code>[parameter_id].max.label</code> for maximum value label in resources section.</li> </ul>"},{"location":"03-props/03-Controls/#a-note-on-field-name-storage","title":"A Note on Field Name Storage","text":"<p>When a given node can accept more than a single datarecord-metadata object as input, it becomes necessary to store the schema name (a.k.a. \u2018link_name\u2019) along with each field name that is stored in parameter sets. In those cases, instead of using strings to store field names, they are represented in parameter sets as compound objects containing both \u2018link_ref\u2019 and \u2018field_name\u2019 elements:</p> <pre><code>\"current_parameters\": {\n  \"field\": { \"link_ref\": \"Schema-1\", \"field_name\": \"Age\" },\n  ...\n</code></pre> <p>In order to indicate that a given node can potentially accept multiple input data links and would thus require compound field name storage, all parameter definitions within the node that contain <code>\"role\": \"column\"</code>, whether located at the top level or within complex types, should declare their data types as \u201cobject\u201d instead of \u201cstring\u201d:</p> <pre><code>\"parameters\": [\n  {\n    \"id\": \"fields\",\n    \"type\": \"array[object]\",\n    \"role\": \"column\",\n    \"required\": true\n  },\n  ...\n</code></pre>"},{"location":"03-props/03-Controls/#edit_style","title":"edit_style","text":"<p>When editing complex type values in tables one can either edit cell values inline or in a sub panel:</p> <ul> <li><code>subpanel</code> A small sub-dialog is launched to edit cell values.</li> <li><code>inline</code> Controls appear inline within table cells for editing values.</li> <li><code>on_panel</code> Control appears below the table when the row is selected.</li> </ul>"},{"location":"03-props/03-Controls/#miscellaneous","title":"Miscellaneous","text":"<ul> <li><code>moveable_rows</code> boolean A value that appears in \u201ccomplex_type_definition\u201d sections. If set to <code>true</code> allows rows in the table to be moved  up and down for reordering.</li> <li><code>row_selection</code> enum [\u201csingle\u201d, \u201cmultiple\u201d] Determines how many rows can be selected in a table at one time. Defaults to multiple.</li> <li><code>sortable</code> boolean Both sortable and filterable apply to table columns. When set within the \u201ckey_definition\u201d or the \u201cparameters\u201d sections of a structure definition, those columns are sortable and/or can be filtered upon.</li> <li><code>filterable</code> boolean (see sortable above)</li> <li><code>language</code> enum [\u201cCLEM\u201d, \u201ctext/x-hive\u201d] The language for the expression control syntax highlight and text auto complete feature.  If not specified, the expression control does not have syntax highlighting or text auto complete.</li> <li><code>layout</code> A two-dimensional string array value that appears in \u201ccomplex_type_definition\u201d sections and allows one to layout structureeditor controls in a two dimensional grid.</li> </ul>"},{"location":"03-props/04-Conditions/","title":"Conditions","text":"<p>Conditions define a set of specifications for evaluating parameter values.  The specifications support complex interdependency checking such as relationships between multiple parameters (i.e. Valid values for parameter one depend upon the value of parameter two). conditions schema</p> <p>Visual documentation containing examples of the following conditions for the different controls we support are available at https://wdp-common-canvas-dev.stage1.mybluemix.net/#/conditions</p> <p>A conditions file contains an array of conditions. Each condition takes one of the following forms:</p>"},{"location":"03-props/04-Conditions/#validation-definition","title":"Validation definition","text":"<p>A single validation. The fail_message is displayed upon validation failure.</p> <p>The attributes for the validation definition are:</p> <ul> <li><code>id</code> (string) A unique identifier for the validation.  This is required if multiple validations have the same <code>focus_parameter_ref</code> value.</li> <li> <p><code>fail_message</code> (object) Required The message to display if the validation fails.  Each fail_message consist of the following attributes</p> <ul> <li><code>message</code> (object) Required The message to display.<ul> <li>See Resource Definition</li> </ul> </li> <li><code>focus_parameter_ref</code> (string) Required The parameter control to get focus after displaying the error/warning. If the validation refers to a table cell, then control must have the column indicator.  For example if the validation is for <code>MyTable</code> cell column 2 then <code>MyTable[2]</code>.</li> <li><code>type</code> (string) Type of messages.  Valid values are <code>error, warning, info</code>.</li> </ul> </li> <li> <p><code>evaluate</code> (object)  Specification for how to evaluate the validity of the parameter.  The evaluate attribute can be one of the following structures.</p> <ul> <li><code>condition</code> (object) This is a single condition that evaluates to true or false.<ul> <li><code>op</code> (string) Required A single operator for the properties of the condition.  Valid values are: <code>isEmpty</code>, <code>isNotEmpty</code>, <code>greaterThan</code>, <code>lessThan</code>, <code>equals</code>, <code>notEquals</code>, <code>matches</code>, <code>notMatches</code>, <code>contains</code>, <code>notContains</code>, <code>colNotExists</code>, <code>isDateTime</code>, <code>dmTypeEquals</code>, <code>dmTypeNotEquals</code>,  <code>dmMeasurementEquals</code>, <code>dmMeasurementNotEquals</code>,  <code>dmRoleEquals</code>, <code>dmRoleNotEquals</code> <code>lengthEquals</code>, <code>lengthGreaterThan</code>, <code>lengthLessThan</code>. </li> </ul> </li> <li><code>parameter_ref</code> (string) Required The primary parameter. </li> <li><code>parameter_2_ref</code> (string) Second parameter for multi-parameter validation.</li> <li><code>value</code> (string, boolean, number) Value against which to compare the primary parameter value.</li> <li><code>values</code> (array[string]) Values against which to compare the primary parameter value is in.  Used only in <code>filter</code> conditions.</li> </ul> </li> <li><code>or</code> (object) This is a container of \u2018or\u2019 conditions. Evaluates to true if ANY sub-condition evaluates to true. Can nest any number of additional conditional types.</li> <li><code>and</code> (object) This is a container of \u2018and\u2019 conditions. Evaluates to true if ALL sub-condition evaluates to true. Can nest any number of additional conditional types.</li> </ul>"},{"location":"03-props/04-Conditions/#enabled-definition","title":"Enabled definition","text":"<p>Enablement test. Disables controls if evaluate is false.</p> <p>The attributes for the enabled definition are:</p> <ul> <li><code>parameter_refs</code> (array[string]) Array of parameter names affected by this operation.  If evaluate is false, then the controls associated with these parameters are disabled. Note that individual radio buttons can be disabled by using the radio button value name instead of the overall property name in the parameter_refs array.</li> <li><code>action_refs</code> (array[string]) Array of action names affected by this operation.  If evaluate is false, then the action button or image associated with these action names are disabled. </li> <li><code>evaluate</code> (object) see the <code>evaluate</code> attribute in <code>validation definition</code>.</li> </ul>"},{"location":"03-props/04-Conditions/#visible-definition","title":"Visible definition","text":"<p>Visibility test. Hides controls if evaluate is false.</p> <p>The attributes for the visible definition are:</p> <ul> <li><code>parameter_refs</code> (array[string]) Array of parameter names affected by this operation.  If evaluate is false, then hide the controls associated with these parameters.</li> <li><code>action_refs</code> (array[string]) Array of action names affected by this operation.  If evaluate is false, then the action button or image associated with these action names are disabled. </li> <li><code>evaluate</code> (object) see the <code>evaluate</code> attribute in <code>validation definition</code>.</li> </ul>"},{"location":"03-props/04-Conditions/#filter-definition","title":"Filter definition","text":"<p>Filter test. The filter will determine which data record fields to include in a control.  </p> <p>The attributes for the filter definition are:</p> <ul> <li><code>parameter_ref</code> (string) Parameter id affected by this operation. This must be a parameter that operates upon datarecord-metadata columns.</li> <li><code>parameter_refs</code> (string) Exclusive with <code>parameter_ref</code> and used with <code>dmSharedFields</code>. Parameter ids affected by this operation. They must be parameters that operate upon datarecord-metadata columns.  </li> <li><code>evaluate</code> (object) see the <code>evaluate</code> attribute in <code>validation definition</code>.  </li> </ul> <p>Supported operations (<code>op</code>):  </p> <ul> <li><code>dmType</code> - filters <code>type</code> value from schema.</li> <li><code>dmMeasurement</code> - filters <code>measurement</code> value from schema.</li> <li><code>dmModelingRole</code> - filters <code>modeling_role</code> value from schema.</li> <li><code>dmSharedFields</code> - shares source fields with all field chooser property names found in the <code>parameter_refs</code> array.</li> </ul> <p>Examples:  <pre><code>{\n  \"filter\": {\n    \"parameter_ref\": \"fields_filter_measurement\",\n    \"evaluate\": {\n      \"condition\": {\n        \"op\": \"dmMeasurement\",\n        \"value\": \"discrete\"\n      }\n    }\n  }\n}\n</code></pre> <pre><code>{\n  \"filter\": {\n    \"parameter_ref\": \"fields_filter_type\",\n    \"evaluate\": {\n      \"condition\": {\n        \"op\": \"dmType\",\n        \"values\": [\"integer\", \"double\"]\n      }\n    }\n  }\n}\n</code></pre> <pre><code>{\n  \"filter\": {\n    \"parameter_refs\": [\n       \"fields_filter_type\",\n       \"multi_field_chooser_table\",\n       \"field_chooser_in_another_panel\"\n    ],\n    \"evaluate\": {\n      \"condition\": {\n        \"op\": \"dmSharedFields\"\n      }\n    }\n  }\n}\n</code></pre></p>"},{"location":"03-props/04-Conditions/#enum-filter-definition","title":"Enum Filter definition","text":"<p>Filters the available options for enumeration parameters. Reduces the available enumeration items if evaluate is true.</p> <p>The attributes for the enum_filter definition are:</p> <ul> <li><code>target</code> (object) Contains a target parameter_ref reference and a replacement values array.</li> <li><code>evaluate</code> (object) see the <code>evaluate</code> attribute in <code>validation definition</code>.</li> </ul> <p>Example:  <pre><code>{\n  \"enum_filter\": {\n    \"target\": {\n      \"parameter_ref\": \"radioset_filtered\",\n      \"values\": [\n        \"red\",\n        \"yellow\",\n        \"green\"\n      ]\n    },\n    \"evaluate\": {\n      \"condition\": {\n        \"parameter_ref\": \"filter_radios\",\n        \"op\": \"equals\",\n        \"value\": true\n    }\n  }\n}\n</code></pre></p>"},{"location":"03-props/04-Conditions/#allow-change-definition","title":"Allow Change definition","text":"<p>Allow change validates that a change is allowed on a property.  If it evaluates to true then the value for the property is changed.  This is typically used to restrict values that are invalid in one property based on the value in another property.  For example, if the property represents a storage type with a value of <code>string</code>, then a property that represents a measurement type should not be allowed to be set to <code>continuous</code>.</p> <p>The attributes for the allow_change definition are:</p> <ul> <li><code>parameter_refs</code> (array[string]) Array of parameter names affected by this operation. </li> <li><code>evaluate</code> (object) see the <code>evaluate</code> attribute in <code>validation definition</code>.</li> </ul> <p>Example:  <pre><code>{\n      \"allow_change\": {\n        \"parameter_refs\": [\n          \"ST_mse_table[2]\"\n        ],\n        \"evaluate\": {\n          \"or\": [\n            {\n              \"condition\": {\n                \"parameter_ref\": \"ST_mse_table[2]\",\n                \"op\": \"notEquals\",\n                \"value\": \"Football\"\n              }\n            },\n            {\n              \"condition\": {\n                \"parameter_ref\": \"ST_mse_table[5]\",\n                \"op\": \"notEquals\",\n                \"value\": \"European\"\n              }\n            }\n          ]\n        }\n      }\n    }\n</code></pre></p>"},{"location":"03-props/04-Conditions/#default-value-definition","title":"Default value definition","text":"<p>Sets the default value on the <code>parameter_ref</code> property if condition evaluates to true. If multiple conditions evaluate to true only the first condition is used. Default value condition is evaluated only once when loading properties. If user updates the value of <code>parameter_ref</code>, default value will be overwritten by the new value.</p> <p>The attributes for the default_value definition are:</p> <ul> <li><code>parameter_ref</code> (string) Parameter whose default value is to be set.</li> <li><code>value</code> (string, boolean, number, object, array) This will be the default value of parameter_ref if condition evaluates to true.</li> <li><code>evaluate</code> (object) see the <code>evaluate</code> attribute in <code>validation definition</code>.</li> </ul> <p>Example:  <pre><code>{\n  \"default_value\": {\n    \"parameter_ref\": \"conditional_default\",\n    \"value\": \"Value defined in default_value condition. You will see this sentence when default value of mode equals Include.\",\n    \"evaluate\": {\n      \"condition\": {\n        \"parameter_ref\": \"mode\",\n        \"op\": \"equals\",\n        \"value\": \"Include\"\n      }\n    }\n  }\n},\n{\n  \"default_value\": {\n    \"parameter_ref\": \"conditional_default\",\n    \"value\": [\"This is a second condition for conditional_default. You should never see this value.\"],\n    \"evaluate\": {\n      \"condition\": {\n        \"parameter_ref\": \"mode\",\n        \"op\": \"equals\",\n        \"value\": \"Include\"\n      }\n    }\n  }\n}\n</code></pre></p>"},{"location":"03-props/04-Conditions/#a-note-on-table-cell-conditions","title":"A note on table cell conditions","text":"<p>Support for table cell conditions is achieved via the use of the array subscript operator, <code>[]</code>. When evaluating table cells, one uses the table identifier with an array subscript indicating the zero-based table column being operated upon (which also corresponds to the sub-control index as defined in <code>complex_types</code>).</p> <p>So for example if one has a StructureTable property named myTable, column conditions on that table are referred to using <code>myTable[1]</code>, <code>myTable[3]</code>, etc. </p>"},{"location":"03-props/04-Conditions/#example","title":"Example","text":"<p>Example of a condition section.  <pre><code>  \"conditions\": [\n      {\n        \"validation\": {\n          \"fail_message\": {\n            \"type\": \"error\",\n            \"focus_parameter_ref\": \"inputFieldList\",\n            \"message\": {\n              \"resource_key\": \"input_field_list_not_empty\"\n            }\n          },\n          \"evaluate\": {\n            \"condition\": {\n              \"parameter_ref\": \"inputFieldList\",\n              \"op\": \"isNotEmpty\"\n            }\n          }\n        }\n      },\n      {\n    \"visible\": {\n      \"parameter_refs\": [\n         \"oneofselectPets\"\n      ],\n      \"evaluate\": {\n         \"condition\": {\n            \"parameter_ref\": \"oneofselectAnimals\",\n        \"op\": \"notContains\",\n        \"value\": \"lion\"\n          }\n      }\n    }\n      },\n     {\n    \"visible\": {\n      \"action_refs\": [\n         \"action_button\"\n      ],\n      \"evaluate\": {\n         \"condition\": {\n            \"parameter_ref\": \"button_hide_checkbox\",\n        \"op\": \"equals\",\n        \"value\": false\n          }\n      }\n    }\n      },\n      {\n    \"enabled\": {\n      \"parameter_refs\": [\n        \"radiosetColor\"\n      ],\n      \"evaluate\": {\n        \"condition\": {\n          \"parameter_ref\": \"checkboxEnable\",\n          \"op\": \"checked\"\n            }\n      }\n    }\n      },\n      {\n    \"validation\": {\n      \"fail_message\": {\n        \"type\": \"error\",\n        \"focus_parameter_ref\": \"subsamplingRate\",\n        \"message\": {\n          \"resource_key\": \"subsampling_rate_not_valid\"\n        }\n      },\n      \"evaluate\": {\n        \"and\": [\n          {\n            \"condition\": {\n              \"parameter_ref\": \"subsamplingRate\",\n              \"op\": \"greaterThan\",\n              \"value\": 0\n            }\n          },\n          {\n            \"or\": [\n              {\n                \"condition\": {\n                  \"parameter_ref\": \"subsamplingRate\",\n                  \"op\": \"lessThan\",\n                  \"value\": 1\n                }\n              },\n              {\n                \"condition\": {\n                  \"parameter_ref\": \"subsamplingRate\",\n                  \"op\": \"equals\",\n                  \"value\": 1\n                }\n              }\n            ]\n          }\n        ]\n      }\n    }\n      },\n      {\n    \"enabled\": {\n      \"parameter_refs\": [\n        \"field_types[2]\"\n      ],\n      \"evaluate\": {\n        \"condition\": {\n          \"parameter_ref\": \"field_types[1]\",\n          \"op\": \"checked\"\n        }\n      }\n    }\n      }\n    }\n  ]\n</code></pre></p>"},{"location":"03-props/05-Custom-Components/","title":"Custom Components Overview","text":"<p>Custom components allows applications to use custom code to drive different parts of the common-properties user interface.  For some panels and controls it might be necessary to listen to different types of redux state changes to cause the panel/control to rerender. Here is an example of a textfield listening to 3 state changes: <pre><code>import { connect } from \"react-redux\";\n\n// ... application code\n\nrender() {\n  const value = this.props.value; // value passed by redux as a property\n\n  // ... rest of component render code\n\n}\n\nTextfieldControl.propTypes = {\n  // ... application props\n  state: PropTypes.string, // pass in by redux\n  value: PropTypes.string, // pass in by redux\n  messageInfo: PropTypes.object // pass in by redux\n};\n\nconst mapStateToProps = (state, ownProps) =&gt; ({\n  value: ownProps.controller.getPropertyValue(ownProps.propertyId),\n  state: ownProps.controller.getControlState(ownProps.propertyId),\n  messageInfo: ownProps.controller.getErrorMessage(ownProps.propertyId)\n});\nexport default connect(mapStateToProps, null)(TextfieldControl);\n</code></pre></p>"},{"location":"03-props/05-Custom-Components/#custom-panels","title":"Custom Panels","text":"<p>Custom panels allow applications to create their own panels and controls that can live in the same dialogs as common-property panels and controls. </p>"},{"location":"03-props/05-Custom-Components/#custom-panel-interface","title":"Custom panel interface","text":"<pre><code>// Returns the 'id' for the group defined in uihints\nstatic id()\n\nconstructor(parameters, controller, data)\n\n// Returns the content users want to display\nrenderPanel()\n</code></pre> <ul> <li>parameters - String array of parameters set under the customPanel group in uihints</li> <li>controller - See here for API information.</li> <li>data - Optional parameter.  Returns values stored in <code>data</code> attribute of a group <code>customPanel</code>.</li> <li>renderPanel() - Called on all Redux store changes:<ul> <li>property value changes (property APIs)</li> <li>state changes (state APIs)</li> <li>schema changes (schema APIs)</li> <li>row selection changes (selection APIs)</li> <li>messages changes (message APIs)</li> </ul> </li> </ul>"},{"location":"03-props/05-Custom-Components/#custom-react-components","title":"Custom react components","text":"<p>Example <pre><code>renderPanel() {\n const controlId = this.parameters[0];\n return (\n  &lt;CustomCtrlToggle\n   key={controlId}\n   propertyId={name: controlId}\n   controller={this.controller}\n  /&gt;\n );\n}\n</code></pre></p>"},{"location":"03-props/05-Custom-Components/#examples","title":"Examples","text":"<p>https://github.com/elyra-ai/canvas/tree/master/canvas_modules/harness/src/client/components/custom-panels</p>"},{"location":"03-props/05-Custom-Components/#custom-controls","title":"Custom Controls","text":"<p>Custom controls allow applications to create their own controls that can live in the same dialogs as common-property panels and controls. </p>"},{"location":"03-props/05-Custom-Components/#custom-control-interface","title":"Custom control interface","text":"<pre><code>// Returns the 'custom_control_id' for the parameter defined in uihints\nstatic id()\n\nconstructor(propertyId, controller, data, tableInfo)\n\n// Returns the content users want to display\nrenderControl()\n</code></pre> <ul> <li>propertyId - See propertyId for definition.</li> <li>controller - See here for API information.</li> <li>data - Returns values stored in <code>data</code> attribute of a parameter in uihints.</li> <li>tableInfo - Set when custom control is a cell in a table.  <ul> <li>table (boolean) Set to true when in a table cell</li> <li>editStyle (string) Valid values are \u201csummary\u201d and \u201cinline\u201d. \u201csummary\u201d is set when the control will display either below the table (\u201con_panel\u201d) or in a \u201csubpanel\u201d.  This allows the custom control to display a summary value in the cell and something else for the custom control.</li> </ul> </li> <li>renderControl() - Called on all Redux store changes:<ul> <li>property value changes (property APIs)</li> <li>state changes (state APIs)</li> <li>schema changes (schema APIs)</li> <li>row selection changes (selection APIs)</li> <li>messages changes (message APIs)</li> </ul> </li> </ul>"},{"location":"03-props/05-Custom-Components/#custom-react-components_1","title":"Custom react components","text":"<p>Example <pre><code>renderControl() {\n return (\n  &lt;CustomCtrlToggle\n   key={controlId}\n   propertyId={this.propertyId}\n   controller={this.controller}\n  /&gt;\n );\n}\n</code></pre></p>"},{"location":"03-props/05-Custom-Components/#examples_1","title":"Examples","text":"<p>https://github.com/elyra-ai/canvas/tree/master/canvas_modules/harness/src/client/components/custom-controls</p>"},{"location":"03-props/05-Custom-Components/#custom-condition-operators","title":"Custom Condition Operators","text":"<p>Custom condition operators allow users to create their own operators that can then be used for enablement, visibility, validation, and enum filtering.  The condition operators should always return a <code>boolean</code> value.</p>"},{"location":"03-props/05-Custom-Components/#custom-operator-interface","title":"Custom operator interface","text":"<pre><code>/**\n* This is the key used to determine if the operator should be ran.  Maps to the `op` defined in the\n* `condition` in uihints\n* @return string\n*/\nfunction op()\n\n/**\n* @param see below\n* @return boolean\n*/\nfunction evaluate(paramInfo, param2Info, value, controller)\n</code></pre> <ul> <li>paramInfo (object) - <code>parameter_ref</code> set in the <code>condition</code> in uihints<ul> <li>control (object) - contains information about the control.</li> <li>value (any) - current property value</li> </ul> </li> <li>param2Info (object) - <code>parameter_2_ref</code> set in the <code>condition</code> in uihints.  See <code>paramInfo</code> for object info</li> <li>value - <code>value</code> set in the <code>condition</code> in uihints.  If no value specific this will be <code>undefined</code></li> <li>controller - See here for API information.</li> </ul> <p>Example <pre><code>function op() {\n  return \"customMax\";\n}\n\nfunction evaluate(paramInfo, param2Info, value, controller) {\n  const supportedControls = [\"numberfield\"];\n  if (supportedControls.indexOf(paramInfo.control.controlType) &gt;= 0) {\n    return paramInfo.value &lt; value;\n  }\n  return true;\n}\n\nmodule.exports.op = op;\nmodule.exports.evaluate = evaluate;\n</code></pre> <pre><code>{\n  \"evaluate\": {\n    \"condition\": {\n      \"parameter_ref\": \"custom_op_num\",\n      \"op\": \"customMax\",\n      \"value\": 100\n    }\n  }\n}\n</code></pre></p>"},{"location":"03-props/05-Custom-Components/#examples_2","title":"Examples","text":"<p>https://github.com/elyra-ai/canvas/tree/master/canvas_modules/harness/src/client/custom/condition-ops https://github.com/elyra-ai/canvas/tree/master/canvas_modules/common-canvas/src/common-properties/ui-conditions/condition-ops</p>"},{"location":"03-props/06-Properties-Controller/","title":"Properties Controller","text":""},{"location":"03-props/06-Properties-Controller/#common-properties-controller-api","title":"Common Properties Controller API","text":"<p>propertyId <pre><code>const propertyId = {\n  name: {parameter name defined in operator definition},\n  row: {row in table/array}, // optional when col not set\n  col: {col in table}, // optional\n  propertyId: {propertyId of the nested structure} // optional\n}\n</code></pre></p>"},{"location":"03-props/06-Properties-Controller/#property-methods","title":"Property methods","text":"<pre><code>/* \n * options - optional object of config options where\n *   setDefaultValues (boolean): when set to true, set default values from parameter definition\n*/\nsetPropertyValues(values, options)  \nupdatePropertyValue(propertyId, value) \n/* \n * options - optional object of config options where\n *   filterHiddenDisabled (boolean): when set to true, filter out data values with a state of disabled or hidden\n *   filterHiddenControls (boolean): when set to true, filter out data values having control type hidden\n *   applyProperties (boolean): when set to true, will return data values in the format expected by the `applyPropertyChanges` callback. If unset or false, will return the internal format used by common properties.\n*/\ngetPropertyValue(propertyId, options)  \n/* \n * options - optional object of config options where\n *   filterHiddenDisabled (boolean): when set to true, filter out data values with a state of disabled or hidden\n *   filterHiddenControls (boolean): when set to true, filter out data values having control type hidden\n *   applyProperties (boolean): when set to true, will return data values in the format expected by the `applyPropertyChanges` callback. If unset or false, will return the internal format used by common properties.\n*/\ngetPropertyValues(options)  \n</code></pre>"},{"location":"03-props/06-Properties-Controller/#message-methods","title":"Message methods","text":"<pre><code>/*\n * Returns current list of error messages\n * @filteredPipeline (boolean) optional\n * @filterHiddenDisable (boolean) optional. If true, will not return error messages from controls that are hidden or disabled\n * @filterDisplayError (boolean) optional. If true, will not return error messages that are not displayed in the editor\n * when filteredPipeline=true returns enabled/visible control messages and only 1 per control.\n */\ngetAllErrorMessages()\ngetErrorMessages(filteredPipeline, filterHiddenDisable, filterSuccess, filterDisplayError = true)\ngetErrorMessage(propertyId, filterHiddenDisable = false, filterSuccess = false, filterDisplayError = true)  \ngetRequiredErrorMessages()\nsetErrorMessages(messages)  \nupdateErrorMessage(propertyId, message) \n</code></pre>"},{"location":"03-props/06-Properties-Controller/#state-methods-disableenabled-hiddenvisible","title":"State methods (disable/enabled &amp; hidden/visible)","text":"<pre><code>getControlState(propertyId)\ngetControlStates()\nsetControlStates(states)  \n\n/*\n * @propertyId - see above\n * @state - valid values are \"enabled\", \"disabled\", \"visible\", \"hidden\"\n */\nupdateControlState(propertyId, state) \n</code></pre>"},{"location":"03-props/06-Properties-Controller/#datasetmetadata-methods","title":"DatasetMetadata methods","text":"<pre><code>getDatasetMetadata()\n\n/*\n * @datasetMetadata - see [schema](https://github.com/elyra-ai/pipeline-schemas/blob/master/common-pipeline/datarecord-metadata/datarecord-metadata-v1-schema.json)\n */ \nsetDatasetMetadata(datasetMetadata)\n</code></pre>"},{"location":"03-props/06-Properties-Controller/#row-selection-methods","title":"Row selection methods","text":"<pre><code>/*\n * Returns table row selection indices as an array of integers.\n * @propertyId - see above\n */\ngetSelectedRows(propertyId)\n\n/*\n * Updates table row selections for the given table control.\n * @propertyId - see above\n * @selection - A zero-based array of integer selection indices\n */\nupdateSelectedRows(propertyId, selection) \n\n/*\n * Clears selected table rows for the given table.\n * @propertyId - see above\n * If the propertyId is omitted all table row selections are cleared\n */\nclearSelectedRows(propertyId)\n\n/*\n * Adds a row selection listener for a table or list.\n * @propertyId - see above\n * @listener - callback function for when a selection is made in the table or list\n */\naddRowSelectionListener(propertyId, listener)\n\n/*\n * Removes the row selection listener from a table or list.\n * @propertyId - see above\n */\nremoveRowSelectionListener(propertyId)\n</code></pre>"},{"location":"03-props/06-Properties-Controller/#validation-methods","title":"Validation methods","text":"<pre><code>/*\n * Runs validation conditions on all controls\n */\nvalidatePropertiesValues()\n\n\n\n/*\n * Validates a specific propertyId\n * @propertyId - see above\n */\nvalidateInput(propertyId)\n</code></pre>"},{"location":"03-props/06-Properties-Controller/#control-methods","title":"Control methods","text":"<pre><code>/* \n * Update the enum values for a given control.  Used when enum values aren't static\n * @propertyId - see above\n * @valuesObj (array) [{ value: &lt;string, number, boolean&gt; , label: \"&lt;string&gt;\" }]\n */\nupdateControlEnumValues(propertyId, valuesObj)\n</code></pre>"},{"location":"03-props/06-Properties-Controller/#general-methods","title":"General methods","text":"<pre><code>/*\n* Returns the current size of the RHS flyout.\n*/\ngetEditorSize()\n\n/*\n* Sets default property values from parameter definition in the propertiesController.\n* Note - These values won't be displayed on the UI. Host applications can call getPropertyValues() to retrieve the values. \n* @paramDef - Follows the format of https://github.com/elyra-ai/pipeline-schemas/blob/master/common-canvas/parameter-defs/parameter-defs-v3-schema.json\n*/\nsetParamDef(paramDef)\n\n/*\n* Returns the id of top-level active tab or accordion\n*/\ngetTopLevelActiveGroupId()\n\n\n/*\n* Makes the passed in groupId active.  Only works for top-level groups\n*/\nsetTopLevelActiveGroupId(groupId)\n</code></pre>"},{"location":"03-props/06-Properties-Controller/#disable-move-row-buttons-methods","title":"Disable move row buttons methods","text":"<pre><code>/**\n * Disable table row move buttons for all propertyIds in given array\n * @param propertyIds Array of propertyIds\n *\n */\nsetDisableRowMoveButtons(propertyIds)\n/**\n* Returns array of propertyIds for which row move buttons will be disabled\n*   @return Array of propertyIds\n*/\ngetDisableRowMoveButtons()\n/**\n* Check if row move buttons should be disabled for given propertyId\n* @param propertyId  The unique property identifier\n* @return boolean\n*/\nisDisableRowMoveButtons(propertyId)\n</code></pre>"},{"location":"03-props/06-Properties-Controller/#custom-panel-and-control-methods","title":"Custom panel and control methods","text":"<pre><code>/* \n * Only used in custom panel to allow for custom property summary values to be displayed\n * Displays the value set in propertiesReducer for that parameter\n * @propertyId - see above\n * @label (string)\n * @inSummary (boolean)\n */\nsetControlInSummary(propertyId, label, inSummary)\n\n/* \n * Sets the content to be displayed in the summaryPanel for a customPanel property.\n * The summary panel will directly display the content.\n * @propertyId - see above\n * @content = { value: &lt;object&gt; , label: \"&lt;value&gt;\" }\n */\nupdateCustPropSumPanelValue(propertyId, content)\n\n/* \n * Returns a standard control that can then be used in a customPanel.\n * @propertyId - See above\n * @paramDef - Follows the format of https://github.com/elyra-ai/pipeline-schemas/blob/master/common-canvas/parameter-defs/parameter-defs-v1-schema.json).  titleDefinition, current_parameters, conditions, dataset_metadata are ignored and are optional.   \n * @parameter - This is the parameter from the paramDef to create the control for.  \n */\ncreateControl(propertyId, paramDef, parameter)\n\n/* \n * Returns the translated text for a control given a resource key. \n * Users should be able to use the values from resources that has been uploaded as part of paramDef.\n * @key - Resource key\n * @value - Default value returned when no resource or key has been found.\n */\ngetResource(key, value)\n</code></pre>"},{"location":"03-props/06-Properties-Controller/#maxlength-for-single-line-and-multi-line-control-methods","title":"maxLength for single-line and multi-line control methods","text":"<pre><code>/*\n * Returns the maximum characters allowed for multi-line string controls\n * Default value is 1024\n */\ngetMaxLengthForMultiLineControls()\n\n/*\n * Returns the maximum characters allowed for single-line string controls\n * Default value is 128\n */\ngetMaxLengthForSingleLineControls()\n</code></pre>"},{"location":"03-props/06-Properties-Controller/#enablingdisabling-addremoverows-methods","title":"Enabling/disabling addRemoveRows methods","text":"<pre><code>/*\n * Set the addRemoveRows attribute to 'enabled' for the given propertyId\n * @param propertyId The unique property identifier\n * @param enabled boolean value to enable or disable addRemoveRows\n */\nsetAddRemoveRows(propertyId, enabled)\n\n/*\n * Returns the true if addRemoveRows is enabled for the given propertyID\n * @param propertyId The unique property identifier\n * @return boolean\n */\ngetAddRemoveRows(propertyId)\n</code></pre>"},{"location":"03-props/06-Properties-Controller/#enablingdisabling-properties-editor-save-button-methods","title":"Enabling/disabling properties editor \u201csave\u201d button methods","text":"<pre><code>/*\n * Set the main \"save\" button to disabled(true) or enabled(false)\n * @param saveDisable (boolean)\n */\nsetSaveButtonDisable(saveDisable)\n\n/*\n * Returns the true if the main \"save\" button is disabled, false otherwise\n * @return boolean\n */\ngetSaveButtonDisable() \n</code></pre>"},{"location":"03-props/06-Properties-Controller/#add-static-rows-for-table-controls-which-will-disable-the-re-ordering-of-the-rows-that-are-set-as-static-for-the-given-propertyid","title":"Add static rows for table controls which will disable the re-ordering of the rows that are set as static for the given propertyId","text":"<pre><code>/*\n * Set static rows for the given propertyId\n * @param propertyId The unique property identifier\n * @param staticRowsArr Array of first n row indexes or last n row indexes\n */\nupdateStaticRows(propertyId, staticRowsArr)\n\n/*\n * Returns the static rows set for the given propertyId\n * @param propertyId The unique property identifier\n */\ngetStaticRows(propertyId)\n\n/*\n * Removes the static rows set for the given propertyId\n * @param propertyId The unique property identifier\n */\nclearStaticRows(propertyId)\n</code></pre>"},{"location":"03-props/06-Properties-Controller/#enablingdisabling-custom-table-buttons","title":"Enabling/disabling custom table buttons","text":"<pre><code>/*\n * Set the table button to 'enabled' for the given propertyId\n * @param propertyId The unique property identifier\n * @param buttonId The unique button identifier\n * @param enabled boolean value to enable or disable the button\n */\nsetTableButtonEnabled(propertyId, buttonId, enabled)\n\n/*\n * Returns the table button states for the given propertyID\n * @param propertyId The unique property identifier\n * @return object An object of buttonIds mapped to their enabled state \n */\ngetTableButtons(propertyId)\n\n/*\n * Returns the true if the table button is enabled for the given propertyID and buttonId\n * @param propertyId The unique property identifier\n * @param buttonId The unique button identifier\n * @return boolean \n */\ngetTableButtonEnabled(propertyId, buttonId)\n</code></pre>"},{"location":"03-props/06-Properties-Controller/#column-visibility-methods","title":"Column visibility methods","text":"<pre><code>/*\n * Check if given column is visible in the table\n * @param propertyId The unique property identifier\n * @param columnIndex Column index in the table\n */\ngetColumnVisibility(propertyId, columnIndex)\n\n/*\n * Set column visibility\n * @param propertyId The unique property identifier\n * @param columnIndex Column index in the table\n * @param value Boolean value to set column visible/invisible\n */\ntoggleColumnVisibility(propertyId, columnIndex, value)\n</code></pre>"},{"location":"03-props/06-Properties-Controller/#enablingdisabling-wide-flyout-ok-button-methods","title":"Enabling/disabling wide flyout \u201cOK\u201d button methods","text":"<pre><code>/**\n* Set the \"OK\" button in Wide Flyout to disabled(true) or enabled(false) for given summary panel\n* @param panelId {name: panel.id}\n* @param wideFlyoutPrimaryButtonDisable boolean\n*/\nsetWideFlyoutPrimaryButtonDisabled(panelId, wideFlyoutPrimaryButtonDisable)\n\n/**\n* @param panelId {name: panel.id}\n*/\ngetWideFlyoutPrimaryButtonDisabled(panelId)\n</code></pre>"},{"location":"04-trouble/01-Troubleshooting/","title":"Trouble shooting","text":""},{"location":"04-trouble/01-Troubleshooting/#testing","title":"Testing","text":"<p>When testing your application with Jest, this error might show up: <code>crypto.getRandomValues() not supported</code>. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported for details.</p> <p>To fix, added this to your jest setup file: <pre><code>const cryptoJest = require(\"crypto\");\nObject.defineProperty(global.self, \"crypto\", {\n    value: {\n        getRandomValues: (arr) =&gt; cryptoJest.randomBytes(arr.length)\n    }\n});\n</code></pre></p>"},{"location":"04-trouble/01-Troubleshooting/#elyra-canvas-styling-guidelines","title":"Elyra Canvas styling guidelines","text":"<ul> <li>Used the <code>data-id</code> attribute on inputs to be used for automated tests.  Format for common properties should be <code>properties-</code></li> <li>className format format for common-properties should be <code>properties-</code></li> <li>Limit the use of html(DOM) ids</li> <li>Minimum inline styling.  This allows for consumers to easily override styling.</li> <li>scss/sass styling should be added to the component\u2019s folder</li> <li>No <code>important!</code> in styling</li> <li>Use variables for all colors(preferably from carbon)</li> </ul>"},{"location":"05-contrib/01-Testing-Guidelines-for-Development/","title":"Testing Guidelines for Development","text":""},{"location":"05-contrib/01-Testing-Guidelines-for-Development/#unit-testing","title":"Unit Testing","text":"<p>The Canvas unit tests are automated with the primary purpose of providing rapid feedback to the developers.  The test cases are run during every development build.   Unit test cases are written using Jest Jest Tutorial.  The test cases should be written and delivered at the time that a feature or enhancement is delivered.</p> <p>Unit test cases should focus on good coverage of a function/service.  We are current investigating code coverage analysis tools and will update this doc when it is implemented.</p> <p>Unit test case coverage should focus on these areas:</p> <ul> <li>All APIs and all UI elements.</li> <li>All component properties.</li> <li>A variety of input data.</li> </ul> <p>Here is a good blog on JavaScript Unit Testing</p>"},{"location":"05-contrib/01-Testing-Guidelines-for-Development/#functional-testing","title":"Functional Testing","text":"<p>The Canvas Functional Test cases will be automated and run during code delivery.  The function test case will be automated and written using Cypress.</p> <p>Functional Testing coverage includes the following types of tests.</p> <ul> <li>Core functionality</li> <li>Inter-operate with other Canvas elements.</li> <li>Need to test both forward and backwards compatibility</li> <li>Negative / bounds</li> <li>Globalization / Localization<ul> <li>Handling of all strings using UTF-8</li> <li>Verifying non-English unicode data is handled appropriately</li> <li>Externalizing all strings that may be presented for the user (e.g., error messages, UI labels, etc.)</li> </ul> </li> <li>Access control security (roles / permissions / tenant management)</li> <li>Malicious and security (code scans such as AppScan, ethical hacking)</li> <li>Accessibility for UI</li> </ul>"},{"location":"05-contrib/01-Testing-Guidelines-for-Development/#debugging-tests","title":"Debugging Tests","text":""},{"location":"05-contrib/01-Testing-Guidelines-for-Development/#jest-tests-unit","title":"Jest tests (unit)","text":"<p>https://facebook.github.io/jest/docs/troubleshooting.html </p> <p>With node 8 or newer</p> <ul> <li>Add <code>debugger;</code> statement to your Jest test suite program where you want to stop and begin debugging.</li> <li> <p>If you want to run just a single test within your test program (rather than all of them) temporarily change the it() method for the test to be it.only(). For example, change:</p> <p><code>it(\"should add a node\", () =&gt; { ... })</code></p> <p>to be:</p> <p><code>it.only(\"should add a node\", () =&gt; { ... })</code></p> </li> <li> <p>In the console enter: <code>npm run debug</code> or <code>npm run debug &lt;test suite name&gt;</code></p> </li> <li>Open Chrome debugging tools by pasting this into the Chrome address field: chrome://inspect/</li> <li>You should see a \u2018remote\u2019 target for <code>node_modules/.bin/jest</code>. Click on the <code>inspect</code> link below it.</li> <li>Click on sources and then click the play button (right pointing blue triangle icon).</li> <li>The code should run to the point where your debugger statement was added.</li> </ul>"}]}